(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const O={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return Jt(this.context.count)},getNextContextId(){return Jt(this.context.count++)}};function Jt(e){const t=String(e),n=t.length-1;return O.context.id+(n?String.fromCharCode(96+n):"")+t}function Ne(e){O.context=e}const xn=!1,Vn=(e,t)=>e===t,$e=Symbol("solid-proxy"),$n=typeof Proxy=="function",Rt=Symbol("solid-track"),gt={equals:Vn};let kn=Nn;const Me=1,mt=2,_n={owned:null,cleanups:null,context:null,owner:null},Pt={};var G=null;let ut=null,Hn=null,Z=null,de=null,xe=null,$t=0;function Ze(e,t){const n=Z,r=G,i=e.length===0,s=t===void 0?r:t,o=i?_n:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=i?e:()=>e(()=>ue(()=>rt(o)));G=o,Z=null;try{return Ee(a,!0)}finally{Z=n,G=r}}function X(e,t){t=t?Object.assign({},gt,t):gt;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),Pn(n,i));return[An.bind(n),r]}function Qt(e,t,n){const r=_t(e,t,!0,Me);Xe(r)}function Q(e,t,n){const r=_t(e,t,!1,Me);Xe(r)}function nt(e,t,n){kn=nr;const r=_t(e,t,!1,Me),i=He&&kt(He);i&&(r.suspense=i),r.user=!0,xe?xe.push(r):Xe(r)}function ae(e,t,n){n=n?Object.assign({},gt,n):gt;const r=_t(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Xe(r),An.bind(r)}function Bn(e){return e&&typeof e=="object"&&"then"in e}function Sn(e,t,n){let r,i,s;r=!0,i=e,s={};let o=null,a=Pt,l=null,c=!1,u="initialValue"in s,f=typeof r=="function"&&ae(r);const m=new Set,[w,p]=(s.storage||X)(s.initialValue),[$,M]=X(void 0),[x,_]=X(void 0,{equals:!1}),[z,I]=X(u?"ready":"unresolved");O.context&&(l=O.getNextContextId(),s.ssrLoadFrom==="initial"?a=s.initialValue:O.load&&O.has(l)&&(a=O.load(l)));function N(v,A,B,W){return o===v&&(o=null,W!==void 0&&(u=!0),(v===a||A===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(W,{value:A})),a=Pt,U(A,B)),A}function U(v,A){Ee(()=>{A===void 0&&p(()=>v),I(A!==void 0?"errored":u?"ready":"unresolved"),M(A);for(const B of m.keys())B.decrement();m.clear()},!1)}function T(){const v=He&&kt(He),A=w(),B=$();if(B!==void 0&&!o)throw B;return Z&&!Z.user&&v&&Qt(()=>{x(),o&&(v.resolved&&ut||m.has(v)||(v.increment(),m.add(v)))}),A}function E(v=!0){if(v!==!1&&c)return;c=!1;const A=f?f():r;if(A==null||A===!1){N(o,ue(w));return}let B;const W=a!==Pt?a:ue(()=>{try{return i(A,{value:w(),refetching:v})}catch(re){B=re}});if(B!==void 0){N(o,void 0,ft(B),A);return}else if(!Bn(W))return N(o,W,void 0,A),W;return o=W,"v"in W?(W.s===1?N(o,W.v,void 0,A):N(o,void 0,ft(W.v),A),W):(c=!0,queueMicrotask(()=>c=!1),Ee(()=>{I(u?"refreshing":"pending"),_()},!1),W.then(re=>N(W,re,void 0,A),re=>N(W,void 0,ft(re),A)))}Object.defineProperties(T,{state:{get:()=>z()},error:{get:()=>$()},loading:{get(){const v=z();return v==="pending"||v==="refreshing"}},latest:{get(){if(!u)return T();const v=$();if(v&&!o)throw v;return w()}}});let L=G;return f?Qt(()=>(L=G,E(!1))):E(!1),[T,{refetch:v=>Gn(L,()=>E(v)),mutate:p}]}function Cn(e){return Ee(e,!1)}function ue(e){if(Z===null)return e();const t=Z;Z=null;try{return e()}finally{Z=t}}function et(e){nt(()=>ue(e))}function Te(e){return G===null||(G.cleanups===null?G.cleanups=[e]:G.cleanups.push(e)),e}function It(){return Z}function Xn(){return G}function Gn(e,t){const n=G,r=Z;G=e,Z=null;try{return Ee(t,!0)}catch(i){Ht(i)}finally{G=n,Z=r}}const[Tl,El]=X(!1);function Jn(e){xe.push.apply(xe,e),e.length=0}function Vt(e,t){const n=Symbol("context");return{id:n,Provider:rr(n),defaultValue:e}}function kt(e){let t;return G&&G.context&&(t=G.context[e.id])!==void 0?t:e.defaultValue}function Qn(e){const t=ae(e),n=ae(()=>Ut(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let He;function Zn(){return He||(He=Vt())}function An(){if(this.sources&&this.state)if(this.state===Me)Xe(this);else{const e=de;de=null,Ee(()=>bt(this),!1),de=e}if(Z){const e=this.observers?this.observers.length:0;Z.sources?(Z.sources.push(this),Z.sourceSlots.push(e)):(Z.sources=[this],Z.sourceSlots=[e]),this.observers?(this.observers.push(Z),this.observerSlots.push(Z.sources.length-1)):(this.observers=[Z],this.observerSlots=[Z.sources.length-1])}return this.value}function Pn(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Ee(()=>{for(let i=0;i<e.observers.length;i+=1){const s=e.observers[i],o=ut&&ut.running;o&&ut.disposed.has(s),(o?!s.tState:!s.state)&&(s.pure?de.push(s):xe.push(s),s.observers&&Tn(s)),o||(s.state=Me)}if(de.length>1e6)throw de=[],new Error},!1)),t}function Xe(e){if(!e.fn)return;rt(e);const t=$t;er(e,e.value,t)}function er(e,t,n){let r;const i=G,s=Z;Z=G=e;try{r=e.fn(t)}catch(o){return e.pure&&(e.state=Me,e.owned&&e.owned.forEach(rt),e.owned=null),e.updatedAt=n+1,Ht(o)}finally{Z=s,G=i}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Pn(e,r):e.value=r,e.updatedAt=n)}function _t(e,t,n,r=Me,i){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:G,context:G?G.context:null,pure:n};return G===null||G!==_n&&(G.owned?G.owned.push(s):G.owned=[s]),s}function pt(e){if(e.state===0)return;if(e.state===mt)return bt(e);if(e.suspense&&ue(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<$t);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===Me)Xe(e);else if(e.state===mt){const r=de;de=null,Ee(()=>bt(e,t[0]),!1),de=r}}function Ee(e,t){if(de)return e();let n=!1;t||(de=[]),xe?n=!0:xe=[],$t++;try{const r=e();return tr(n),r}catch(r){n||(xe=null),de=null,Ht(r)}}function tr(e){if(de&&(Nn(de),de=null),e)return;const t=xe;xe=null,t.length&&Ee(()=>kn(t),!1)}function Nn(e){for(let t=0;t<e.length;t++)pt(e[t])}function nr(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:pt(r)}if(O.context){if(O.count){O.effects||(O.effects=[]),O.effects.push(...e.slice(0,n));return}Ne()}for(O.effects&&(O.done||!O.count)&&(e=[...O.effects,...e],n+=O.effects.length,delete O.effects),t=0;t<n;t++)pt(e[t])}function bt(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const i=r.state;i===Me?r!==t&&(!r.updatedAt||r.updatedAt<$t)&&pt(r):i===mt&&bt(r,t)}}}function Tn(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=mt,n.pure?de.push(n):xe.push(n),n.observers&&Tn(n))}}function rt(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const s=i.pop(),o=n.observerSlots.pop();r<i.length&&(s.sourceSlots[o]=r,i[r]=s,n.observerSlots[r]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)rt(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)rt(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function ft(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Ht(e,t=G){throw ft(e)}function Ut(e){if(typeof e=="function"&&!e.length)return Ut(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=Ut(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function rr(e,t){return function(r){let i;return Q(()=>i=ue(()=>(G.context={...G.context,[e]:r.value},Qn(()=>r.children))),void 0),i}}const ir=Symbol("fallback");function Zt(e){for(let t=0;t<e.length;t++)e[t]()}function sr(e,t,n={}){let r=[],i=[],s=[],o=0,a=t.length>1?[]:null;return Te(()=>Zt(s)),()=>{let l=e()||[],c=l.length,u,f;return l[Rt],ue(()=>{let w,p,$,M,x,_,z,I,N;if(c===0)o!==0&&(Zt(s),s=[],r=[],i=[],o=0,a&&(a=[])),n.fallback&&(r=[ir],i[0]=Ze(U=>(s[0]=U,n.fallback())),o=1);else if(o===0){for(i=new Array(c),f=0;f<c;f++)r[f]=l[f],i[f]=Ze(m);o=c}else{for($=new Array(c),M=new Array(c),a&&(x=new Array(c)),_=0,z=Math.min(o,c);_<z&&r[_]===l[_];_++);for(z=o-1,I=c-1;z>=_&&I>=_&&r[z]===l[I];z--,I--)$[I]=i[z],M[I]=s[z],a&&(x[I]=a[z]);for(w=new Map,p=new Array(I+1),f=I;f>=_;f--)N=l[f],u=w.get(N),p[f]=u===void 0?-1:u,w.set(N,f);for(u=_;u<=z;u++)N=r[u],f=w.get(N),f!==void 0&&f!==-1?($[f]=i[u],M[f]=s[u],a&&(x[f]=a[u]),f=p[f],w.set(N,f)):s[u]();for(f=_;f<c;f++)f in $?(i[f]=$[f],s[f]=M[f],a&&(a[f]=x[f],a[f](f))):i[f]=Ze(m);i=i.slice(0,o=c),r=l.slice(0)}return i});function m(w){if(s[f]=w,a){const[p,$]=X(f);return a[f]=$,t(l[f],p)}return t(l[f])}}}function d(e,t){return ue(()=>e(t||{}))}function ct(){return!0}const Ft={get(e,t,n){return t===$e?n:e.get(t)},has(e,t){return t===$e?!0:e.has(t)},set:ct,deleteProperty:ct,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:ct,deleteProperty:ct}},ownKeys(e){return e.keys()}};function Nt(e){return(e=typeof e=="function"?e():e)?e:{}}function ar(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function R(...e){let t=!1;for(let o=0;o<e.length;o++){const a=e[o];t=t||!!a&&$e in a,e[o]=typeof a=="function"?(t=!0,ae(a)):a}if($n&&t)return new Proxy({get(o){for(let a=e.length-1;a>=0;a--){const l=Nt(e[a])[o];if(l!==void 0)return l}},has(o){for(let a=e.length-1;a>=0;a--)if(o in Nt(e[a]))return!0;return!1},keys(){const o=[];for(let a=0;a<e.length;a++)o.push(...Object.keys(Nt(e[a])));return[...new Set(o)]}},Ft);const n={},r=Object.create(null);for(let o=e.length-1;o>=0;o--){const a=e[o];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let c=l.length-1;c>=0;c--){const u=l[c];if(u==="__proto__"||u==="constructor")continue;const f=Object.getOwnPropertyDescriptor(a,u);if(!r[u])r[u]=f.get?{enumerable:!0,configurable:!0,get:ar.bind(n[u]=[f.get.bind(a)])}:f.value!==void 0?f:void 0;else{const m=n[u];m&&(f.get?m.push(f.get.bind(a)):f.value!==void 0&&m.push(()=>f.value))}}}const i={},s=Object.keys(r);for(let o=s.length-1;o>=0;o--){const a=s[o],l=r[a];l&&l.get?Object.defineProperty(i,a,l):i[a]=l?l.value:void 0}return i}function St(e,...t){const n=t.length;if($n&&$e in e){const i=n>1?t.flat():t[0],s=t.map(o=>new Proxy({get(a){return o.includes(a)?e[a]:void 0},has(a){return o.includes(a)&&a in e},keys(){return o.filter(a=>a in e)}},Ft));return s.push(new Proxy({get(o){return i.includes(o)?void 0:e[o]},has(o){return i.includes(o)?!1:o in e},keys(){return Object.keys(e).filter(o=>!i.includes(o))}},Ft)),s}const r=[];for(let i=0;i<=n;i++)r[i]={};for(const i of Object.getOwnPropertyNames(e)){let s=n;for(let l=0;l<t.length;l++)if(t[l].includes(i)){s=l;break}const o=Object.getOwnPropertyDescriptor(e,i);!o.get&&!o.set&&o.enumerable&&o.writable&&o.configurable?r[s][i]=o.value:Object.defineProperty(r[s],i,o)}return r}function ot(e){let t,n;const r=i=>{const s=O.context;if(s){const[a,l]=X();O.count||(O.count=0),O.count++,(n||(n=e())).then(c=>{!O.done&&Ne(s),O.count--,l(()=>c.default),Ne()}),t=a}else if(!t){const[a]=Sn(()=>(n||(n=e())).then(l=>l.default));t=a}let o;return ae(()=>(o=t())?ue(()=>{if(!s||O.done)return o(i);const a=O.context;Ne(s);const l=o(i);return Ne(a),l}):"")};return r.preload=()=>n||((n=e()).then(i=>t=()=>i.default),n),r}const or=e=>`Stale read from <${e}>.`;function Re(e){const t="fallback"in e&&{fallback:()=>e.fallback};return ae(sr(()=>e.each,e.children,t||void 0))}function J(e){const t=e.keyed,n=ae(()=>e.when,void 0,void 0),r=t?n:ae(n,void 0,{equals:(i,s)=>!i==!s});return ae(()=>{const i=r();if(i){const s=e.children;return typeof s=="function"&&s.length>0?ue(()=>s(t?i:()=>{if(!ue(r))throw or("Show");return n()})):s}return e.fallback},void 0,void 0)}const lr=Vt();function Wt(e){let t=0,n,r,i,s,o;const[a,l]=X(!1),c=Zn(),u={increment:()=>{++t===1&&l(!0)},decrement:()=>{--t===0&&l(!1)},inFallback:a,effects:[],resolved:!1},f=Xn();if(O.context&&O.load){const p=O.getContextId();let $=O.load(p);if($&&(typeof $!="object"||$.s!==1?i=$:O.gather(p)),i&&i!=="$$f"){const[M,x]=X(void 0,{equals:!1});s=M,i.then(()=>{if(O.done)return x();O.gather(p),Ne(r),x(),Ne()},_=>{o=_,x()})}}const m=kt(lr);m&&(n=m.register(u.inFallback));let w;return Te(()=>w&&w()),d(c.Provider,{value:u,get children(){return ae(()=>{if(o)throw o;if(r=O.context,s)return s(),s=void 0;r&&i==="$$f"&&Ne();const p=ae(()=>e.children);return ae($=>{const M=u.inFallback(),{showContent:x=!0,showFallback:_=!0}=n?n():{};if((!M||i&&i!=="$$f")&&x)return u.resolved=!0,w&&w(),w=r=i=void 0,Jn(u.effects),p();if(_)return w?$:Ze(z=>(w=z,r&&(Ne({id:r.id+"F",count:0}),r=void 0),e.fallback),f)})})}})}const cr=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],dr=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...cr]),ur=new Set(["innerHTML","textContent","innerText","children"]),fr=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),hr=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function yr(e,t){const n=hr[e];return typeof n=="object"?n[t]?n.$:void 0:n}const gr=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),mr=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),pr={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},ht=e=>ae(()=>e());function br(e,t,n){let r=n.length,i=t.length,s=r,o=0,a=0,l=t[i-1].nextSibling,c=null;for(;o<i||a<s;){if(t[o]===n[a]){o++,a++;continue}for(;t[i-1]===n[s-1];)i--,s--;if(i===o){const u=s<r?a?n[a-1].nextSibling:n[s-a]:l;for(;a<s;)e.insertBefore(n[a++],u)}else if(s===a)for(;o<i;)(!c||!c.has(t[o]))&&t[o].remove(),o++;else if(t[o]===n[s-1]&&n[a]===t[i-1]){const u=t[--i].nextSibling;e.insertBefore(n[a++],t[o++].nextSibling),e.insertBefore(n[--s],u),t[i]=n[s]}else{if(!c){c=new Map;let f=a;for(;f<s;)c.set(n[f],f++)}const u=c.get(t[o]);if(u!=null)if(a<u&&u<s){let f=o,m=1,w;for(;++f<i&&f<s&&!((w=c.get(t[f]))==null||w!==u+m);)m++;if(m>u-a){const p=t[o];for(;a<u;)e.insertBefore(n[a++],p)}else e.replaceChild(n[a++],t[o++])}else o++;else t[o++].remove()}}}const en="_$DX_DELEGATE";function vr(e,t,n,r={}){let i;return Ze(s=>{i=s,t===document?e():h(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function C(e,t,n,r){let i;const s=()=>{const a=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return a.innerHTML=e,n?a.content.firstChild.firstChild:r?a.firstChild:a.content.firstChild},o=t?()=>ue(()=>document.importNode(i||(i=s()),!0)):()=>(i||(i=s())).cloneNode(!0);return o.cloneNode=o,o}function pe(e,t=window.document){const n=t[en]||(t[en]=new Set);for(let r=0,i=e.length;r<i;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,Sr))}}function ke(e,t,n){Ie(e)||(n==null?e.removeAttribute(t):e.setAttribute(t,n))}function wr(e,t,n,r){Ie(e)||(r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r))}function xr(e,t,n){Ie(e)||(n?e.setAttribute(t,""):e.removeAttribute(t))}function ie(e,t){Ie(e)||(t==null?e.removeAttribute("class"):e.className=t)}function Ct(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=s=>i.call(e,n[1],s))}else e.addEventListener(t,n,typeof n!="function"&&n)}function En(e,t,n={}){const r=Object.keys(t||{}),i=Object.keys(n);let s,o;for(s=0,o=i.length;s<o;s++){const a=i[s];!a||a==="undefined"||t[a]||(tn(e,a,!1),delete n[a])}for(s=0,o=r.length;s<o;s++){const a=r[s],l=!!t[a];!a||a==="undefined"||n[a]===l||!l||(tn(e,a,!0),n[a]=l)}return n}function Mn(e,t,n){if(!t)return n?ke(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)i=t[s],i!==n[s]&&(r.setProperty(s,i),n[s]=i);return n}function yt(e,t,n){n!=null?e.style.setProperty(t,n):e.style.removeProperty(t)}function Bt(e,t={},n,r){const i={};return r||Q(()=>i.children=it(e,t.children,i.children)),Q(()=>typeof t.ref=="function"&&Ln(t.ref,e)),Q(()=>$r(e,t,n,!0,i,!0)),i}function Ln(e,t,n){return ue(()=>e(t,n))}function h(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return it(e,t,r,n);Q(i=>it(e,t(),i,n),r)}function $r(e,t,n,r,i={},s=!1){t||(t={});for(const o in i)if(!(o in t)){if(o==="children")continue;i[o]=nn(e,o,null,i[o],n,s,t)}for(const o in t){if(o==="children")continue;const a=t[o];i[o]=nn(e,o,a,i[o],n,s,t)}}function kr(e){let t,n;return!Ie()||!(t=O.registry.get(n=Cr()))?e():(O.completed&&O.completed.add(t),O.registry.delete(n),t)}function Ie(e){return!!O.context&&!O.done&&(!e||e.isConnected)}function _r(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function tn(e,t,n){const r=t.trim().split(/\s+/);for(let i=0,s=r.length;i<s;i++)e.classList.toggle(r[i],n)}function nn(e,t,n,r,i,s,o){let a,l,c,u,f;if(t==="style")return Mn(e,n,r);if(t==="classList")return En(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const m=t.slice(3);r&&e.removeEventListener(m,r,typeof r!="function"&&r),n&&e.addEventListener(m,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const m=t.slice(10);r&&e.removeEventListener(m,r,!0),n&&e.addEventListener(m,n,!0)}else if(t.slice(0,2)==="on"){const m=t.slice(2).toLowerCase(),w=gr.has(m);if(!w&&r){const p=Array.isArray(r)?r[0]:r;e.removeEventListener(m,p)}(w||n)&&(Ct(e,m,n,w),w&&pe([m]))}else if(t.slice(0,5)==="attr:")ke(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")xr(e,t.slice(5),n);else if((f=t.slice(0,5)==="prop:")||(c=ur.has(t))||!i&&((u=yr(t,e.tagName))||(l=dr.has(t)))||(a=e.nodeName.includes("-")||"is"in o)){if(f)t=t.slice(5),l=!0;else if(Ie(e))return n;t==="class"||t==="className"?ie(e,n):a&&!l&&!c?e[_r(t)]=n:e[u||t]=n}else{const m=i&&t.indexOf(":")>-1&&pr[t.split(":")[0]];m?wr(e,m,t,n):ke(e,fr[t]||t,n)}return n}function Sr(e){if(O.registry&&O.events&&O.events.find(([l,c])=>c===e))return;let t=e.target;const n=`$$${e.type}`,r=e.target,i=e.currentTarget,s=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),o=()=>{const l=t[n];if(l&&!t.disabled){const c=t[`${n}Data`];if(c!==void 0?l.call(t,c,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},a=()=>{for(;o()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),O.registry&&!O.done&&(O.done=_$HY.done=!0),e.composedPath){const l=e.composedPath();s(l[0]);for(let c=0;c<l.length-2&&(t=l[c],!!o());c++){if(t._$host){t=t._$host,a();break}if(t.parentNode===i)break}}else a();s(r)}function it(e,t,n,r,i){const s=Ie(e);if(s){!n&&(n=[...e.childNodes]);let l=[];for(let c=0;c<n.length;c++){const u=n[c];u.nodeType===8&&u.data.slice(0,2)==="!$"?u.remove():l.push(u)}n=l}for(;typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(s||o==="number"&&(t=t.toString(),t===n))return n;if(a){let l=n[0];l&&l.nodeType===3?l.data!==t&&(l.data=t):l=document.createTextNode(t),n=We(e,n,r,l)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||o==="boolean"){if(s)return n;n=We(e,n,r)}else{if(o==="function")return Q(()=>{let l=t();for(;typeof l=="function";)l=l();n=it(e,l,n,r)}),()=>n;if(Array.isArray(t)){const l=[],c=n&&Array.isArray(n);if(Kt(l,t,n,i))return Q(()=>n=it(e,l,n,r,!0)),()=>n;if(s){if(!l.length)return n;if(r===void 0)return n=[...e.childNodes];let u=l[0];if(u.parentNode!==e)return n;const f=[u];for(;(u=u.nextSibling)!==r;)f.push(u);return n=f}if(l.length===0){if(n=We(e,n,r),a)return n}else c?n.length===0?rn(e,l,r):br(e,n,l):(n&&We(e),rn(e,l));n=l}else if(t.nodeType){if(s&&t.parentNode)return n=a?[t]:t;if(Array.isArray(n)){if(a)return n=We(e,n,r,t);We(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Kt(e,t,n,r){let i=!1;for(let s=0,o=t.length;s<o;s++){let a=t[s],l=n&&n[e.length],c;if(!(a==null||a===!0||a===!1))if((c=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))i=Kt(e,a,l)||i;else if(c==="function")if(r){for(;typeof a=="function";)a=a();i=Kt(e,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||i}else e.push(a),i=!0;else{const u=String(a);l&&l.nodeType===3&&l.data===u?e.push(l):e.push(document.createTextNode(u))}}return i}function rn(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function We(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let s=!1;for(let o=t.length-1;o>=0;o--){const a=t[o];if(i!==a){const l=a.parentNode===e;!s&&!o?l?e.replaceChild(i,a):e.insertBefore(i,n):l&&a.remove()}else s=!0}}else e.insertBefore(i,n);return[i]}function Cr(){return O.getNextContextId()}const Ar="http://www.w3.org/2000/svg";function Pr(e,t=!1,n=void 0){return t?document.createElementNS(Ar,e):document.createElement(e,{is:n})}function Nr(e,t){const n=ae(e);return ae(()=>{const r=n();switch(typeof r){case"function":return ue(()=>r(t));case"string":const i=mr.has(r),s=O.context?kr():Pr(r,i,ue(()=>t.is));return Bt(s,t,i),s}})}function Dn(e){const[,t]=St(e,["component"]);return Nr(()=>e.component,t)}const Tr="modulepreload",Er=function(e){return"/"+e},sn={},lt=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let o=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=o(n.map(c=>{if(c=Er(c),c in sn)return;sn[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Tr,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((w,p)=>{m.addEventListener("load",w),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};/**
* @license lucide-solid v0.475.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var Mr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},Ke=Mr,Lr=C("<svg>"),Dr=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Or=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),zr=e=>{const[t,n]=St(e,["color","size","strokeWidth","children","class","name","iconNode","absoluteStrokeWidth"]);return(()=>{var r=Lr();return Bt(r,R(Ke,{get width(){return t.size??Ke.width},get height(){return t.size??Ke.height},get stroke(){return t.color??Ke.stroke},get"stroke-width"(){return ht(()=>!!t.absoluteStrokeWidth)()?Number(t.strokeWidth??Ke["stroke-width"])*24/Number(t.size):Number(t.strokeWidth??Ke["stroke-width"])},get class(){return Or("lucide","lucide-icon",t.name!=null?`lucide-${Dr(t==null?void 0:t.name)}`:void 0,t.class!=null?t.class:"")}},n),!0,!0),h(r,d(Re,{get each(){return t.iconNode},children:([i,s])=>d(Dn,R({component:i},s))})),r})()},Y=zr,jr=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Rr=e=>d(Y,R(e,{name:"Check",iconNode:jr})),Ir=Rr,Ur=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Fr=e=>d(Y,R(e,{name:"ChevronDown",iconNode:Ur})),Wr=Fr,Kr=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Yr=e=>d(Y,R(e,{name:"ChevronLeft",iconNode:Kr})),qr=Yr,Vr=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Hr=e=>d(Y,R(e,{name:"ChevronRight",iconNode:Vr})),Br=Hr,Xr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Gr=e=>d(Y,R(e,{name:"CircleAlert",iconNode:Xr})),Jr=Gr,Qr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Zr=e=>d(Y,R(e,{name:"CircleCheck",iconNode:Qr})),ei=Zr,ti=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],ni=e=>d(Y,R(e,{name:"CirclePlay",iconNode:ti})),ri=ni,ii=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],si=e=>d(Y,R(e,{name:"CirclePlus",iconNode:ii})),ai=si,oi=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],li=e=>d(Y,R(e,{name:"CloudDownload",iconNode:oi})),ci=li,di=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ui=e=>d(Y,R(e,{name:"Database",iconNode:di})),fi=ui,hi=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],yi=e=>d(Y,R(e,{name:"ExternalLink",iconNode:hi})),gi=yi,mi=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],pi=e=>d(Y,R(e,{name:"EyeOff",iconNode:mi})),bi=pi,vi=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wi=e=>d(Y,R(e,{name:"Eye",iconNode:vi})),xi=wi,$i=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],ki=e=>d(Y,R(e,{name:"Film",iconNode:$i})),_i=ki,Si=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],Ci=e=>d(Y,R(e,{name:"Filter",iconNode:Si})),Ai=Ci,Pi=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Ni=e=>d(Y,R(e,{name:"History",iconNode:Pi})),Ti=Ni,Ei=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Mi=e=>d(Y,R(e,{name:"Layers",iconNode:Ei})),Li=Mi,Di=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Oi=e=>d(Y,R(e,{name:"LayoutDashboard",iconNode:Di})),zi=Oi,ji=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Ri=e=>d(Y,R(e,{name:"Loader",iconNode:ji})),Ii=Ri,Ui=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],Fi=e=>d(Y,R(e,{name:"Maximize2",iconNode:Ui})),Wi=Fi,Ki=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Yi=e=>d(Y,R(e,{name:"Music",iconNode:Ki})),qi=Yi,Vi=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Hi=e=>d(Y,R(e,{name:"Pause",iconNode:Vi})),Bi=Hi,Xi=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Gi=e=>d(Y,R(e,{name:"Pencil",iconNode:Xi})),Ji=Gi,Qi=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Zi=e=>d(Y,R(e,{name:"Play",iconNode:Qi})),es=Zi,ts=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],ns=e=>d(Y,R(e,{name:"Puzzle",iconNode:ts})),rs=ns,is=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ss=e=>d(Y,R(e,{name:"Search",iconNode:is})),as=ss,os=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],ls=e=>d(Y,R(e,{name:"Settings2",iconNode:os})),cs=ls,ds=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],us=e=>d(Y,R(e,{name:"ShieldCheck",iconNode:ds})),fs=us,hs=[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]],ys=e=>d(Y,R(e,{name:"SkipBack",iconNode:hs})),gs=ys,ms=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],ps=e=>d(Y,R(e,{name:"SkipForward",iconNode:ms})),bs=ps,vs=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],ws=e=>d(Y,R(e,{name:"SlidersVertical",iconNode:vs})),xs=ws,$s=[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]],ks=e=>d(Y,R(e,{name:"Terminal",iconNode:$s})),_s=ks,Ss=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Cs=e=>d(Y,R(e,{name:"Trash2",iconNode:Ss})),As=Cs,Ps=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ns=e=>d(Y,R(e,{name:"User",iconNode:Ps})),Ts=Ns,Es=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ms=e=>d(Y,R(e,{name:"X",iconNode:Es})),Ls=Ms,Ds=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Os=e=>d(Y,R(e,{name:"Zap",iconNode:Ds})),zs=Os;const an={zap:zs,"plus-circle":ai,layers:Li,sliders:xs,puzzle:rs,"chevron-down":Wr,"trash-2":As,"download-cloud":ci,music:qi,"shield-check":fs,database:fi,"alert-circle":Jr,"check-circle-2":ei,loader:Ii,terminal:_s,search:as,filter:Ai,film:_i,play:es,"external-link":gi,x:Ls,"play-circle":ri,"skip-back":gs,pause:Bi,"skip-forward":bs,"layout-dashboard":zi,history:Ti,"chevron-right":Br,"chevron-left":qr,eye:xi,"eye-off":bi,pencil:Ji,check:Ir,"settings-2":cs,user:Ts,"maximize-2":Wi};function j(e){const t=an[e.name]||an["alert-circle"];return d(Dn,{component:t,get class(){return e.class}})}const Yt=Symbol("store-raw"),Ve=Symbol("store-node"),Pe=Symbol("store-has"),On=Symbol("store-self");function zn(e){let t=e[$e];if(!t&&(Object.defineProperty(e,$e,{value:t=new Proxy(e,Is)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,s=n.length;i<s;i++){const o=n[i];r[o].get&&Object.defineProperty(e,o,{enumerable:r[o].enumerable,get:r[o].get.bind(t)})}}return t}function vt(e){let t;return e!=null&&typeof e=="object"&&(e[$e]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function st(e,t=new Set){let n,r,i,s;if(n=e!=null&&e[Yt])return n;if(!vt(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,a=e.length;o<a;o++)i=e[o],(r=st(i,t))!==i&&(e[o]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let l=0,c=o.length;l<c;l++)s=o[l],!a[s].get&&(i=e[s],(r=st(i,t))!==i&&(e[s]=r))}return e}function wt(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function at(e,t,n){if(e[t])return e[t];const[r,i]=X(n,{equals:!1,internal:!0});return r.$=i,e[t]=r}function js(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===$e||t===Ve||(delete n.value,delete n.writable,n.get=()=>e[$e][t]),n}function jn(e){It()&&at(wt(e,Ve),On)()}function Rs(e){return jn(e),Reflect.ownKeys(e)}const Is={get(e,t,n){if(t===Yt)return e;if(t===$e)return n;if(t===Rt)return jn(e),n;const r=wt(e,Ve),i=r[t];let s=i?i():e[t];if(t===Ve||t===Pe||t==="__proto__")return s;if(!i){const o=Object.getOwnPropertyDescriptor(e,t);It()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(s=at(r,t,s)())}return vt(s)?zn(s):s},has(e,t){return t===Yt||t===$e||t===Rt||t===Ve||t===Pe||t==="__proto__"?!0:(It()&&at(wt(e,Pe),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Rs,getOwnPropertyDescriptor:js};function xt(e,t,n,r=!1){if(!r&&e[t]===n)return;const i=e[t],s=e.length;n===void 0?(delete e[t],e[Pe]&&e[Pe][t]&&i!==void 0&&e[Pe][t].$()):(e[t]=n,e[Pe]&&e[Pe][t]&&i===void 0&&e[Pe][t].$());let o=wt(e,Ve),a;if((a=at(o,t,i))&&a.$(()=>n),Array.isArray(e)&&e.length!==s){for(let l=e.length;l<s;l++)(a=o[l])&&a.$();(a=at(o,"length",s))&&a.$(e.length)}(a=o[On])&&a.$()}function Rn(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const i=n[r];xt(e,i,t[i])}}function Us(e,t){if(typeof t=="function"&&(t=t(e)),t=st(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const i=t[n];e[n]!==i&&xt(e,n,i)}xt(e,"length",r)}else Rn(e,t)}function Qe(e,t,n=[]){let r,i=e;if(t.length>1){r=t.shift();const o=typeof r,a=Array.isArray(e);if(Array.isArray(r)){for(let l=0;l<r.length;l++)Qe(e,[r[l]].concat(t),n);return}else if(a&&o==="function"){for(let l=0;l<e.length;l++)r(e[l],l)&&Qe(e,[l].concat(t),n);return}else if(a&&o==="object"){const{from:l=0,to:c=e.length-1,by:u=1}=r;for(let f=l;f<=c;f+=u)Qe(e,[f].concat(t),n);return}else if(t.length>1){Qe(e[r],t,[r].concat(n));return}i=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(i,n),s===i)||r===void 0&&s==null||(s=st(s),r===void 0||vt(i)&&vt(s)&&!Array.isArray(s)?Rn(i,s):xt(e,r,s))}function In(...[e,t]){const n=st(e||{}),r=Array.isArray(n),i=zn(n);function s(...o){Cn(()=>{r&&o.length===1?Us(n,o[0]):Qe(n,o)})}return[i,s]}const[Ae,oe]=In({activeDownloads:{},jobStatuses:{},logs:[],notification:null,lastJobId:null,error:null}),Fs=e=>{oe("activeDownloads",e.id,t=>({...t,...e,done:e.status==="complete"||e.percent>=100}))},Ws=e=>{oe("activeDownloads",e.id,t=>({...t,status:"error",error:e.message})),oe("error",e)};var Ks=C('<div class="space-y-3 overflow-y-auto custom-scrollbar flex-1 pr-2 max-h-[300px]"style="mask-image:linear-gradient(to bottom, black 0%, black 85%, transparent 100%);-webkit-mask-image:linear-gradient(to bottom, black 0%, black 85%, transparent 100%)">'),Ys=C('<div class="rounded-[2rem] border border-white/5 bg-black/20 p-6 flex flex-col gap-4 h-full"><div class="flex items-center justify-between"><h3 class="text-lg font-bold text-white flex items-center gap-2">Active Downloads'),qs=C('<div class="flex flex-col items-center justify-center flex-1 py-12 text-gray-500 gap-3"><span class="text-xs font-bold uppercase tracking-widest">No active tasks'),Vs=C('<div class="text-[10px] text-red-400 font-mono break-all">'),Hs=C('<div class="text-[10px] text-slate-500 text-right">ETA: '),Bs=C('<div class="rounded-xl border border-white/5 bg-white/5 p-3 space-y-2 transition-all duration-300"><div class="flex justify-between items-center text-xs"><span class="font-bold text-slate-200 truncate max-w-[70%]"></span><span></span></div><div class="h-1.5 w-full rounded-full bg-black/40 overflow-hidden"><div>');function Xs(){const e=ae(()=>Object.values(Ae.activeDownloads).sort((r,i)=>r.done!==i.done?r.done?1:-1:(r.filename||r.id).localeCompare(i.filename||i.id))),t=ae(()=>e().length>0);return(()=>{var n=Ys(),r=n.firstChild,i=r.firstChild,s=i.firstChild;return h(i,d(j,{name:"download-cloud",class:"w-5 h-5 text-accent-primary"}),s),h(n,d(J,{get when(){return t()},get fallback(){return(()=>{var o=qs(),a=o.firstChild;return h(o,d(j,{name:"check-circle-2",class:"w-10 h-10 opacity-20"}),a),o})()},get children(){var o=Ks();return h(o,d(Re,{get each(){return e()},children:a=>(()=>{var l=Bs(),c=l.firstChild,u=c.firstChild,f=u.nextSibling,m=c.nextSibling,w=m.firstChild;return h(u,()=>a.filename||a.id),h(f,(()=>{var p=ht(()=>a.status==="error");return()=>p()?"Error":ht(()=>a.percent!==void 0)()?`${a.percent.toFixed(1)}%`:"0.0%"})()),h(l,d(J,{get when(){return a.status==="error"},get children(){var p=Vs();return h(p,()=>a.error),p}}),m),h(l,d(J,{get when(){return ht(()=>!!(a.eta&&!a.done))()&&a.status!=="error"},get children(){var p=Hs();return p.firstChild,h(p,()=>a.eta,null),p}}),null),Q(p=>{var $={"opacity-0 scale-95":a.done,"opacity-100 scale-100":!a.done},M=`font-mono ${a.status==="error"?"text-red-400":a.done?"text-emerald-400":"text-accent-primary"}`,x=`h-full transition-all duration-300 ${a.status==="error"?"bg-red-500":a.done?"bg-emerald-500":"bg-vibrant-gradient"}`,_=`${a.percent||0}%`;return p.e=En(l,$,p.e),M!==p.t&&ie(f,p.t=M),x!==p.a&&ie(w,p.a=x),_!==p.o&&yt(w,"width",p.o=_),p},{e:void 0,t:void 0,a:void 0,o:void 0}),l})()})),o}}),null),n})()}var Gs=C('<div class="dashboard-grid-lines absolute inset-0 pointer-events-none z-0 rounded-3xl"style="background-size:calc((100% + 12px) / 16) 92px;background-position:-6px -6px">'),Js=C('<div class="absolute z-0 bg-accent-primary/20 border-2 border-accent-primary/50 rounded-[2rem] transition-all duration-200">'),Qs=C('<div class="relative w-full"style="display:grid;grid-template-columns:repeat(16, 1fr);grid-auto-rows:80px;gap:12px">'),Zs=C('<div class="absolute -top-1.5 -left-1.5 w-4 h-4 cursor-nwse-resize z-20 hover:bg-white/20 rounded-full">'),ea=C('<div class="absolute -top-1.5 -right-1.5 w-4 h-4 cursor-nesw-resize z-20 hover:bg-white/20 rounded-full">'),ta=C('<div class="absolute -bottom-1.5 -left-1.5 w-4 h-4 cursor-nesw-resize z-20 hover:bg-white/20 rounded-full">'),na=C('<div class="absolute -bottom-1.5 -right-1.5 w-4 h-4 cursor-nwse-resize z-20 hover:bg-white/20 rounded-full">'),ra=C('<div class="absolute top-0 left-2 right-2 h-1.5 cursor-ns-resize z-20 hover:bg-white/20">'),ia=C('<div class="absolute bottom-0 left-2 right-2 h-1.5 cursor-ns-resize z-20 hover:bg-white/20">'),sa=C('<div class="absolute left-0 top-2 bottom-2 w-1.5 cursor-ew-resize z-20 hover:bg-white/20">'),aa=C('<div class="absolute right-0 top-2 bottom-2 w-1.5 cursor-ew-resize z-20 hover:bg-white/20">'),oa=C('<div style="transition:grid-column 0.25s ease, grid-row 0.25s ease, grid-column-end 0.25s ease, grid-row-end 0.25s ease, transform 0.1s ease">');const la=80,ca=12;function da(e){return(()=>{var t=Qs();return Ln(n=>{e.ref&&e.ref(n)},t),h(t,d(J,{get when(){return e.isEditMode},get children(){return Gs()}}),null),h(t,d(J,{get when(){return e.ghost},get children(){var n=Js();return Q(r=>{var i=`${e.ghost.x+1} / span ${e.ghost.width}`,s=`${e.ghost.y+1} / span ${e.ghost.height}`;return i!==r.e&&yt(n,"grid-column",r.e=i),s!==r.t&&yt(n,"grid-row",r.t=s),r},{e:void 0,t:void 0}),n}}),null),h(t,()=>e.children,null),Q(n=>yt(t,"min-height",e.totalRows?`${e.totalRows*(la+ca)}px`:"auto")),t})()}function ua(e){const t=(n,r)=>{r.preventDefault(),r.stopPropagation(),e.onResizeStart&&e.onResizeStart(e.widgetId,n,r)};return(()=>{var n=oa();return Ct(n,"mousedown",e.onMouseDown,!0),h(n,()=>e.children,null),h(n,d(J,{get when(){return e.isEditMode},get children(){return[(()=>{var r=Zs();return r.$$mousedown=i=>t("nw",i),r})(),(()=>{var r=ea();return r.$$mousedown=i=>t("ne",i),r})(),(()=>{var r=ta();return r.$$mousedown=i=>t("sw",i),r})(),(()=>{var r=na();return r.$$mousedown=i=>t("se",i),r})(),(()=>{var r=ra();return r.$$mousedown=i=>t("n",i),r})(),(()=>{var r=ia();return r.$$mousedown=i=>t("s",i),r})(),(()=>{var r=sa();return r.$$mousedown=i=>t("w",i),r})(),(()=>{var r=aa();return r.$$mousedown=i=>t("e",i),r})()]}}),null),Q(r=>{var i=`${e.class||""} relative z-10`,s={"grid-column":`${(e.x||0)+1} / span ${e.width||e.span||1}`,"grid-row":`${(e.y||0)+1} / span ${e.height||1}`,...e.style||{}};return i!==r.e&&ie(n,r.e=i),r.t=Mn(n,s,r.t),r},{e:void 0,t:void 0}),n})()}pe(["mousedown"]);const At="/logo.png";var fa=C('<div class="rounded-[2rem] border border-accent-primary/20 glass-vibrant p-8 relative overflow-hidden group h-full"><div class="absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity duration-500"><img alt="ytdl-go logo"class="w-48 h-48 rotate-12 object-contain"></div><div class="relative z-10 space-y-4"><h1 class="text-4xl font-black text-white tracking-tight">Welcome Back!</h1><p class="text-lg text-gray-300 max-w-lg">Your media library is ready. You have <span class="text-white font-bold"> items</span> across <span class="text-white font-bold"> creators</span>.</p><div class="flex flex-wrap gap-3 pt-4"><button class="px-6 py-3 rounded-xl bg-white text-black font-black uppercase tracking-widest hover:scale-105 transition-transform shadow-lg flex items-center gap-2">New Download</button><button class="px-6 py-3 rounded-xl bg-black/40 text-white border border-white/10 font-black uppercase tracking-widest hover:bg-black/60 transition-colors flex items-center gap-2">Browse Library');function ha(e){return(()=>{var t=fa(),n=t.firstChild,r=n.firstChild,i=n.nextSibling,s=i.firstChild,o=s.nextSibling,a=o.firstChild,l=a.nextSibling,c=l.firstChild,u=l.nextSibling,f=u.nextSibling,m=f.firstChild,w=o.nextSibling,p=w.firstChild,$=p.firstChild,M=p.nextSibling,x=M.firstChild;return ke(r,"src",At),h(l,()=>{var _;return((_=e.stats)==null?void 0:_.totalItems)||0},c),h(f,()=>{var _;return((_=e.stats)==null?void 0:_.totalCreators)||0},m),p.$$click=()=>e.onTabChange("download"),h(p,d(j,{name:"plus-circle",class:"w-4 h-4"}),$),M.$$click=()=>e.onTabChange("library"),h(M,d(j,{name:"layers",class:"w-4 h-4"}),x),t})()}pe(["click"]);var ya=C('<div class="rounded-[2rem] border border-white/5 bg-black/20 p-6 flex flex-col justify-center gap-4 h-full"><h3 class="text-sm font-bold text-gray-400 uppercase tracking-widest">Library Stats</h3><div class="grid grid-cols-2 gap-4"><div class="p-4 rounded-2xl bg-white/5 border border-white/5"><div class="text-3xl font-black text-accent-primary"></div><div class="text-[10px] font-bold text-gray-500 uppercase">Creators</div></div><div class="p-4 rounded-2xl bg-white/5 border border-white/5"><div class="text-3xl font-black text-accent-secondary"></div><div class="text-[10px] font-bold text-gray-500 uppercase">Media Files');function ga(e){return(()=>{var t=ya(),n=t.firstChild,r=n.nextSibling,i=r.firstChild,s=i.firstChild,o=i.nextSibling,a=o.firstChild;return h(s,()=>{var l;return((l=e.stats)==null?void 0:l.totalCreators)||0}),h(a,()=>{var l;return((l=e.stats)==null?void 0:l.totalItems)||0}),t})()}var ma=C('<img class="w-full h-full object-cover transition-smooth group-hover/thumb:scale-105"loading=lazy>',!0,!1,!1),pa=C('<div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover/thumb:opacity-100 transition-smooth">'),ba=C("<div>"),va=C('<div class="absolute inset-0 flex items-center justify-center text-gray-700">');function wa(e){const[t,n]=St(e,["src","alt","class","size"]),r={sm:"aspect-video w-24",md:"aspect-video w-full",lg:"aspect-video w-full max-w-2xl"}[t.size||"md"];return(()=>{var i=ba();return Bt(i,R({get class(){return`relative rounded-xl overflow-hidden bg-bg-surface-soft group/thumb ${r} ${t.class||""}`}},n),!1,!0),h(i,d(J,{get when(){return t.src},get fallback(){return(()=>{var s=va();return h(s,d(j,{name:"image",class:"w-8 h-8"})),s})()},get children(){return[(()=>{var s=ma();return Q(o=>{var a=t.src,l=t.alt||"Video thumbnail";return a!==o.e&&ke(s,"src",o.e=a),l!==o.t&&ke(s,"alt",o.t=l),o},{e:void 0,t:void 0}),s})(),pa()]}})),i})()}var xa=C('<div class="w-full py-16 flex flex-col items-center justify-center text-center gap-4 bg-black/20 rounded-2xl border border-dashed border-white/10"><img alt="Empty Library"class="w-24 h-24 opacity-20 grayscale brightness-50"><div class=space-y-1><p class="text-white/40 font-black uppercase tracking-widest text-xs">Nothing here yet!</p><p class="text-gray-600 font-bold text-[10px] uppercase tracking-tighter italic">Feed me URLs!'),$a=C('<div class=space-y-4><div class="flex items-center justify-between px-2"><div class="flex items-center gap-2"><h2 class="text-xl font-bold text-white">Recent Additions</h2></div><button class="text-xs font-bold text-accent-primary hover:text-white transition-colors flex items-center gap-1">See All</button></div><div class="relative group/carousel"><div class="flex gap-4 overflow-x-auto pb-4 pt-2 px-2 custom-scrollbar snap-x scroll-smooth">'),ka=C('<div class="flex-shrink-0 w-72 flex flex-col gap-3 p-4 rounded-2xl border border-white/5 bg-black/20 hover:border-accent-primary/40 hover:bg-black/40 transition-all group cursor-pointer snap-start"><div class="relative aspect-video rounded-xl overflow-hidden shadow-lg group-hover:scale-[1.02] transition-transform"><div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"><div class="w-10 h-10 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center text-white border border-white/30"></div></div><div class="absolute top-2 right-2 px-2 py-0.5 rounded-full bg-black/60 backdrop-blur-md border border-white/10 text-[9px] font-black uppercase tracking-widest text-white/90"></div></div><div class="min-w-0 space-y-1"><h4 class="font-bold text-white truncate text-sm leading-snug"></h4><div class="flex items-center justify-between gap-2"><p class="text-xs text-accent-primary/80 truncate font-semibold"></p><span class="text-[10px] text-gray-600 font-medium whitespace-nowrap">');function _a(e){return(()=>{var t=$a(),n=t.firstChild,r=n.firstChild;r.firstChild;var i=r.nextSibling;i.firstChild;var s=n.nextSibling,o=s.firstChild;return h(r,d(j,{name:"history",class:"w-4 h-4 text-accent-primary/60"}),null),i.$$click=()=>e.onTabChange("library"),h(i,d(j,{name:"chevron-right",class:"w-3 h-3"}),null),h(o,d(Re,{get each(){var a;return((a=e.stats)==null?void 0:a.recentItems)||[]},children:a=>(()=>{var l=ka(),c=l.firstChild,u=c.firstChild,f=u.firstChild,m=u.nextSibling,w=c.nextSibling,p=w.firstChild,$=p.nextSibling,M=$.firstChild,x=M.nextSibling;return l.$$click=()=>{var _;return(_=e.onPlay)==null?void 0:_.call(e,a)},h(c,d(wa,{get src(){return a.thumbnailUrl},get alt(){return a.title},size:"md",class:"w-full h-full"}),u),h(f,d(j,{name:"play",class:"w-5 h-5 fill-current"})),h(m,()=>a.type),h(p,()=>a.title),h(M,()=>a.creator),h(x,()=>a.date||"Just now"),l})()}),null),h(o,d(J,{get when(){var a,l;return!((l=(a=e.stats)==null?void 0:a.recentItems)!=null&&l.length)},get children(){var a=xa(),l=a.firstChild;return ke(l,"src",At),a}}),null),t})()}pe(["click"]);var Sa=C('<div class=space-y-1.5><label class="text-[10px] font-bold text-slate-500 uppercase tracking-wider">Download Type Detection</label><div class="flex gap-2"><button>Playlist</button><button>Large File'),Ca=C('<div class="px-5 pb-5 space-y-4 border-t border-white/5 pt-4"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-xs font-bold text-slate-400 uppercase tracking-wider">Auto / Smart Mode</span><div class="group relative"><div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block w-56 p-2 bg-slate-800 rounded-lg text-[10px] text-slate-300 shadow-xl z-10">Auto mode dynamically adjusts concurrency based on your CPU cores (<!>) and the download type.</div></div></div><button><span></span></button></div><div class=space-y-1.5><div class="flex items-center justify-between"><div class="flex items-center gap-1.5"><label class="text-[10px] font-bold text-slate-500 uppercase tracking-wider">Job Concurrency</label><div class="group relative"><div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block w-48 p-2 bg-slate-800 rounded-lg text-[10px] text-slate-300 shadow-xl z-10">Simultaneous post-processing tracks (CPU-bound). Higher values use more CPU.</div></div></div><span class="text-xs font-mono text-accent-primary font-bold"></span></div><input type=range min=1 step=1 class="w-full h-1 bg-white/10 rounded-full appearance-none cursor-pointer accent-accent-primary disabled:opacity-40"></div><div class=space-y-1.5><div class="flex items-center justify-between"><div class="flex items-center gap-1.5"><label class="text-[10px] font-bold text-slate-500 uppercase tracking-wider">Segment Concurrency</label><div class="group relative"><div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block w-48 p-2 bg-slate-800 rounded-lg text-[10px] text-slate-300 shadow-xl z-10">Parallel network stream downloads (I/O-bound). Higher values use more bandwidth.</div></div></div><span class="text-xs font-mono text-accent-primary font-bold"></span></div><input type=range min=1 step=1 class="w-full h-1 bg-white/10 rounded-full appearance-none cursor-pointer accent-accent-primary disabled:opacity-40"></div><div class="text-[10px] text-slate-600 text-center pt-1">Detected <!> CPU cores'),Aa=C('<div class="rounded-2xl border border-white/5 bg-black/20 overflow-hidden"><button class="w-full flex items-center justify-between px-5 py-3 text-sm font-bold text-slate-300 hover:text-white transition-colors"><span class="flex items-center gap-2">Advanced Concurrency');const Pa=async()=>{try{const e=await fetch("/api/system/info");if(!e.ok)throw new Error("Failed to fetch system info");return await e.json()}catch(e){return console.error("Failed to fetch system info:",e),{cpuCores:4}}},Tt=(e,t)=>t==="playlist"?{jobConcurrency:Math.max(1,e-1),segmentConcurrency:Math.max(1,Math.min(e,4))}:{jobConcurrency:1,segmentConcurrency:Math.max(1,Math.floor(e*1.5))};function Na(e){const[t]=St(e,["onSettingsChange"]),[n,r]=X(!1),[i,s]=X(!0),[o,a]=X(1),[l,c]=X(4),[u,f]=X("single"),[m]=Sn(Pa),w=()=>{var _;return((_=m())==null?void 0:_.cpuCores)??4},p=()=>i()?Tt(w(),u()).jobConcurrency:o(),$=()=>i()?Tt(w(),u()).segmentConcurrency:l(),M=()=>{const _=!i();if(s(_),_){const z=Tt(w(),u());a(z.jobConcurrency),c(z.segmentConcurrency)}x()},x=()=>{typeof t.onSettingsChange=="function"&&t.onSettingsChange({jobConcurrency:p(),segmentConcurrency:$(),autoMode:i()})};return(()=>{var _=Aa(),z=_.firstChild,I=z.firstChild,N=I.firstChild;return z.$$click=()=>r(!n()),h(I,d(j,{name:"settings",class:"w-4 h-4 text-accent-primary"}),N),h(z,d(j,{name:"chevron-down",get class(){return`w-4 h-4 transition-transform duration-200 ${n()?"rotate-180":""}`}}),null),h(_,d(J,{get when(){return n()},get children(){var U=Ca(),T=U.firstChild,E=T.firstChild,L=E.firstChild,v=L.nextSibling,A=v.firstChild,B=A.firstChild,W=B.nextSibling;W.nextSibling;var re=E.nextSibling,le=re.firstChild,be=T.nextSibling,_e=be.firstChild,Ue=_e.firstChild,Fe=Ue.firstChild,k=Fe.nextSibling,D=k.firstChild,F=Ue.nextSibling,q=_e.nextSibling,K=be.nextSibling,se=K.firstChild,ye=se.firstChild,ve=ye.firstChild,fe=ve.nextSibling,Se=fe.firstChild,ge=ye.nextSibling,Ce=se.nextSibling,De=K.nextSibling,y=De.firstChild,g=y.nextSibling;return g.nextSibling,h(v,d(j,{name:"info",class:"w-3.5 h-3.5 text-slate-500 cursor-help"}),A),h(A,w,W),re.$$click=M,h(U,d(J,{get when(){return i()},get children(){var b=Sa(),S=b.firstChild,V=S.nextSibling,H=V.firstChild,ee=H.nextSibling;return H.$$click=()=>{f("playlist"),x()},ee.$$click=()=>{f("single"),x()},Q(P=>{var te=`flex-1 px-3 py-1.5 rounded-lg text-xs font-bold transition-colors ${u()==="playlist"?"bg-accent-primary/20 text-accent-primary border border-accent-primary/30":"bg-white/5 text-slate-400 border border-white/5 hover:text-white"}`,me=`flex-1 px-3 py-1.5 rounded-lg text-xs font-bold transition-colors ${u()==="single"?"bg-accent-primary/20 text-accent-primary border border-accent-primary/30":"bg-white/5 text-slate-400 border border-white/5 hover:text-white"}`;return te!==P.e&&ie(H,P.e=te),me!==P.t&&ie(ee,P.t=me),P},{e:void 0,t:void 0}),b}}),be),h(k,d(j,{name:"info",class:"w-3 h-3 text-slate-600 cursor-help"}),D),h(F,p),q.$$input=b=>{a(parseInt(b.target.value)),x()},h(fe,d(j,{name:"info",class:"w-3 h-3 text-slate-600 cursor-help"}),Se),h(ge,$),Ce.$$input=b=>{c(parseInt(b.target.value)),x()},h(De,w,g),Q(b=>{var S=`relative w-10 h-5 rounded-full transition-colors duration-200 ${i()?"bg-emerald-500":"bg-slate-600"}`,V=`absolute top-0.5 left-0.5 w-4 h-4 rounded-full bg-white shadow transition-transform duration-200 ${i()?"translate-x-5":"translate-x-0"}`,H=Math.max(1,w()*2),ee=i(),P=Math.max(1,w()*3),te=i();return S!==b.e&&ie(re,b.e=S),V!==b.t&&ie(le,b.t=V),H!==b.a&&ke(q,"max",b.a=H),ee!==b.o&&(q.disabled=b.o=ee),P!==b.i&&ke(Ce,"max",b.i=P),te!==b.n&&(Ce.disabled=b.n=te),b},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),Q(()=>q.value=p()),Q(()=>Ce.value=$()),U}}),null),_})()}pe(["click","input"]);const Un={welcome:{id:"welcome",label:"Welcome",icon:"home",defaultW:16,defaultH:3,minW:6,minH:3},"quick-download":{id:"quick-download",label:"Quick Download",icon:"download-cloud",defaultW:8,defaultH:2,minW:6,minH:2},"active-downloads":{id:"active-downloads",label:"Active Downloads",icon:"download-cloud",defaultW:4,defaultH:4,minW:4,minH:3},"recent-activity":{id:"recent-activity",label:"Recent Activity",icon:"history",defaultW:12,defaultH:4,minW:6,minH:4},stats:{id:"stats",label:"Library Stats",icon:"bar-chart-2",defaultW:4,defaultH:3,minW:4,minH:3},concurrency:{id:"concurrency",label:"Concurrency",icon:"settings",defaultW:4,defaultH:4,minW:4,minH:2}},Et=[{id:"welcome",enabled:!0,x:0,y:0,width:16,height:3},{id:"quick-download",enabled:!0,x:0,y:3,width:8,height:2},{id:"active-downloads",enabled:!0,x:12,y:3,width:4,height:4},{id:"recent-activity",enabled:!0,x:0,y:5,width:12,height:4},{id:"stats",enabled:!0,x:12,y:7,width:4,height:3},{id:"concurrency",enabled:!1,x:8,y:3,width:4,height:2}],Ye=16,Ta=80,on=12;function Ea(e,t){return e.id===t.id?!1:e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function Ma(e,t,n,r=16){let i=0;for(;;){for(let s=0;s<=r-t;s++){const o={x:s,y:i,width:t,height:n,id:"__candidate__"};if(!e.find(l=>l.enabled&&Ea(o,l)))return{x:s,y:i}}if(i++,i>1e3)return{x:0,y:0}}}var La=C('<div><div class="p-6 border-b border-white/10 flex items-center justify-between"><h2 class="text-lg font-bold text-white">Add Widgets</h2><button class="p-2 rounded-lg hover:bg-white/10 text-gray-400 hover:text-white transition-colors"></button></div><div class="flex-1 overflow-y-auto p-6 space-y-4">'),Da=C('<div class="p-4 rounded-xl bg-white/5 border border-white/10 hover:border-accent-primary/50 transition-colors group"><div class="flex items-center gap-3 mb-3"><div class="p-2 rounded-lg bg-accent-primary/20 text-accent-primary"></div><div><div class="font-bold text-white"></div><div class="text-xs text-gray-400">x<!> units</div></div></div><button>');function Oa(e){return(()=>{var t=La(),n=t.firstChild,r=n.firstChild,i=r.nextSibling,s=n.nextSibling;return Ct(i,"click",e.onClose,!0),h(i,d(j,{name:"x",class:"w-5 h-5"})),h(s,d(Re,{get each(){return Object.values(Un)},children:o=>{const a=e.widgets.find(c=>c.id===o.id),l=a==null?void 0:a.enabled;return(()=>{var c=Da(),u=c.firstChild,f=u.firstChild,m=f.nextSibling,w=m.firstChild,p=w.nextSibling,$=p.firstChild,M=$.nextSibling;M.nextSibling;var x=u.nextSibling;return h(f,d(j,{get name(){return o.icon},class:"w-5 h-5"})),h(w,()=>o.label),h(p,()=>o.defaultW,$),h(p,()=>o.defaultH,M),x.$$click=()=>l?e.onRemove(o.id):e.onAdd(o.id),ie(x,`w-full py-2 rounded-lg text-sm font-bold transition-all ${l?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30"}`),h(x,l?"Remove Widget":"Add to Dashboard"),c})()}})),Q(()=>ie(t,`fixed inset-y-0 right-0 w-80 bg-surface-primary border-l border-white/10 shadow-2xl transform transition-transform duration-300 z-50 flex flex-col ${e.isOpen?"translate-x-0":"translate-x-full"}`)),t})()}pe(["click"]);var za=C('<button class="w-full flex items-center justify-center gap-2 py-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-xs font-bold text-gray-300 transition-colors">Save Current Layout'),ja=C('<div class="absolute top-full left-0 mt-2 w-64 bg-surface-primary border border-white/10 rounded-xl shadow-xl z-50 overflow-hidden"><div class="p-3 border-b border-white/10"></div><div class="max-h-60 overflow-y-auto p-2 space-y-1"></div><div class="p-2 border-t border-white/10 bg-black/20"><button class="w-full flex items-center gap-2 px-2 py-1.5 rounded-lg text-xs text-gray-500 hover:text-gray-300 hover:bg-white/5 transition-colors">Restore Factory Default'),Ra=C('<div class="fixed inset-0 z-40">'),Ia=C('<div class=relative><button class="flex items-center gap-2 px-3 py-2 rounded-xl border border-white/10 bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white transition-all text-xs font-bold"><span class="max-w-[100px] truncate">'),Ua=C('<form class="flex gap-2"><input type=text placeholder="Layout Name"class="flex-1 bg-black/20 border border-white/10 rounded-lg px-2 py-1 text-xs text-white focus:outline-none focus:border-accent-primary/50"autofocus><button type=submit class="p-1 rounded-lg bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30"></button><button type=button class="p-1 rounded-lg hover:bg-white/10 text-gray-400">'),Fa=C('<button class="p-1 rounded hover:bg-white/10 text-gray-500 hover:text-amber-400"title="Set as Startup Default">'),Wa=C('<button class="p-1 rounded hover:bg-white/10 text-gray-500 hover:text-red-400"title="Delete Layout">'),Ka=C('<div><button class="flex-1 text-left flex items-center gap-2 overflow-hidden"><span></span></button><div class="flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity">');function Ya(e){const[t,n]=X(!1),[r,i]=X(!1),[s,o]=X(""),a=l=>{l.preventDefault(),s().trim()&&(e.onSave(s().trim()),o(""),i(!1))};return(()=>{var l=Ia(),c=l.firstChild,u=c.firstChild;return c.$$click=()=>n(!t()),h(c,d(j,{name:"layout",class:"w-3.5 h-3.5"}),u),h(u,()=>e.activeLayoutName||"Layouts"),h(c,d(j,{name:"chevron-down",class:"w-3 h-3"}),null),h(l,d(J,{get when(){return t()},get children(){var f=ja(),m=f.firstChild,w=m.nextSibling,p=w.nextSibling,$=p.firstChild,M=$.firstChild;return h(m,d(J,{get when(){return!r()},get fallback(){return(()=>{var x=Ua(),_=x.firstChild,z=_.nextSibling,I=z.nextSibling;return x.addEventListener("submit",a),_.$$input=N=>o(N.target.value),h(z,d(j,{name:"check",class:"w-3.5 h-3.5"})),I.$$click=()=>i(!1),h(I,d(j,{name:"x",class:"w-3.5 h-3.5"})),Q(()=>_.value=s()),x})()},get children(){var x=za(),_=x.firstChild;return x.$$click=()=>i(!0),h(x,d(j,{name:"plus",class:"w-3.5 h-3.5"}),_),x}})),h(w,d(Re,{get each(){return e.layouts},children:x=>(()=>{var _=Ka(),z=_.firstChild,I=z.firstChild,N=z.nextSibling;return z.$$click=()=>{e.onLoad(x.id),n(!1)},h(I,()=>x.name),h(z,d(J,{get when(){return x.isPrimary},get children(){return d(j,{name:"star",class:"w-3 h-3 text-amber-400 fill-amber-400"})}}),null),h(N,d(J,{get when(){return!x.isFactory},get children(){return[(()=>{var U=Fa();return U.$$click=()=>e.onSetPrimary(x.id),h(U,d(j,{name:"star",class:"w-3 h-3"})),U})(),(()=>{var U=Wa();return U.$$click=()=>e.onDelete(x.id),h(U,d(j,{name:"trash-2",class:"w-3 h-3"})),U})()]}})),Q(U=>{var T=`group flex items-center justify-between p-2 rounded-lg transition-colors ${e.activeLayoutId===x.id?"bg-accent-primary/10":"hover:bg-white/5"}`,E=`text-xs font-medium truncate ${e.activeLayoutId===x.id?"text-accent-primary":"text-gray-300"}`;return T!==U.e&&ie(_,U.e=T),E!==U.t&&ie(I,U.t=E),U},{e:void 0,t:void 0}),_})()})),$.$$click=()=>{e.onLoad("default"),n(!1)},h($,d(j,{name:"refresh-cw",class:"w-3 h-3"}),M),f}}),null),h(l,d(J,{get when(){return t()},get children(){var f=Ra();return f.$$click=()=>n(!1),f}}),null),l})()}pe(["click","input"]);var qa=C('<div class="rounded-[2rem] border border-dashed border-white/10 bg-black/20 p-6 h-[148px] animate-pulse">'),Va=C("<div class=h-full>"),Ha=C('<button class="flex items-center gap-2 px-3 py-2 rounded-xl border border-white/10 bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white transition-all text-xs font-bold">Reset'),Mt=C('<div class="h-4 w-px bg-white/10 mx-1">'),Ba=C('<button class="p-2 rounded-xl border border-white/10 bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-all"title="Undo (Ctrl+Z)">'),Xa=C('<button class="p-2 rounded-xl border border-white/10 bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-all"title="Redo (Ctrl+Shift+Z)">'),Ga=C('<button title="Add Widgets">'),Ja=C('<div class="transition-smooth animate-in fade-in slide-in-from-right-4 duration-500 space-y-6"><div class="flex items-center justify-between px-2"><div class="flex items-center gap-2"><div></div><span class="text-xs font-black uppercase tracking-widest text-gray-500"></span></div><div class="flex items-center gap-2"><button>'),Qa=C("<div>");const Za=ot(()=>lt(()=>import("./assets/QuickDownload-Bvr-m2tr.js"),[])),Lt="ytdl-go:dashboard-layout:v3",eo="ytdl-go:dashboard-layout:v2",to="ytdl-go:dashboard-layout:v1";function no(e){let t;const[n,r]=X(!1),[i,s]=X(!1),[o,a]=X(!1),[l,c]=X([...Et]),[u,f]=X({version:3,activeLayoutId:"default",layouts:{default:{id:"default",name:"Default",widgets:[...Et],isFactory:!0}}}),[m,w]=X(null),[p,$]=X({width:0,height:Ta+on}),[M,x]=X([]),[_,z]=X([]),I=y=>{const g=M();g.length>=50&&g.shift(),x([...g,JSON.parse(JSON.stringify(y))]),z([])},N=()=>{const y=M();if(y.length===0)return;const g=y[y.length-1],b=y.slice(0,-1);z([..._(),JSON.parse(JSON.stringify(l()))]),x(b),c(g)},U=()=>{const y=_();if(y.length===0)return;const g=y[y.length-1],b=y.slice(0,-1);x([...M(),JSON.parse(JSON.stringify(l()))]),z(b),c(g)};et(()=>{const y=g=>{i()&&(g.ctrlKey||g.metaKey)&&g.key==="z"&&(g.preventDefault(),g.shiftKey?U():N())};window.addEventListener("keydown",y),Te(()=>window.removeEventListener("keydown",y))});const[T,E]=X({isDragging:!1,widgetId:null,startX:0,startY:0,originalX:0,originalY:0}),[L,v]=X({isResizing:!1,widgetId:null,direction:null,startX:0,startY:0,originalWidth:0,originalHeight:0,originalX:0,originalY:0,currentWidth:0,currentHeight:0,currentX:0,currentY:0});et(()=>{if(!t)return;const y=new ResizeObserver(g=>{for(const b of g){const V=(b.contentRect.width+on)/Ye;$(H=>({...H,width:V}))}});y.observe(t),Te(()=>y.disconnect())});const A=y=>{let b=0,S=0;return y.map(H=>{let ee=H.x,P=H.y;const te=H.span||H.width||1;return(ee===void 0||P===void 0)&&(b+te>4&&(b=0,S+=2),ee=b,P=S,b+=te,b>=4&&(b=0,S+=2)),{...H,x:ee,y:P,span:te}}).map(H=>({id:H.id,enabled:H.enabled!==!1,x:H.x*4,y:H.y,width:(H.span||1)*4,height:H.height||2}))};et(()=>{var g,b;if(typeof localStorage>"u"||typeof localStorage.getItem!="function")return;let y=localStorage.getItem(Lt);if(y)try{const S=JSON.parse(y);if(Array.isArray(S)||S.version===3&&Array.isArray((b=(g=S.layouts)==null?void 0:g.default)==null?void 0:b.widgets)){const V=Array.isArray(S)?S:S.layouts[S.activeLayoutId||"default"].widgets;c(V),setTimeout(()=>r(!0),0);return}}catch(S){console.warn("Failed to load v3 dashboard layout:",S)}if(y=localStorage.getItem(eo)||localStorage.getItem(to),y)try{const S=JSON.parse(y);if(Array.isArray(S)){const V=A(S);c(V);const H={version:3,activeLayoutId:"default",layouts:{default:{name:"Default",widgets:V,isFactory:!1}}};localStorage.setItem(Lt,JSON.stringify(V))}}catch(S){console.warn("Failed to load legacy dashboard layout:",S)}setTimeout(()=>r(!0),0)}),nt(()=>{const y=l();ue(n)&&typeof localStorage<"u"&&typeof localStorage.setItem=="function"&&localStorage.setItem(Lt,JSON.stringify(y))});const B=y=>{const g=crypto.randomUUID(),b={id:g,name:y,widgets:JSON.parse(JSON.stringify(l())),isFactory:!1};f(S=>({...S,activeLayoutId:g,layouts:{...S.layouts,[g]:b}})),c(b.widgets)},W=y=>{const g=u().layouts[y];g&&(I(l()),f(b=>({...b,activeLayoutId:y})),c(JSON.parse(JSON.stringify(g.widgets))))},re=y=>{if(y==="default")return;const g=u(),b={...g.layouts};delete b[y];let S=g.activeLayoutId;g.activeLayoutId===y&&(S="default",c(b.default.widgets)),f(V=>({...V,activeLayoutId:S,layouts:b}))},le=y=>{f(g=>{const b={};for(const S in g.layouts)b[S]={...g.layouts[S],isPrimary:S===y};return{...g,layouts:b}})},be=ae(()=>typeof e.libraryModel=="function"?e.libraryModel():e.libraryModel),_e=ae(()=>{var g,b,S,V,H;const y=be();return{totalItems:((g=y==null?void 0:y.items)==null?void 0:g.length)||0,totalCreators:(((b=y==null?void 0:y.artists)==null?void 0:b.length)||0)+(((S=y==null?void 0:y.videos)==null?void 0:S.length)||0)+(((V=y==null?void 0:y.podcasts)==null?void 0:V.length)||0),recentItems:((H=y==null?void 0:y.items)==null?void 0:H.slice(0,4))||[]}}),Ue=y=>{e.onDownload&&e.onDownload(y)},Fe=y=>{I(l());const g=Un[y];if(l().find(S=>S.id===y))c(S=>S.map(V=>V.id===y?{...V,enabled:!0}:V));else{const S=Ma(l(),g.defaultW,g.defaultH,Ye);c(V=>[...V,{id:y,enabled:!0,x:S.x,y:S.y,width:g.defaultW,height:g.defaultH}])}},k=y=>{I(l()),c(g=>g.map(b=>b.id===y?{...b,enabled:!1}:b))},D=()=>{c([...Et])},F=(y,g)=>{if(!i())return;const b=l().find(S=>S.id===y);b&&(document.addEventListener("mousemove",fe),document.addEventListener("mouseup",Se),document.body.style.userSelect="none",document.body.style.cursor="grabbing",E({isDragging:!0,widgetId:y,startX:g.clientX,startY:g.clientY,originalX:b.x,originalY:b.y,currentX:b.x,currentY:b.y}),g.preventDefault())},q=y=>{const g=T();if(!g.isDragging)return;const b=window.innerWidth/Ye,S=92,V=Math.round((y.clientX-g.startX)/b),H=Math.round((y.clientY-g.startY)/S),ee=l().find(Ge=>Ge.id===g.widgetId),P=(ee==null?void 0:ee.width)||1,te=Math.max(0,Math.min(Ye-P,g.originalX+V)),me=Math.max(0,g.originalY+H);E(Ge=>({...Ge,currentX:te,currentY:me}))},K=()=>{const y=T();y.isDragging&&(c(g=>g.map(b=>b.id===y.widgetId?{...b,x:y.currentX,y:y.currentY}:b)),E({isDragging:!1,widgetId:null,startX:0,startY:0,originalX:0,originalY:0,currentX:0,currentY:0}),L().isResizing||(document.removeEventListener("mousemove",fe),document.removeEventListener("mouseup",Se),document.body.style.userSelect="",document.body.style.cursor=""))},se=(y,g,b)=>{if(!i())return;const S=l().find(V=>V.id===y);S&&(document.addEventListener("mousemove",fe),document.addEventListener("mouseup",Se),document.body.style.userSelect="none",document.body.style.cursor=ge(g),v({isResizing:!0,widgetId:y,direction:g,startX:b.clientX,startY:b.clientY,originalWidth:S.width,originalHeight:S.height,originalX:S.x,originalY:S.y,currentWidth:S.width,currentHeight:S.height,currentX:S.x,currentY:S.y}),b.preventDefault())},ye=y=>{const g=L();if(!g.isResizing)return;const b=window.innerWidth/Ye,S=92,V=Math.round((y.clientX-g.startX)/b),H=Math.round((y.clientY-g.startY)/S);let ee=g.originalWidth,P=g.originalHeight,te=g.originalX,me=g.originalY;g.direction.includes("e")&&(ee=Math.max(1,Math.min(Ye-g.originalX,g.originalWidth+V))),g.direction.includes("w")&&(ee=Math.max(1,Math.min(g.originalX+g.originalWidth,g.originalWidth-V)),te=g.originalX+g.originalWidth-ee),g.direction.includes("s")&&(P=Math.max(1,g.originalHeight+H)),g.direction.includes("n")&&(P=Math.max(1,g.originalHeight-H),me=g.originalY+g.originalHeight-P),v(Ge=>({...Ge,currentWidth:ee,currentHeight:P,currentX:te,currentY:me}))},ve=()=>{const y=L();y.isResizing&&(c(g=>g.map(b=>b.id===y.widgetId?{...b,width:y.currentWidth,height:y.currentHeight,x:y.currentX,y:y.currentY}:b)),v({isResizing:!1,widgetId:null,direction:null,startX:0,startY:0,originalWidth:0,originalHeight:0,originalX:0,originalY:0,currentWidth:0,currentHeight:0,currentX:0,currentY:0}),T().isDragging||(document.removeEventListener("mousemove",fe),document.removeEventListener("mouseup",Se),document.body.style.userSelect="",document.body.style.cursor=""))},fe=y=>{q(y),ye(y)},Se=()=>{K(),ve()},ge=y=>({n:"ns-resize",s:"ns-resize",e:"ew-resize",w:"ew-resize",ne:"nesw-resize",sw:"nesw-resize",nw:"nwse-resize",se:"nwse-resize"})[y]||"nwse-resize";Te(()=>{document.removeEventListener("mousemove",fe),document.removeEventListener("mouseup",Se),document.body.style.userSelect="",document.body.style.cursor=""});const Ce=y=>{switch(y.id){case"welcome":return d(ha,{get stats(){return _e()},get onTabChange(){return e.onTabChange}});case"quick-download":return d(Wt,{get fallback(){return qa()},get children(){return d(Za,{onDownload:Ue,get onTabChange(){return e.onTabChange}})}});case"active-downloads":return(()=>{var g=Va();return h(g,d(Xs,{})),g})();case"recent-activity":return d(_a,{get stats(){return _e()},get onTabChange(){return e.onTabChange},get onPlay(){return e.onPlay}});case"stats":return d(ga,{get stats(){return _e()}});case"concurrency":return d(Na,{});default:return null}},De=ae(()=>{let y=0;return l().forEach(g=>{g.enabled&&(y=Math.max(y,g.y+g.height))}),Math.max(y,6)});return(()=>{var y=Ja(),g=y.firstChild,b=g.firstChild,S=b.firstChild,V=S.nextSibling,H=b.nextSibling,ee=H.firstChild;return h(V,()=>i()?"Dashboard: Edit Mode":"Dashboard"),h(H,d(J,{get when(){return i()},get children(){return[(()=>{var P=Ha(),te=P.firstChild;return P.$$click=D,h(P,d(j,{name:"refresh-cw",class:"w-3.5 h-3.5"}),te),P})(),Mt(),(()=>{var P=Ba();return P.$$click=N,h(P,d(j,{name:"rotate-ccw",class:"w-3.5 h-3.5"})),Q(()=>P.disabled=M().length===0),P})(),(()=>{var P=Xa();return P.$$click=U,h(P,d(j,{name:"rotate-cw",class:"w-3.5 h-3.5"})),Q(()=>P.disabled=_().length===0),P})(),Mt(),d(Ya,{get activeLayoutId(){return u().activeLayoutId},get activeLayoutName(){var P;return(P=u().layouts[u().activeLayoutId])==null?void 0:P.name},get layouts(){return Object.values(u().layouts)},onSave:B,onLoad:W,onDelete:re,onSetPrimary:le}),Mt(),(()=>{var P=Ga();return P.$$click=()=>a(!o()),h(P,d(j,{name:"plus",class:"w-3.5 h-3.5"})),Q(()=>ie(P,`p-2 rounded-xl border transition-all ${o()?"bg-accent-primary/20 border-accent-primary/30 text-accent-primary":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10 hover:text-white"}`)),P})()]}}),ee),ee.$$click=()=>s(!i()),h(ee,d(j,{get name(){return i()?"check":"pencil"},class:"w-3.5 h-3.5"}),null),h(ee,()=>i()?"Done":"Edit Layout",null),h(y,d(da,{get isEditMode(){return i()},get totalRows(){return De()},get ghost(){return m()},ref:P=>t=P,get children(){return d(Re,{get each(){return l()},children:P=>d(J,{get when(){return P.enabled||i()},get children(){return d(ua,{get x(){return P.x},get y(){return P.y},get width(){return P.width},get height(){return P.height},get widgetId(){return P.id},get isEditMode(){return i()},onResizeStart:se,get class(){return`relative group/widget transition-all duration-500 ${i()?"scale-[0.98] ring-2 ring-dashed ring-white/10 rounded-[2.2rem] p-1":""} ${T().isDragging&&T().widgetId===P.id?"opacity-0":""} ${L().isResizing&&L().widgetId===P.id?"opacity-0":""}`},get children(){var te=Qa();return te.$$mousedown=me=>F(P.id,me),h(te,()=>Ce(P)),Q(()=>ie(te,`${i()&&!P.enabled?"opacity-30":""} h-full ${i()?"cursor-move":""}`)),te}})}})})}}),null),h(y,d(J,{get when(){return i()},get children(){return d(Oa,{get isOpen(){return o()},onClose:()=>a(!1),get widgets(){return l()},onAdd:Fe,onRemove:k})}}),null),Q(P=>{var te=`w-2 h-2 rounded-full ${i()?"bg-amber-500 animate-pulse":"bg-accent-primary"}`,me=`flex items-center gap-2 px-4 py-2 rounded-xl border transition-all duration-300 text-xs font-bold ${i()?"bg-amber-500/20 border-amber-500/30 text-amber-400":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10 hover:text-white"}`;return te!==P.e&&ie(S,P.e=te),me!==P.t&&ie(ee,P.t=me),P},{e:void 0,t:void 0}),y})()}pe(["click","mousedown"]);var ro=C('<aside class="w-72 bg-bg-surface/85 border-r border-white/10 flex flex-col p-6 backdrop-blur-xl transition-all duration-300"><div class="flex items-center gap-3 mb-10 px-2"><div class="w-10 h-10 bg-accent-primary/10 rounded-2xl flex items-center justify-center shadow-lg shadow-accent-primary/5 overflow-hidden border border-accent-primary/20"><img alt="ytdl-go logo"class="w-8 h-8 object-contain brightness-0 invert opacity-80"></div><span class="text-xl font-black tracking-tight text-transparent bg-clip-text bg-vibrant-gradient">ytdl-go</span></div><nav class="flex-1 space-y-2"><button><span class="font-bold text-sm">Dashboard</span></button><div class="pt-4 pb-2 px-4 text-xs font-bold text-gray-600 uppercase tracking-widest">Media</div><button><span class="font-bold text-sm">New Download</span></button><button><span class="font-bold text-sm">Library</span></button><div class="pt-4 pb-2 px-4 text-xs font-bold text-gray-600 uppercase tracking-widest">System</div><button><span class="font-bold text-sm">Settings</span></button></nav><div class="mt-auto relative has-tooltip"><span class="tooltip bg-bg-surface-soft text-[10px] px-2 py-1 rounded shadow-xl mb-4 border border-white/10 w-56 text-center leading-relaxed">Coming Soon: extension provider management and health status.</span><button type=button disabled aria-disabled=true aria-label="Extensions panel (Coming Soon)"class="w-full p-4 bg-white/5 rounded-2xl border border-white/5 opacity-70 cursor-not-allowed text-left hover:bg-white/10 transition-colors"><div class="flex items-center gap-2 mb-2 text-xs font-bold text-gray-500 uppercase tracking-widest">Extensions</div><div class="flex items-center justify-between text-xs"><span class=text-gray-500>PO Token Provider</span><span class="px-2 py-0.5 bg-white/10 text-gray-500 rounded-full font-bold border border-white/10">Coming Soon');function io(e){const t=()=>e.activeTab;return(()=>{var n=ro(),r=n.firstChild,i=r.firstChild,s=i.firstChild,o=r.nextSibling,a=o.firstChild,l=a.firstChild,c=a.nextSibling,u=c.nextSibling,f=u.firstChild,m=u.nextSibling,w=m.firstChild,p=m.nextSibling,$=p.nextSibling,M=$.firstChild,x=o.nextSibling,_=x.firstChild,z=_.nextSibling,I=z.firstChild,N=I.firstChild;return ke(s,"src",At),a.$$click=()=>e.onTabChange("dashboard"),h(a,d(j,{name:"layout-dashboard",class:"w-5 h-5"}),l),u.$$click=()=>e.onTabChange("download"),h(u,d(j,{name:"plus-circle",class:"w-5 h-5"}),f),m.$$click=()=>e.onTabChange("library"),h(m,d(j,{name:"layers",class:"w-5 h-5"}),w),$.$$click=()=>e.onTabChange("settings"),h($,d(j,{name:"sliders",class:"w-5 h-5"}),M),h(I,d(j,{name:"puzzle",class:"w-3 h-3"}),N),Q(U=>{var T=`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${t()==="dashboard"?"bg-accent-primary/10 text-accent-secondary shadow-sm shadow-accent-primary/5":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,E=`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${t()==="download"?"bg-accent-primary/10 text-accent-secondary shadow-sm shadow-accent-primary/5":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,L=`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${t()==="library"?"bg-accent-primary/10 text-accent-secondary shadow-sm shadow-accent-primary/5":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,v=`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${t()==="settings"?"bg-accent-primary/10 text-accent-secondary shadow-sm shadow-accent-primary/5":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`;return T!==U.e&&ie(a,U.e=T),E!==U.t&&ie(u,U.t=E),L!==U.a&&ie(m,U.a=L),v!==U.o&&ie($,U.o=v),U},{e:void 0,t:void 0,a:void 0,o:void 0}),n})()}pe(["click"]);var so=C('<header class="h-24 px-10 flex items-center justify-between border-b border-white/5 bg-transparent backdrop-blur-sm z-20"><div class="flex items-center gap-4"><h2 class="text-2xl font-black text-white tracking-tighter uppercase leading-none"></h2><div class="h-4 w-px bg-white/10 mx-2"></div><div class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20"><div class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></div><span class="text-[10px] font-bold text-emerald-400 uppercase tracking-widest">YT_AUTH_OK</span></div></div><div class="flex items-center gap-3"><button><span class="text-[10px] font-bold uppercase tracking-widest">Advanced Mode</span></button><div class="w-10 h-10 rounded-2xl bg-gradient-to-br from-gray-800 to-gray-900 border border-white/10 flex items-center justify-center shadow-inner group cursor-pointer hover:border-accent-primary/50 transition-colors">');function ao(e){const t=()=>e.isAdvanced,n=()=>{switch(e.activeTab){case"dashboard":return"Dashboard";case"download":return"New Download";case"library":return"Media Library";case"settings":return"Settings";default:return"ytdl-go"}};return(()=>{var r=so(),i=r.firstChild,s=i.firstChild,o=i.nextSibling,a=o.firstChild,l=a.firstChild,c=a.nextSibling;return h(s,n),Ct(a,"click",e.onToggleAdvanced,!0),h(a,d(j,{name:"settings-2",get class(){return`w-3.5 h-3.5 ${t()?"animate-pulse-slow":""}`}}),l),h(c,d(j,{name:"user",class:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})),Q(()=>ie(a,`flex items-center gap-2 px-4 py-2 rounded-xl border transition-all duration-300 ${t()?"bg-accent-primary/20 border-accent-primary/30 text-accent-secondary shadow-lg shadow-accent-primary/10":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`)),r})()}pe(["click"]);var oo=C('<div class="text-[11px] text-gray-600 mt-2 break-all">'),lo=C('<div class="p-3 rounded-xl bg-red-500/10 border border-red-500/20 text-red-400 text-xs">'),co=C('<div class="fixed inset-0 z-50 bg-[#05070a]/80 backdrop-blur-sm flex items-center justify-center p-4"><div class="w-full max-w-2xl rounded-3xl border border-white/10 bg-[#0a0c14] shadow-2xl p-8 space-y-6 animate-in fade-in zoom-in-95 duration-300"><div class="flex items-center gap-3"><div class="p-2 rounded-xl bg-amber-500/10 text-amber-400"></div><div><div class="font-bold text-white text-xl">Duplicate File Detected</div><div class="text-xs text-gray-500">Choose how to handle this file.</div></div></div><div class="p-4 rounded-2xl border border-white/10 bg-[#05070a]"><div class="text-xs text-gray-500 mb-1">Filename</div><div class="text-sm text-white font-mono break-all"></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-3">'),uo=C('<button class="text-left p-4 rounded-2xl border border-white/10 bg-white/5 hover:border-blue-500/40 hover:bg-blue-500/10 transition-all"><div class="flex items-center justify-between"><span class="font-bold text-white text-sm"></span><span class="text-[10px] px-2 py-0.5 rounded-full bg-white/10 text-gray-400 font-mono"></span></div><div class="text-xs text-gray-500 mt-1">');const fo=[{value:"overwrite",label:"Overwrite",hint:"Replace this file",key:"o"},{value:"overwrite_all",label:"Overwrite All",hint:"Replace all duplicates in this job",key:"O"},{value:"skip",label:"Skip",hint:"Skip this file",key:"s"},{value:"skip_all",label:"Skip All",hint:"Skip all duplicates in this job",key:"S"},{value:"rename",label:"Rename",hint:"Save as next available filename",key:"r"},{value:"rename_all",label:"Rename All",hint:"Rename all duplicates in this job",key:"R"},{value:"cancel",label:"Cancel",hint:"Abort this item",key:"q"}];function ho(e){return(()=>{var t=co(),n=t.firstChild,r=n.firstChild,i=r.firstChild,s=r.nextSibling,o=s.firstChild,a=o.nextSibling,l=s.nextSibling;return h(i,d(j,{name:"alert-circle",class:"w-5 h-5"})),h(a,()=>{var c;return((c=e.prompt)==null?void 0:c.filename)||"Unknown file"}),h(s,d(J,{get when(){var c;return(c=e.prompt)==null?void 0:c.path},get children(){var c=oo();return h(c,()=>e.prompt.path),c}}),null),h(n,d(J,{get when(){return e.error},get children(){var c=lo();return h(c,()=>e.error),c}}),l),h(l,d(Re,{each:fo,children:c=>(()=>{var u=uo(),f=u.firstChild,m=f.firstChild,w=m.nextSibling,p=f.nextSibling;return u.$$click=()=>{var $;return($=e.onSelect)==null?void 0:$.call(e,c.value)},h(m,()=>c.label),h(w,()=>c.key),h(p,()=>c.hint),u})()})),t})()}pe(["click"]);const Fn="ytdl-go:app-state:v1",yo=new Set(["download","library","settings"]),go=new Set(["prompt","overwrite","skip","rename"]),mo=new Set(["artists","channels","playlists","all_media"]),po=new Set(["gallery","list","detail"]),ln=new Set(["all","audio","video"]),bo=new Set(["newest","oldest","creator_asc","creator_desc","collection_asc","collection_desc","playlist_asc","playlist_desc"]),vo=80,wo=32,xo=1440*60,we={output:"{title}.{ext}",quality:"best",jobs:1,timeout:180,format:"",audioOnly:!1,onDuplicate:"prompt",useCookies:!0,poTokenExtension:!1},$o={creatorType:"",creatorName:"",albumName:"",playlistKey:"",playlistKind:""},ko={query:"",creator:"",collection:"",playlist:"",savedPlaylistId:""},_o=()=>({ui:{activeTab:"dashboard",isAdvanced:!1},settings:{...we},library:{downloads:[],section:"artists",viewMode:"gallery",typeFilter:"all",navPath:{...$o},filters:{...ko},sortKey:"newest",savedPlaylists:[],playlistAssignments:{},ui:{advancedFiltersOpen:!1,metadataBannerDismissed:!1}},player:{active:!1,selectedMedia:null,minimized:!1},download:{urlInput:"",isDownloading:!1,jobStatus:null,progressTasks:{},logMessages:[],duplicateQueue:[],duplicateError:""}}),Wn=Vt();let cn=!1;const So=e=>({ui:{activeTab:e.ui.activeTab,isAdvanced:e.ui.isAdvanced},settings:{...e.settings},library:{section:e.library.section,viewMode:e.library.viewMode,typeFilter:e.library.typeFilter,navPath:{...e.library.navPath},filters:{query:e.library.filters.query,creator:e.library.filters.creator,collection:e.library.filters.collection,playlist:e.library.filters.playlist,savedPlaylistId:e.library.filters.savedPlaylistId},sortKey:e.library.sortKey,savedPlaylists:e.library.savedPlaylists,playlistAssignments:e.library.playlistAssignments,ui:{advancedFiltersOpen:e.library.ui.advancedFiltersOpen,metadataBannerDismissed:e.library.ui.metadataBannerDismissed}},download:{urlInput:e.download.urlInput,activeJobId:e.download.activeJobId}}),ne=(e,t)=>typeof e=="string"?e:t,tt=(e,t)=>typeof e=="boolean"?e:t,Co=e=>ne(e,"").trim().replace(/\s+/g," ").slice(0,vo),dn=(e,t,n)=>{const r=typeof e=="number"?e:Number(e);if(!Number.isFinite(r))return t;const i=Math.trunc(r);return i<=0?t:Math.min(i,n)},Ao=e=>{const t=e&&typeof e=="object"?e:{},n=ne(t.onDuplicate,we.onDuplicate);return{output:ne(t.output,we.output),quality:ne(t.quality,we.quality),jobs:dn(t.jobs,we.jobs,wo),timeout:dn(t.timeout,we.timeout,xo),format:ne(t.format,we.format),audioOnly:tt(t.audioOnly,we.audioOnly),onDuplicate:go.has(n)?n:we.onDuplicate,useCookies:tt(t.useCookies,we.useCookies),poTokenExtension:tt(t.poTokenExtension,we.poTokenExtension)}},Po=(e,t=new Set)=>{const n=e&&typeof e=="object"?e:{},r=ne(n.savedPlaylistId,"").trim();return{query:ne(n.query,""),creator:ne(n.creator,""),collection:ne(n.collection,""),playlist:ne(n.playlist,""),savedPlaylistId:t.has(r)?r:""}},No=e=>{if(!Array.isArray(e))return[];const t=new Set,n=[];for(const r of e){const i=r&&typeof r=="object"?r:{},s=ne(i.id,"").trim(),o=Co(i.name);s===""||o===""||t.has(s)||(t.add(s),n.push({id:s,name:o,createdAt:ne(i.createdAt,""),updatedAt:ne(i.updatedAt,"")}))}return n},To=(e,t)=>{const n=e&&typeof e=="object"?e:{},r={};for(const[i,s]of Object.entries(n)){const o=String(i||"").trim(),a=ne(s,"").trim();o===""||a===""||!t.has(a)||(r[o]=a)}return r},Eo=e=>{const t=e&&typeof e=="object"?e:{},n=ne(t.creatorType,"").trim().toLowerCase(),r=ne(t.playlistKind,"").trim().toLowerCase();return{creatorType:n==="artist"||n==="channel"?n:"",creatorName:ne(t.creatorName,""),albumName:ne(t.albumName,""),playlistKey:ne(t.playlistKey,""),playlistKind:r==="source"||r==="saved"?r:""}},Mo=e=>{const t=e&&typeof e=="object"?e:{};return{advancedFiltersOpen:tt(t.advancedFiltersOpen,!1),metadataBannerDismissed:tt(t.metadataBannerDismissed,!1)}},Lo=e=>{const t=e&&typeof e=="object"?e:{},n=ne(t.section,"artists"),r=ne(t.viewMode,"gallery"),i=ne(t.sortKey,"newest"),s=No(t.savedPlaylists),o=new Set(s.map(u=>u.id)),a=ne(t.typeFilter,"").trim().toLowerCase(),l=ne(t.activeMediaType,"").trim().toLowerCase();let c="all";return ln.has(a)?c=a:ln.has(l)&&(c=l),{section:mo.has(n)?n:"artists",viewMode:po.has(r)?r:"gallery",typeFilter:c,navPath:Eo(t.navPath),filters:Po(t.filters,o),sortKey:bo.has(i)?i:"newest",savedPlaylists:s,playlistAssignments:To(t.playlistAssignments,o),ui:Mo(t.ui)}},Do=()=>{if(typeof window>"u")return null;try{const e=window.localStorage.getItem(Fn);return e?JSON.parse(e):null}catch(e){return cn||(console.warn("Failed to read persisted app state from localStorage:",e),cn=!0),null}},Oo=()=>{var l,c,u,f;const e=_o(),t=Do();if(!t||typeof t!="object")return e;const n=yo.has((l=t==null?void 0:t.ui)==null?void 0:l.activeTab)?t.ui.activeTab:e.ui.activeTab,r=typeof((c=t==null?void 0:t.ui)==null?void 0:c.isAdvanced)=="boolean"?t.ui.isAdvanced:e.ui.isAdvanced,i=Ao(t.settings),s=Lo(t.library),o=typeof((u=t==null?void 0:t.download)==null?void 0:u.urlInput)=="string"?t.download.urlInput:e.download.urlInput,a=typeof((f=t==null?void 0:t.download)==null?void 0:f.activeJobId)=="string"?t.download.activeJobId:"";return{...e,ui:{activeTab:n,isAdvanced:r},settings:{...i},library:{...e.library,section:s.section,viewMode:s.viewMode,typeFilter:s.typeFilter,navPath:s.navPath,filters:s.filters,sortKey:s.sortKey,savedPlaylists:s.savedPlaylists,playlistAssignments:s.playlistAssignments,ui:s.ui},download:{...e.download,urlInput:o,activeJobId:a}}};function zo(e){const[t,n]=In(Oo());let r=!1;return nt(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(Fn,JSON.stringify(So(t))),r=!1}catch(i){r||(console.warn("Failed to persist app state to localStorage:",i),r=!0)}}),d(Wn.Provider,{value:{state:t,setState:n},get children(){return e.children}})}function Xt(){const e=kt(Wn);if(!e)throw new Error("useAppStore must be used within an AppStoreProvider");return e}const jo=new Set(["queued","running","reconnecting","complete","error"]),Gt=e=>{if(typeof e!="string")return"";const t=e.trim().toLowerCase();return t==="done"?"complete":jo.has(t)?t:""},Ro=/\.(mp3|wav|ogg|flac|m4a|opus|aac|alac|wma|aiff|aif|ape|dsf|dff|mka)$/i,Io=/\.(mp4|webm|mov|avi|mkv|m4v|wmv|mpeg|mpg|ts|ogv|3gp|f4v|flv|vob|m2ts)$/i,Uo=e=>Ro.test(String(e||"")),Fo=e=>Io.test(String(e||"")),Wo=e=>{const t=String(e||"").trim().toLowerCase();return t==="audio"?"audio":t==="video"?"video":"unknown"},Ko=e=>{const t=String((e==null?void 0:e.filename)||"").trim();if(t!==""){if(Uo(t))return"audio";if(Fo(t))return"video"}return Wo(e==null?void 0:e.type)},Yo=80,un="/api/library/playlists",qo="/api/library/playlists/migrate",fn="ytdl-go:saved-playlists:backend-migration:v1",qt=e=>String(e||"").trim().replace(/\s+/g," ").slice(0,Yo),qe=e=>String(e||"").trim(),Kn=e=>String(e||"").trim(),Vo=e=>{const t=e&&typeof e=="object"?e:{},n=qe(t.id),r=qt(t.name);return n===""||r===""?null:{id:n,name:r,createdAt:typeof t.createdAt=="string"?t.createdAt.trim():"",updatedAt:typeof t.updatedAt=="string"?t.updatedAt.trim():""}},Ho=e=>{if(!Array.isArray(e))return[];const t=[],n=new Set,r=new Set;for(const i of e){const s=Vo(i);if(!s||n.has(s.id))continue;const o=s.name.toLowerCase();r.has(o)||(n.add(s.id),r.add(o),t.push(s))}return t},Bo=(e,t)=>{const n=e&&typeof e=="object"?e:{},r={};for(const[i,s]of Object.entries(n)){const o=Kn(i),a=qe(s);o===""||a===""||!t.has(a)||(r[o]=a)}return r},Oe=e=>{const t=e&&typeof e=="object"?e:{},n=Ho(t.playlists),r=new Set(n.map(i=>i.id));return{playlists:n,assignments:Bo(t.assignments,r)}},Dt=e=>Array.isArray(e==null?void 0:e.playlists)&&e.playlists.length>0||(e==null?void 0:e.assignments)&&typeof e.assignments=="object"&&Object.keys(e.assignments).length>0,hn=(e,t,n="")=>e.some(r=>r.id!==n&&r.name.localeCompare(t,void 0,{sensitivity:"base"})===0),Xo=()=>typeof globalThis<"u"&&globalThis.crypto&&typeof globalThis.crypto.randomUUID=="function"?globalThis.crypto.randomUUID():`saved-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,Ot=async(e,t)=>{try{const n=await e.json();if(n&&typeof n.error=="string"&&n.error.trim()!=="")return n.error.trim()}catch{}return t},Je=e=>e&&typeof e=="object"&&e.name==="AbortError";function Go(){const{state:e,setState:t}=Xt(),[n,r]=X("");let i=null,s=null,o=0,a=Promise.resolve(),l=!1;const c=()=>Oe({playlists:e.library.savedPlaylists,assignments:e.library.playlistAssignments}),u=T=>{const E=Oe(T),L=new Set(E.playlists.map(v=>v.id));t("library","savedPlaylists",E.playlists),t("library","playlistAssignments",E.assignments),t("library","filters","savedPlaylistId",v=>L.has(qe(v))?v:"")},f=async T=>{const E=await fetch(un,{signal:T});if(!E.ok)throw new Error(await Ot(E,"Unable to load saved playlists from backend."));const L=await E.json();return Oe(L)},m=async(T,E)=>{const L=Oe(T),v=await fetch(un,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L),signal:E});if(!v.ok)throw new Error(await Ot(v,"Unable to persist saved playlists."));const A=await v.json();return Oe(A)},w=async(T,E)=>{const L=Oe(T),v=await fetch(qo,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L),signal:E});if(!v.ok)throw new Error(await Ot(v,"Unable to migrate saved playlists."));const A=await v.json();return{state:Oe(A),migrated:!!(A&&A.migrated)}},p=async T=>{o+=1;const E=o;s&&s.abort();const L=new AbortController;s=L;try{const v=await m(T,L.signal);return!l&&E===o&&(u(v),r("")),v}finally{s===L&&(s=null)}},$=T=>{const E=a.then(T,T);return a=E.catch(()=>{}),E},M=()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem(fn)==="1"}catch{return!1}},x=()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(fn,"1")}catch{}},_=async()=>{i&&i.abort();const T=new AbortController;i=T;const E=o,L=c();try{const v=await f(T.signal);if(l||T.signal.aborted||o!==E)return;if(u(v),r(""),Dt(v)){x();return}if(!Dt(L)){M()||x();return}const A=await w(L,T.signal);if(l||T.signal.aborted||o!==E)return;u(A.state),(A.migrated||Dt(A.state))&&x()}catch(v){if(Je(v)||T.signal&&T.signal.aborted)return;const A=v instanceof Error?v.message:"Failed to initialize saved playlists.";r(A),console.error("Failed to initialize saved playlists:",v)}finally{i===T&&(i=null)}},z=T=>$(async()=>{const E=qt(T);if(E==="")return{ok:!1,error:"Playlist name is required."};const L=c();if(hn(L.playlists,E))return{ok:!1,error:"A playlist with that name already exists."};const v=new Date().toISOString(),A={id:Xo(),name:E,createdAt:v,updatedAt:v};try{const W=(await p({playlists:[...L.playlists,A],assignments:L.assignments})).playlists.find(re=>re.id===A.id);return W?{ok:!0,playlist:W}:{ok:!1,error:"A playlist with that name already exists."}}catch(B){return Je(B)?{ok:!1,error:"Request canceled."}:{ok:!1,error:B instanceof Error?B.message:"Unable to create saved playlist."}}}),I=(T,E)=>$(async()=>{const L=qe(T),v=qt(E);if(L==="")return{ok:!1,error:"Playlist not found."};if(v==="")return{ok:!1,error:"Playlist name is required."};const A=c();if(!A.playlists.some(le=>le.id===L))return{ok:!1,error:"Playlist not found."};if(hn(A.playlists,v,L))return{ok:!1,error:"A playlist with that name already exists."};const W=new Date().toISOString(),re=A.playlists.map(le=>le.id===L?{...le,name:v,updatedAt:W}:le);try{const be=(await p({playlists:re,assignments:A.assignments})).playlists.find(_e=>_e.id===L);return be?be.name.localeCompare(v,void 0,{sensitivity:"base"})!==0?{ok:!1,error:"A playlist with that name already exists."}:{ok:!0}:{ok:!1,error:"Playlist not found."}}catch(le){return Je(le)?{ok:!1,error:"Request canceled."}:{ok:!1,error:le instanceof Error?le.message:"Unable to rename saved playlist."}}}),N=T=>$(async()=>{const E=qe(T);if(E==="")return{ok:!1,error:"Playlist not found."};const L=c(),v=L.playlists.filter(B=>B.id!==E);if(v.length===L.playlists.length)return{ok:!1,error:"Playlist not found."};const A={};for(const[B,W]of Object.entries(L.assignments))W!==E&&(A[B]=W);try{return await p({playlists:v,assignments:A}),{ok:!0}}catch(B){return Je(B)?{ok:!1,error:"Request canceled."}:{ok:!1,error:B instanceof Error?B.message:"Unable to delete saved playlist."}}}),U=(T,E)=>$(async()=>{const L=Kn(T),v=qe(E);if(L==="")return;const A=c();if(!(v===""||A.playlists.some(re=>re.id===v)))return;const W={...A.assignments};if(v===""){if(!(L in W))return;delete W[L]}else{if(W[L]===v)return;W[L]=v}try{await p({playlists:A.playlists,assignments:W})}catch(re){if(Je(re))return;console.error("Failed to assign saved playlist:",re)}});return Te(()=>{l=!0,i&&i.abort(),s&&s.abort()}),{initError:n,initialize:_,createPlaylist:z,renamePlaylist:I,deletePlaylist:N,assignPlaylist:U}}class Jo{constructor(){this.socket=null,this.reconnectInterval=3e3,this.shouldReconnect=!0,this.listeners=new Set}addListener(t){return this.listeners.add(t),()=>this.listeners.delete(t)}connect(){if(this.socket&&(this.socket.readyState===WebSocket.OPEN||this.socket.readyState===WebSocket.CONNECTING))return;const t=window.location.protocol==="https:"?"wss:":"ws:",n=window.location.host,r=`${t}//${n}/ws`;this.socket=new WebSocket(r),this.socket.onopen=()=>{console.log("WebSocket connected")},this.socket.onmessage=i=>{try{const s=JSON.parse(i.data);this.dispatch(s)}catch(s){console.error("Failed to parse WebSocket message:",s)}},this.socket.onclose=()=>{console.log("WebSocket disconnected"),this.shouldReconnect&&setTimeout(()=>{console.log("Reconnecting..."),this.connect()},this.reconnectInterval)},this.socket.onerror=i=>{console.error("WebSocket error:",i),this.socket.close()}}dispatch(t){const{type:n,payload:r}=t;switch(n){case"progress":Fs(r);break;case"error":Ws(r);break}this.listeners.forEach(i=>{try{i(t)}catch(s){console.error("Error in WebSocket listener:",s)}})}close(){this.shouldReconnect=!1,this.socket&&this.socket.close()}}const Yn=new Jo,zt=80,Qo=new Set(["debug","info","warn","error"]),Zo=e=>{switch(e){case"queued":return"Waiting for a worker to start the job.";case"running":return"Download in progress...";case"reconnecting":return"Reconnecting to the progress stream...";case"complete":return"All downloads in this job are finished.";case"error":return"Download failed.";default:return""}},ze=(e,t=0)=>{const n=typeof e=="number"?e:Number(e);return Number.isFinite(n)?Math.max(0,Math.trunc(n)):t},yn=e=>{const t=typeof e=="number"?e:Number(e);return!Number.isFinite(t)||t<0?0:t>100?100:t},gn=e=>{if(!e||typeof e!="object")return null;const t={total:ze(e.total,0),succeeded:ze(e.succeeded,0),failed:ze(e.failed,0)};return t.total<=0&&t.succeeded<=0&&t.failed<=0?null:t},mn=(e,t,n)=>{const r=typeof t=="string"?t.trim():"";if(r!==""&&r!==e)return r;if(e==="error"){const i=typeof n=="string"?n.trim():"";if(i)return i}return Zo(e)},pn=e=>{if(typeof e!="string")return"info";const t=e.trim().toLowerCase();return Qo.has(t)?t:"info"},bn=Gt,el=e=>{var r;const t=e.status==="complete"?"Download Complete":"Download Failed",n=e.status==="complete"?`Successfully downloaded ${((r=e.stats)==null?void 0:r.succeeded)||0} items.`:e.error||e.message||"An error occurred during download.";oe("notification",{type:e.status==="complete"?"success":"error",message:`${t}: ${n}`}),setTimeout(()=>{oe("notification",null)},1e4),!(typeof window>"u"||!("Notification"in window))&&Notification.permission==="granted"&&new Notification(t,{body:n,icon:"/favicon.ico"})};function tl(){const{state:e,setState:t}=Xt(),n=o=>{if(!o||typeof o!="object"||typeof o.type!="string")return;const a=o.payload||o;Cn(()=>{try{switch(o.type){case"snapshot":a.snapshot?r(a.snapshot):o.snapshot&&r(o.snapshot);break;case"status":try{oe("jobStatuses",a.jobId,l=>{const c=Gt(a.status),u={...l||{},jobId:a.jobId,status:c,message:mn(a.status,a.message,a.error),error:a.error,stats:gn(a.stats)||(l==null?void 0:l.stats),exitCode:a.exitCode};if((l==null?void 0:l.status)!==c&&(c==="complete"||c==="error")){el(u);const f=a.jobId;setTimeout(()=>{try{const m=Ae.activeDownloads,w=Object.keys(m).filter(p=>{var $,M;return(($=m[p])==null?void 0:$.jobId)===f||((M=m[p])==null?void 0:M.done)});for(const p of w)oe("activeDownloads",p,void 0)}catch(m){console.error("Failed to clear completed job tasks:",m)}},300)}return u})}catch(l){console.error("Critical error processing status payload:",l)}break;case"register":case"progress":if(!a.id)return;oe("activeDownloads",a.id,l=>({id:a.id,jobId:a.jobId,filename:a.filename||(l==null?void 0:l.filename),label:a.label||a.filename||(l==null?void 0:l.label)||a.id,total:ze(a.total,(l==null?void 0:l.total)||0),current:ze(a.current,(l==null?void 0:l.current)||0),percent:yn(a.percent),status:a.status||(l==null?void 0:l.status)||"downloading",eta:a.eta||(l==null?void 0:l.eta),done:a.status==="complete"||a.percent>=100}));break;case"finish":a.id&&(oe("activeDownloads",a.id,"done",!0),oe("activeDownloads",a.id,"percent",100));break;case"duplicate":typeof a.promptId=="string"&&a.promptId!==""&&(t("download","duplicateQueue",l=>l.some(c=>c.promptId===a.promptId)?l:[...l,{jobId:a.jobId,promptId:a.promptId,path:a.path||"",filename:a.filename||""}]),t("download","duplicateError",""));break;case"duplicate-resolved":typeof a.promptId=="string"&&a.promptId!==""&&(t("download","duplicateQueue",l=>l.filter(c=>c.promptId!==a.promptId)),t("download","duplicateError",""));break;case"log":oe("logs",l=>[...l,{level:pn(a.level),message:a.message}].slice(-zt));break;case"done":oe("jobStatuses",a.jobId,"status",bn(a.status));break;default:break}}catch(l){console.error("Error processing WebSocket event:",l)}})},r=o=>{const a=o.jobId;if(oe("jobStatuses",a,{jobId:a,status:bn(o.status),message:mn(o.status,"",o.error),error:o.error,stats:gn(o.stats),exitCode:o.exitCode}),Array.isArray(o.tasks))for(const l of o.tasks)oe("activeDownloads",l.id,{id:l.id,jobId:a,label:l.label||l.id,total:ze(l.total,0),current:ze(l.current,0),percent:yn(l.percent),done:!!l.done||l.percent>=100});if(Array.isArray(o.duplicates)&&o.duplicates.length>0&&t("download","duplicateQueue",l=>{const c=[...l];for(const u of o.duplicates)c.some(f=>f.promptId===u.promptId)||c.push({jobId:a,promptId:u.promptId,path:u.path,filename:u.filename});return c}),Array.isArray(o.logs)){const l=o.logs.map(c=>({level:pn(c.level),message:c.message}));oe("logs",l.slice(-zt))}};return et(()=>{const o=Yn.addListener(n);typeof window<"u"&&"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),Te(o)}),Te(()=>{}),{startDownload:async o=>{const a=o.split(",").map(l=>l.trim()).filter(l=>l.length>0);if(a.length!==0)try{const l=await fetch("/api/download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({urls:a,options:{output:e.settings.output,quality:e.settings.quality,jobs:e.settings.jobs,timeout:e.settings.timeout,audio:e.settings.audioOnly,"on-duplicate":e.settings.onDuplicate,"use-cookies":e.settings.useCookies,"po-token":e.settings.poTokenExtension?"true":""}})}),c=await l.json();if(!l.ok)throw new Error(c.error||"Failed to start download");oe("lastJobId",c.jobId)}catch(l){console.error("Download start failed:",l),oe("logs",c=>[...c,{level:"error",message:l.message||"Failed to start download"}].slice(-zt))}},cancelDownload:async o=>{if(o)try{const a=await fetch("/api/download/cancel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jobId:o})});if(!a.ok){const l=await a.json().catch(()=>({}));throw new Error(l.error||"Failed to cancel download")}}catch(a){console.error("Download cancel failed:",a)}},listenForProgress:o=>{console.log("Now listening for job:",o)}}}const vn="Unknown Artist",nl="Unknown Channel",rl="Unknown Creator",il="Unknown Album",qn="Standalone",he=(...e)=>{for(const t of e)if(typeof t=="string"){const n=t.trim();if(n!=="")return n}return""},sl=(e,t)=>{const n=String(e||"").toLowerCase();return n==="podcast"?"Podcast":n==="music"||n==="audio"?"Music":"YouTube Video"},al=e=>e!=null&&e.metadata&&typeof e.metadata=="object"?e.metadata:{},ol=e=>{if(typeof(e==null?void 0:e.modified_at)=="string"){const t=Date.parse(e.modified_at);if(Number.isFinite(t))return t}if(typeof(e==null?void 0:e.modifiedAt)=="string"){const t=Date.parse(e.modifiedAt);if(Number.isFinite(t))return t}if(typeof(e==null?void 0:e.date)=="string"){const t=Date.parse(e.date);if(Number.isFinite(t))return t}return 0},ce=(e,t)=>String(e||"").localeCompare(String(t||""),void 0,{sensitivity:"base",numeric:!0}),Be=(e,t)=>e!==""?e:t||"",ll=(e,t,n)=>{var M,x;const r=al(e),i=sl(e==null?void 0:e.type,(e==null?void 0:e.artist)||r.artist||r.author),s=he(e==null?void 0:e.title,r.title,"Untitled"),o=he(e==null?void 0:e.artist,r.artist,r.author,i==="Music"?vn:rl),a=he(e==null?void 0:e.album,r.album,i==="Music"?il:o),l=he((M=e==null?void 0:e.playlist)==null?void 0:M.title,(x=r==null?void 0:r.playlist)==null?void 0:x.title,qn),c=he(e==null?void 0:e.thumbnail_url,e==null?void 0:e.thumbnailUrl,e==null?void 0:e.thumbnailURL,r.thumbnail_url,r.thumbnailUrl,r.thumbnailURL),u=he(e==null?void 0:e.relative_path,e==null?void 0:e.filename,e==null?void 0:e.id),f=he(n[u],""),m=t.get(f),w=ol(e),p=!!((e==null?void 0:e.has_sidecar)??(e==null?void 0:e.hasSidecar)),$=[];return p||$.push("missing_sidecar"),(o===vn||o===nl)&&$.push("missing_creator"),s==="Untitled"&&$.push("missing_title"),{raw:e,mediaKey:u,filename:String((e==null?void 0:e.filename)||""),relativePath:he(e==null?void 0:e.relative_path,e==null?void 0:e.filename,""),folder:String((e==null?void 0:e.folder)||""),id:String((e==null?void 0:e.id)||(e==null?void 0:e.filename)||u),type:i,title:s,creator:o,album:a,sourcePlaylist:l,savedPlaylistId:(m==null?void 0:m.id)||"",savedPlaylistName:(m==null?void 0:m.name)||"Unassigned",date:he(e==null?void 0:e.date,""),modifiedAt:he(e==null?void 0:e.modified_at,e==null?void 0:e.modifiedAt,""),size:he(e==null?void 0:e.size,""),sizeBytes:Number.isFinite(Number(e==null?void 0:e.size_bytes))?Number(e.size_bytes):0,sourceURL:he(e==null?void 0:e.source_url,r.source_url,""),thumbnailUrl:c,metadata:r,timestamp:w,hasSidecar:p,anomalies:$,hasAnomaly:$.length>0}},je=(e,t)=>{const n=[...e];return n.sort((r,i)=>{switch(t){case"oldest":return r.timestamp-i.timestamp||ce(r.title,i.title);case"creator_asc":return ce(r.creator,i.creator)||ce(r.title,i.title);case"creator_desc":return ce(i.creator,r.creator)||ce(r.title,i.title);case"collection_asc":return ce(r.album,i.album)||ce(r.title,i.title);case"collection_desc":return ce(i.album,r.album)||ce(r.title,i.title);case"playlist_asc":return ce(r.sourcePlaylist,i.sourcePlaylist)||ce(r.title,i.title);case"playlist_desc":return ce(i.sourcePlaylist,r.sourcePlaylist)||ce(r.title,i.title);case"newest":default:return i.timestamp-r.timestamp||ce(r.title,i.title)}}),n},cl=(e,t)=>{const n=String(t.query||"").trim().toLowerCase();return!(n&&![e.title,e.creator,e.album,e.sourcePlaylist,e.savedPlaylistName,e.filename].join(" ").toLowerCase().includes(n)||t.creator&&e.creator!==t.creator||t.collection&&e.album!==t.collection||t.playlist&&e.sourcePlaylist!==t.playlist||t.savedPlaylistId&&e.savedPlaylistId!==t.savedPlaylistId)},Le=e=>[...e].sort((t,n)=>n.latestTimestamp-t.latestTimestamp||ce(t.name,n.name)),dl=e=>{const t=new Map;for(const i of e.filter(s=>s.type==="Music")){t.has(i.creator)||t.set(i.creator,{name:i.creator,type:"artist",items:[],albumsByName:new Map,latestTimestamp:i.timestamp,thumbnailUrl:i.thumbnailUrl||""});const s=t.get(i.creator);s.items.push(i),s.latestTimestamp=Math.max(s.latestTimestamp,i.timestamp),s.thumbnailUrl=Be(s.thumbnailUrl,i.thumbnailUrl),s.albumsByName.has(i.album)||s.albumsByName.set(i.album,{name:i.album,items:[],latestTimestamp:i.timestamp,thumbnailUrl:i.thumbnailUrl||""});const o=s.albumsByName.get(i.album);o.items.push(i),o.latestTimestamp=Math.max(o.latestTimestamp,i.timestamp),o.thumbnailUrl=Be(o.thumbnailUrl,i.thumbnailUrl)}const n=[],r=new Map;for(const[i,s]of t.entries()){const o=Le(Array.from(s.albumsByName.values())).map(l=>({...l,items:je(l.items,"newest"),count:l.items.length})),a={name:i,type:"artist",items:je(s.items,"newest"),count:s.items.length,latestTimestamp:s.latestTimestamp,thumbnailUrl:s.thumbnailUrl,albums:o};n.push(a),r.set(i,a)}return{groups:Le(n),byName:r}},ul=e=>{const t=new Map;for(const i of e.filter(s=>s.type==="YouTube Video")){t.has(i.creator)||t.set(i.creator,{name:i.creator,type:"video_creator",items:[],latestTimestamp:i.timestamp,thumbnailUrl:i.thumbnailUrl||""});const s=t.get(i.creator);s.items.push(i),s.latestTimestamp=Math.max(s.latestTimestamp,i.timestamp),s.thumbnailUrl=Be(s.thumbnailUrl,i.thumbnailUrl)}const n=[],r=new Map;for(const[i,s]of t.entries()){const o={name:i,type:"video_creator",items:je(s.items,"newest"),count:s.items.length,latestTimestamp:s.latestTimestamp,thumbnailUrl:s.thumbnailUrl};n.push(o),r.set(i,o)}return{groups:Le(n),byName:r}},fl=e=>{const t=new Map;for(const i of e.filter(s=>s.type==="Podcast")){t.has(i.creator)||t.set(i.creator,{name:i.creator,type:"podcast",items:[],latestTimestamp:i.timestamp,thumbnailUrl:i.thumbnailUrl||""});const s=t.get(i.creator);s.items.push(i),s.latestTimestamp=Math.max(s.latestTimestamp,i.timestamp),s.thumbnailUrl=Be(s.thumbnailUrl,i.thumbnailUrl)}const n=[],r=new Map;for(const[i,s]of t.entries()){const o={name:i,type:"podcast",items:je(s.items,"newest"),count:s.items.length,latestTimestamp:s.latestTimestamp,thumbnailUrl:s.thumbnailUrl};n.push(o),r.set(i,o)}return{groups:Le(n),byName:r}},hl=(e,t)=>{const n=new Map;for(const l of e){const c=he(l.sourcePlaylist,qn),u=`source:${c.toLowerCase()}`;n.has(u)||n.set(u,{key:u,kind:"source",name:c,items:[],latestTimestamp:l.timestamp,thumbnailUrl:l.thumbnailUrl||""});const f=n.get(u);f.items.push(l),f.latestTimestamp=Math.max(f.latestTimestamp,l.timestamp),f.thumbnailUrl=Be(f.thumbnailUrl,l.thumbnailUrl)}const r=new Map;for(const l of t)r.set(l.id,{key:`saved:${l.id}`,kind:"saved",name:l.name,playlistId:l.id,items:[],latestTimestamp:0,thumbnailUrl:""});for(const l of e){if(!l.savedPlaylistId||!r.has(l.savedPlaylistId))continue;const c=r.get(l.savedPlaylistId);c.items.push(l),c.latestTimestamp=Math.max(c.latestTimestamp,l.timestamp),c.thumbnailUrl=Be(c.thumbnailUrl,l.thumbnailUrl)}const i=Le(Array.from(n.values())).map(l=>({...l,count:l.items.length,items:je(l.items,"newest")})),s=Le(Array.from(r.values())).map(l=>({...l,count:l.items.length,items:je(l.items,"newest")})),o=Le([...i,...s]),a=new Map(o.map(l=>[l.key,l]));return{sourceGroups:i,savedGroups:s,combined:o,byKey:a}},jt=e=>Array.from(new Set(e.filter(t=>typeof t=="string"&&t.trim()!=="").map(t=>t.trim()))).sort(ce),yl=({downloads:e,savedPlaylists:t,playlistAssignments:n,typeFilter:r,sortKey:i,filters:s})=>{const o=Array.isArray(e)?e:[],a=Array.isArray(t)?t:[],l=n&&typeof n=="object"?n:{},c=new Map(a.map(N=>[String(N.id||"").trim(),N])),u=o.map(N=>ll(N,c,l)),f=u.filter(N=>N.hasAnomaly),w=u.filter(N=>r==="all"?!0:N.type===r).filter(N=>cl(N,s||{})),p=je(w,i),$=dl(w),M=ul(w),x=fl(w),_=hl(w,a),z=Le([...$.groups.map(N=>({...N,key:`artist:${N.name}`,creatorType:"artist"})),...M.groups.map(N=>({...N,key:`video_creator:${N.name}`,creatorType:"video_creator"})),...x.groups.map(N=>({...N,key:`podcast:${N.name}`,creatorType:"podcast"}))]),I={creators:jt(w.map(N=>N.creator)),collections:jt(w.map(N=>N.album)),sourcePlaylists:jt(w.map(N=>N.sourcePlaylist))};return{items:u,filteredItems:p,anomalyItems:f,anomalyCount:f.length,artists:$.groups,artistsByName:$.byName,videos:M.groups,videosByName:M.byName,podcasts:x.groups,podcastsByName:x.byName,creatorCards:z,playlists:_.combined,playlistsByKey:_.byKey,sourcePlaylists:_.sourceGroups,savedPlaylists:_.savedGroups,filterOptions:I}};var gl=C('<div class="max-w-7xl mx-auto">'),wn=C('<div class="max-w-4xl mx-auto">'),ml=C('<div class="max-w-dynamic mx-auto h-full">'),pl=C('<img class="absolute -top-10 -left-4 w-12 h-12 object-contain animate-bounce -rotate-12 pointer-events-none drop-shadow-lg"alt="Gopher Success">'),bl=C('<div class="fixed bottom-10 left-1/2 -translate-x-1/2 z-[100] animate-in fade-in slide-in-from-bottom-4 duration-500"><div><div class=relative><div></div></div><div class="flex-1 min-w-0"><p class="text-sm font-bold leading-tight line-clamp-2"></p></div><button class="p-1 hover:bg-white/5 rounded-lg transition-colors">'),vl=C('<div class="flex h-screen bg-[radial-gradient(circle_at_12%_8%,rgba(56,189,248,0.16),transparent_35%),radial-gradient(circle_at_88%_2%,rgba(20,184,166,0.14),transparent_30%),linear-gradient(180deg,#05070a,#070b12_45%,#05070a)] text-gray-200 overflow-hidden font-sans select-none"><main class="flex-1 flex flex-col bg-transparent relative min-w-0"><div class="flex-1 overflow-y-auto p-6 md:p-10 custom-scrollbar">'),wl=C('<div class="flex flex-col items-center justify-center h-full text-gray-500 gap-4 animate-pulse"><span class="text-xs font-bold uppercase tracking-widest">Loading View...');const xl=ot(()=>lt(()=>import("./assets/DownloadView-Bhq3JPU9.js"),[])),$l=ot(()=>lt(()=>import("./assets/LibraryView-Cl1mHjKT.js"),[])),kl=ot(()=>lt(()=>import("./assets/SettingsView-oKTrTPgU.js"),[])),_l=ot(()=>lt(()=>import("./assets/Player-CdVu9tNX.js"),[])),Sl=e=>{if(!e||typeof e!="object")return 0;const t=Number(e.succeeded);return Number.isFinite(t)?Math.max(0,Math.trunc(t)):0},Cl=(e,t)=>{const n=Gt(e);return n==="complete"?!0:n!=="error"?!1:Sl(t)>0},Al=e=>String(e||"").split("/").map(t=>encodeURIComponent(t)).join("/"),dt=e=>String(e||"").trim();function Pl(){const{state:e,setState:t}=Xt(),[n,r]=X([]),{initialize:i,createPlaylist:s,renamePlaylist:o,deletePlaylist:a,assignPlaylist:l}=Go(),{listenForProgress:c,startDownload:u}=tl();let f=null,m=0,w="",p="",$=null,M=!1;const x=()=>e.ui.activeTab||"dashboard",_=()=>e.ui.isAdvanced,z=ae(()=>yl({downloads:e.library.downloads,savedPlaylists:e.library.savedPlaylists,playlistAssignments:e.library.playlistAssignments,typeFilter:e.library.typeFilter,sortKey:e.library.sortKey,filters:e.library.filters})),I=k=>{t("ui","activeTab",k)},N=()=>{t("ui","isAdvanced",k=>!k)},U=()=>{I("library")},T=()=>{$&&(clearTimeout($),$=null)},E=async()=>{if(M)return!1;f&&f.abort(),f=new AbortController;const k=++m;try{const D=await fetch("/api/media/",{signal:f.signal});if(D.ok){const F=await D.json();if(M||k!==m)return!1;const q=Array.isArray(F)?F:F.items||[];return t("library","downloads",q),!0}return!1}catch(D){return D&&typeof D=="object"&&D.name==="AbortError"||console.error("Failed to fetch media files:",D),!1}finally{k===m&&(f=null)}},L=async()=>await E()?{ok:!0,message:"Library refreshed. Legacy files without sidecars may still need re-download for complete metadata and thumbnails."}:{ok:!1,message:"Unable to refresh metadata right now. Please retry in a few seconds."},v=k=>{k&&t("download","duplicateQueue",D=>D.filter(F=>F.promptId!==k))},A=async k=>{const D=e.download.duplicateQueue[0];if(D){t("download","duplicateError","");try{const F=await fetch("/api/download/duplicate-response",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jobId:D.jobId,promptId:D.promptId,choice:k})}),q=await F.json().catch(()=>({}));if(!F.ok||q.error){if(F.status===404||F.status===409){v(D.promptId),t("download","duplicateError","");return}t("download","duplicateError",q.error||"Failed to submit duplicate choice");return}v(D.promptId),t("download","duplicateError","")}catch(F){t("download","duplicateError",F.message||"Failed to submit duplicate choice")}}},B=k=>{if(e.download.duplicateQueue.length===0)return;const D=document.activeElement;if(!(D&&(D.tagName==="INPUT"||D.tagName==="TEXTAREA"||D.isContentEditable))&&!(k.metaKey||k.ctrlKey||k.altKey))switch(k.key){case"o":k.preventDefault(),A("overwrite");break;case"O":k.preventDefault(),A("overwrite_all");break;case"s":k.preventDefault(),A("skip");break;case"S":k.preventDefault(),A("skip_all");break;case"r":k.preventDefault(),A("rename");break;case"R":k.preventDefault(),A("rename_all");break;case"q":k.preventDefault(),A("cancel");break}},W=async(k,D=1)=>{if(!k||M)return;p=k;const F=await E();if(!(M||p!==k)){if(F){w=k,p="",T();return}if(D>=3){p="";return}T(),$=setTimeout(()=>{$=null,W(k,D+1)},D*1e3)}};et(()=>{E(),i(),Yn.connect(),typeof window<"u"&&window.addEventListener("keydown",B),e.ui.activeTab||I("dashboard")}),nt(()=>{const k=x();(k==="library"||k==="dashboard")&&E()}),nt(()=>{const k=Ae.jobStatuses;for(const D in k){const F=k[D];typeof D!="string"||D===""||D===w||D===p||Cl(F==null?void 0:F.status,F==null?void 0:F.stats)&&W(D,1)}}),Te(()=>{M=!0,T(),typeof window<"u"&&window.removeEventListener("keydown",B),f&&(f.abort(),f=null)});const re=k=>({...k,url:`/api/media/${Al(k.filename)}`}),le=(k,D)=>{const F=Array.isArray(e.library.downloads)?e.library.downloads:[],q=Array.isArray(k)&&k.length>0?k:F,K=[],se=new Set;for(const ve of q){if(!ve||typeof ve!="object")continue;const fe=dt(ve.filename);fe===""||se.has(fe)||(se.add(fe),K.push(ve))}const ye=dt(D==null?void 0:D.filename);return ye!==""&&!se.has(ye)&&K.unshift(D),K},be=(k,D)=>{if(!k||typeof k!="object"||String(k.filename||"").trim()==="")return;const F=le(D,k);r(F),t("player","selectedMedia",re(k)),t("player","minimized",!1),t("player","active",!0)},_e=()=>{t("player","active",!1),t("player","selectedMedia",null),t("player","minimized",!1),r([])},Ue=()=>{const k=e.player.selectedMedia;k&&(Ko(k),t("library","typeFilter","all")),t("library","section","all_media"),t("library","navPath",{creatorType:"",creatorName:"",albumName:"",playlistKey:"",playlistKind:""}),I("library")},Fe=()=>{var se;const k=n();if(k.length===0)return;const D=dt((se=e.player.selectedMedia)==null?void 0:se.filename),F=k.findIndex(ye=>dt(ye.filename)===D),q=F<0?0:(F+1)%k.length,K=k[q];K&&(t("player","selectedMedia",re(K)),t("player","active",!0))};return(()=>{var k=vl(),D=k.firstChild,F=D.firstChild;return h(k,d(io,{get activeTab(){return x()},onTabChange:I}),D),h(D,d(ao,{get activeTab(){return x()},get isAdvanced(){return _()},onToggleAdvanced:N}),F),h(F,d(Wt,{get fallback(){return(()=>{var q=wl(),K=q.firstChild;return h(q,d(j,{name:"loader",class:"w-10 h-10 animate-spin text-accent-primary"}),K),q})()},get children(){return[d(J,{get when(){return x()==="dashboard"},get children(){var q=gl();return h(q,d(no,{libraryModel:z,onTabChange:I,onDownload:u,onPlay:K=>be(K,e.library.downloads)})),q}}),d(J,{get when(){return x()==="download"},get children(){var q=wn();return h(q,d(xl,{onOpenLibrary:U,onStartDownload:K=>c(K)})),q}}),d(J,{get when(){return x()==="library"},get children(){var q=ml();return h(q,d($l,{downloads:()=>e.library.downloads,section:()=>e.library.section,viewMode:()=>e.library.viewMode,typeFilter:()=>e.library.typeFilter,navPath:()=>e.library.navPath,filters:()=>e.library.filters,sortKey:()=>e.library.sortKey,uiState:()=>e.library.ui,savedPlaylists:()=>e.library.savedPlaylists,playlistAssignments:()=>e.library.playlistAssignments,onSectionChange:K=>t("library","section",K),onViewModeChange:K=>t("library","viewMode",K),onTypeFilterChange:K=>t("library","typeFilter",K),onNavPathChange:K=>t("library","navPath",K),onFilterChange:(K,se)=>t("library","filters",K,se),onClearFilters:()=>t("library","filters",{query:"",savedPlaylistId:""}),onSortKeyChange:K=>t("library","sortKey",K),onUiStateChange:(K,se)=>t("library","ui",K,se),openPlayer:(K,se)=>be(K,se),onOpenQueue:Ue,onCreatePlaylist:s,onRenamePlaylist:o,onDeletePlaylist:a,onAssignPlaylist:l,onRetryMetadataScan:L})),q}}),d(J,{get when(){return x()==="settings"},get children(){var q=wn();return h(q,d(kl,{})),q}})]}}),null),h(F,d(J,{get when(){return e.download.duplicateQueue.length>0},get children(){return d(ho,{get prompt(){return e.download.duplicateQueue[0]},onSelect:A,get error(){return e.download.duplicateError}})}}),null),h(F,d(J,{get when(){return Ae.notification},get children(){var q=bl(),K=q.firstChild,se=K.firstChild,ye=se.firstChild,ve=se.nextSibling,fe=ve.firstChild,Se=ve.nextSibling;return h(ye,d(j,{get name(){return Ae.notification.type==="success"?"check-circle-2":"alert-circle"},class:"w-5 h-5 relative z-10"})),h(se,d(J,{get when(){return Ae.notification.type==="success"},get children(){var ge=pl();return ke(ge,"src",At),ge}}),null),h(fe,()=>Ae.notification.message),Se.$$click=()=>oe("notification",null),h(Se,d(j,{name:"x",class:"w-4 h-4 opacity-50"})),Q(ge=>{var Ce=`px-6 py-4 rounded-2xl border backdrop-blur-xl shadow-2xl flex items-center gap-4 min-w-[340px] max-w-md ${Ae.notification.type==="success"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-400":"bg-red-500/10 border-red-500/20 text-red-400"}`,De=`p-2.5 rounded-xl ${Ae.notification.type==="success"?"bg-emerald-500/20":"bg-red-500/20"}`;return Ce!==ge.e&&ie(K,ge.e=Ce),De!==ge.t&&ie(ye,ge.t=De),ge},{e:void 0,t:void 0}),q}}),null),h(k,d(Wt,{get children(){return d(J,{get when(){return e.player.active},get children(){return d(_l,{get active(){return e.player.active},get minimized(){return e.player.minimized},get media(){return e.player.selectedMedia},onClose:_e,onMinimize:()=>t("player","minimized",!0),onRestore:()=>t("player","minimized",!1),onNext:Fe,onPrevious:Fe})}})}}),null),k})()}pe(["click"]);const Nl=document.getElementById("root");vr(()=>d(zo,{get children(){return d(Pl,{})}}),Nl);export{Xs as A,Re as F,ua as G,j as I,J as S,wa as T,tl as a,Q as b,d as c,ie as d,Ae as e,da as f,pe as g,X as h,h as i,ae as j,yl as k,nt as l,ht as m,Gt as n,Ct as o,Ko as p,Te as q,Ln as r,ke as s,C as t,Xt as u,Mn as v};
