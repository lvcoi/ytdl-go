(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const _={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return zt(this.context.count)},getNextContextId(){return zt(this.context.count++)}};function zt(e){const t=String(e),n=t.length-1;return _.context.id+(n?String.fromCharCode(96+n):"")+t}function fe(e){_.context=e}const sn=!1,Cn=(e,t)=>e===t,le=Symbol("solid-proxy"),on=typeof Proxy=="function",gt=Symbol("solid-track"),Qe={equals:Cn};let an=fn;const he=1,Ze=2,ln={owned:null,cleanups:null,context:null,owner:null},ct={};var F=null;let Ge=null,Pn=null,q=null,re=null,ae=null,st=0;function Re(e,t){const n=q,r=F,i=e.length===0,a=t===void 0?r:t,s=i?ln:{owned:null,cleanups:null,context:a?a.context:null,owner:a},o=i?e:()=>e(()=>ie(()=>Ie(s)));F=s,q=null;try{return ye(o,!0)}finally{q=n,F=r}}function ne(e,t){t=t?Object.assign({},Qe,t):Qe;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),un(n,i));return[dn.bind(n),r]}function Ot(e,t,n){const r=at(e,t,!0,he);Le(r)}function V(e,t,n){const r=at(e,t,!1,he);Le(r)}function Ue(e,t,n){an=Rn;const r=at(e,t,!1,he),i=Me&&ot(Me);i&&(r.suspense=i),r.user=!0,ae?ae.push(r):Le(r)}function G(e,t,n){n=n?Object.assign({},Qe,n):Qe;const r=at(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Le(r),dn.bind(r)}function Nn(e){return e&&typeof e=="object"&&"then"in e}function Tn(e,t,n){let r,i,a;r=!0,i=e,a={};let s=null,o=ct,l=null,c=!1,f="initialValue"in a,u=typeof r=="function"&&G(r);const g=new Set,[w,m]=(a.storage||ne)(a.initialValue),[x,N]=ne(void 0),[T,E]=ne(void 0,{equals:!1}),[K,U]=ne(f?"ready":"unresolved");_.context&&(l=_.getNextContextId(),a.ssrLoadFrom==="initial"?o=a.initialValue:_.load&&_.has(l)&&(o=_.load(l)));function $(d,p,k,S){return s===d&&(s=null,S!==void 0&&(f=!0),(d===o||p===o)&&a.onHydrated&&queueMicrotask(()=>a.onHydrated(S,{value:p})),o=ct,B(p,k)),p}function B(d,p){ye(()=>{p===void 0&&m(()=>d),U(p!==void 0?"errored":f?"ready":"unresolved"),N(p);for(const k of g.keys())k.decrement();g.clear()},!1)}function C(){const d=Me&&ot(Me),p=w(),k=x();if(k!==void 0&&!s)throw k;return q&&!q.user&&d&&Ot(()=>{T(),s&&(d.resolved&&Ge||g.has(d)||(d.increment(),g.add(d)))}),p}function A(d=!0){if(d!==!1&&c)return;c=!1;const p=u?u():r;if(p==null||p===!1){$(s,ie(w));return}let k;const S=o!==ct?o:ie(()=>{try{return i(p,{value:w(),refetching:d})}catch(z){k=z}});if(k!==void 0){$(s,void 0,Je(k),p);return}else if(!Nn(S))return $(s,S,void 0,p),S;return s=S,"v"in S?(S.s===1?$(s,S.v,void 0,p):$(s,void 0,Je(S.v),p),S):(c=!0,queueMicrotask(()=>c=!1),ye(()=>{U(f?"refreshing":"pending"),E()},!1),S.then(z=>$(S,z,void 0,p),z=>$(S,void 0,Je(z),p)))}Object.defineProperties(C,{state:{get:()=>K()},error:{get:()=>x()},loading:{get(){const d=K();return d==="pending"||d==="refreshing"}},latest:{get(){if(!f)return C();const d=x();if(d&&!s)throw d;return w()}}});let y=F;return u?Ot(()=>(y=F,A(!1))):A(!1),[C,{refetch:d=>Mn(y,()=>A(d)),mutate:m}]}function cn(e){return ye(e,!1)}function ie(e){if(q===null)return e();const t=q;q=null;try{return e()}finally{q=t}}function St(e){Ue(()=>ie(e))}function $e(e){return F===null||(F.cleanups===null?F.cleanups=[e]:F.cleanups.push(e)),e}function mt(){return q}function En(){return F}function Mn(e,t){const n=F,r=q;F=e,q=null;try{return ye(t,!0)}catch(i){At(i)}finally{F=n,q=r}}const[Da,La]=ne(!1);function Dn(e){ae.push.apply(ae,e),e.length=0}function _t(e,t){const n=Symbol("context");return{id:n,Provider:Fn(n),defaultValue:e}}function ot(e){let t;return F&&F.context&&(t=F.context[e.id])!==void 0?t:e.defaultValue}function Ln(e){const t=G(e),n=G(()=>bt(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let Me;function zn(){return Me||(Me=_t())}function dn(){if(this.sources&&this.state)if(this.state===he)Le(this);else{const e=re;re=null,ye(()=>tt(this),!1),re=e}if(q){const e=this.observers?this.observers.length:0;q.sources?(q.sources.push(this),q.sourceSlots.push(e)):(q.sources=[this],q.sourceSlots=[e]),this.observers?(this.observers.push(q),this.observerSlots.push(q.sources.length-1)):(this.observers=[q],this.observerSlots=[q.sources.length-1])}return this.value}function un(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&ye(()=>{for(let i=0;i<e.observers.length;i+=1){const a=e.observers[i],s=Ge&&Ge.running;s&&Ge.disposed.has(a),(s?!a.tState:!a.state)&&(a.pure?re.push(a):ae.push(a),a.observers&&yn(a)),s||(a.state=he)}if(re.length>1e6)throw re=[],new Error},!1)),t}function Le(e){if(!e.fn)return;Ie(e);const t=st;On(e,e.value,t)}function On(e,t,n){let r;const i=F,a=q;q=F=e;try{r=e.fn(t)}catch(s){return e.pure&&(e.state=he,e.owned&&e.owned.forEach(Ie),e.owned=null),e.updatedAt=n+1,At(s)}finally{q=a,F=i}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?un(e,r):e.value=r,e.updatedAt=n)}function at(e,t,n,r=he,i){const a={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:F,context:F?F.context:null,pure:n};return F===null||F!==ln&&(F.owned?F.owned.push(a):F.owned=[a]),a}function et(e){if(e.state===0)return;if(e.state===Ze)return tt(e);if(e.suspense&&ie(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<st);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===he)Le(e);else if(e.state===Ze){const r=re;re=null,ye(()=>tt(e,t[0]),!1),re=r}}function ye(e,t){if(re)return e();let n=!1;t||(re=[]),ae?n=!0:ae=[],st++;try{const r=e();return jn(n),r}catch(r){n||(ae=null),re=null,At(r)}}function jn(e){if(re&&(fn(re),re=null),e)return;const t=ae;ae=null,t.length&&ye(()=>an(t),!1)}function fn(e){for(let t=0;t<e.length;t++)et(e[t])}function Rn(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:et(r)}if(_.context){if(_.count){_.effects||(_.effects=[]),_.effects.push(...e.slice(0,n));return}fe()}for(_.effects&&(_.done||!_.count)&&(e=[..._.effects,...e],n+=_.effects.length,delete _.effects),t=0;t<n;t++)et(e[t])}function tt(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const i=r.state;i===he?r!==t&&(!r.updatedAt||r.updatedAt<st)&&et(r):i===Ze&&tt(r,t)}}}function yn(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Ze,n.pure?re.push(n):ae.push(n),n.observers&&yn(n))}}function Ie(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const a=i.pop(),s=n.observerSlots.pop();r<i.length&&(a.sourceSlots[s]=r,i[r]=a,n.observerSlots[r]=s)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Ie(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Ie(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Je(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function At(e,t=F){throw Je(e)}function bt(e){if(typeof e=="function"&&!e.length)return bt(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=bt(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Fn(e,t){return function(r){let i;return V(()=>i=ie(()=>(F.context={...F.context,[e]:r.value},Ln(()=>r.children))),void 0),i}}const Un=Symbol("fallback");function jt(e){for(let t=0;t<e.length;t++)e[t]()}function In(e,t,n={}){let r=[],i=[],a=[],s=0,o=t.length>1?[]:null;return $e(()=>jt(a)),()=>{let l=e()||[],c=l.length,f,u;return l[gt],ie(()=>{let w,m,x,N,T,E,K,U,$;if(c===0)s!==0&&(jt(a),a=[],r=[],i=[],s=0,o&&(o=[])),n.fallback&&(r=[Un],i[0]=Re(B=>(a[0]=B,n.fallback())),s=1);else if(s===0){for(i=new Array(c),u=0;u<c;u++)r[u]=l[u],i[u]=Re(g);s=c}else{for(x=new Array(c),N=new Array(c),o&&(T=new Array(c)),E=0,K=Math.min(s,c);E<K&&r[E]===l[E];E++);for(K=s-1,U=c-1;K>=E&&U>=E&&r[K]===l[U];K--,U--)x[U]=i[K],N[U]=a[K],o&&(T[U]=o[K]);for(w=new Map,m=new Array(U+1),u=U;u>=E;u--)$=l[u],f=w.get($),m[u]=f===void 0?-1:f,w.set($,u);for(f=E;f<=K;f++)$=r[f],u=w.get($),u!==void 0&&u!==-1?(x[u]=i[f],N[u]=a[f],o&&(T[u]=o[f]),u=m[u],w.set($,u)):a[f]();for(u=E;u<c;u++)u in x?(i[u]=x[u],a[u]=N[u],o&&(o[u]=T[u],o[u](u))):i[u]=Re(g);i=i.slice(0,s=c),r=l.slice(0)}return i});function g(w){if(a[u]=w,o){const[m,x]=ne(u);return o[u]=x,t(l[u],m)}return t(l[u])}}}function h(e,t){return ie(()=>e(t||{}))}function Xe(){return!0}const vt={get(e,t,n){return t===le?n:e.get(t)},has(e,t){return t===le?!0:e.has(t)},set:Xe,deleteProperty:Xe,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Xe,deleteProperty:Xe}},ownKeys(e){return e.keys()}};function dt(e){return(e=typeof e=="function"?e():e)?e:{}}function qn(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function M(...e){let t=!1;for(let s=0;s<e.length;s++){const o=e[s];t=t||!!o&&le in o,e[s]=typeof o=="function"?(t=!0,G(o)):o}if(on&&t)return new Proxy({get(s){for(let o=e.length-1;o>=0;o--){const l=dt(e[o])[s];if(l!==void 0)return l}},has(s){for(let o=e.length-1;o>=0;o--)if(s in dt(e[o]))return!0;return!1},keys(){const s=[];for(let o=0;o<e.length;o++)s.push(...Object.keys(dt(e[o])));return[...new Set(s)]}},vt);const n={},r=Object.create(null);for(let s=e.length-1;s>=0;s--){const o=e[s];if(!o)continue;const l=Object.getOwnPropertyNames(o);for(let c=l.length-1;c>=0;c--){const f=l[c];if(f==="__proto__"||f==="constructor")continue;const u=Object.getOwnPropertyDescriptor(o,f);if(!r[f])r[f]=u.get?{enumerable:!0,configurable:!0,get:qn.bind(n[f]=[u.get.bind(o)])}:u.value!==void 0?u:void 0;else{const g=n[f];g&&(u.get?g.push(u.get.bind(o)):u.value!==void 0&&g.push(()=>u.value))}}}const i={},a=Object.keys(r);for(let s=a.length-1;s>=0;s--){const o=a[s],l=r[o];l&&l.get?Object.defineProperty(i,o,l):i[o]=l?l.value:void 0}return i}function Ct(e,...t){const n=t.length;if(on&&le in e){const i=n>1?t.flat():t[0],a=t.map(s=>new Proxy({get(o){return s.includes(o)?e[o]:void 0},has(o){return s.includes(o)&&o in e},keys(){return s.filter(o=>o in e)}},vt));return a.push(new Proxy({get(s){return i.includes(s)?void 0:e[s]},has(s){return i.includes(s)?!1:s in e},keys(){return Object.keys(e).filter(s=>!i.includes(s))}},vt)),a}const r=[];for(let i=0;i<=n;i++)r[i]={};for(const i of Object.getOwnPropertyNames(e)){let a=n;for(let l=0;l<t.length;l++)if(t[l].includes(i)){a=l;break}const s=Object.getOwnPropertyDescriptor(e,i);!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable?r[a][i]=s.value:Object.defineProperty(r[a],i,s)}return r}function Ve(e){let t,n;const r=i=>{const a=_.context;if(a){const[o,l]=ne();_.count||(_.count=0),_.count++,(n||(n=e())).then(c=>{!_.done&&fe(a),_.count--,l(()=>c.default),fe()}),t=o}else if(!t){const[o]=Tn(()=>(n||(n=e())).then(l=>l.default));t=o}let s;return G(()=>(s=t())?ie(()=>{if(!a||_.done)return s(i);const o=_.context;fe(a);const l=s(i);return fe(o),l}):"")};return r.preload=()=>n||((n=e()).then(i=>t=()=>i.default),n),r}const Kn=e=>`Stale read from <${e}>.`;function We(e){const t="fallback"in e&&{fallback:()=>e.fallback};return G(In(()=>e.each,e.children,t||void 0))}function Z(e){const t=e.keyed,n=G(()=>e.when,void 0,void 0),r=t?n:G(n,void 0,{equals:(i,a)=>!i==!a});return G(()=>{const i=r();if(i){const a=e.children;return typeof a=="function"&&a.length>0?ie(()=>a(t?i:()=>{if(!ie(r))throw Kn("Show");return n()})):a}return e.fallback},void 0,void 0)}const Yn=_t();function wt(e){let t=0,n,r,i,a,s;const[o,l]=ne(!1),c=zn(),f={increment:()=>{++t===1&&l(!0)},decrement:()=>{--t===0&&l(!1)},inFallback:o,effects:[],resolved:!1},u=En();if(_.context&&_.load){const m=_.getContextId();let x=_.load(m);if(x&&(typeof x!="object"||x.s!==1?i=x:_.gather(m)),i&&i!=="$$f"){const[N,T]=ne(void 0,{equals:!1});a=N,i.then(()=>{if(_.done)return T();_.gather(m),fe(r),T(),fe()},E=>{s=E,T()})}}const g=ot(Yn);g&&(n=g.register(f.inFallback));let w;return $e(()=>w&&w()),h(c.Provider,{value:f,get children(){return G(()=>{if(s)throw s;if(r=_.context,a)return a(),a=void 0;r&&i==="$$f"&&fe();const m=G(()=>e.children);return G(x=>{const N=f.inFallback(),{showContent:T=!0,showFallback:E=!0}=n?n():{};if((!N||i&&i!=="$$f")&&T)return f.resolved=!0,w&&w(),w=r=i=void 0,Dn(f.effects),m();if(E)return w?x:Re(K=>(w=K,r&&(fe({id:r.id+"F",count:0}),r=void 0),e.fallback),u)})})}})}const Vn=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],Wn=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...Vn]),Bn=new Set(["innerHTML","textContent","innerText","children"]),Xn=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Hn=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function Gn(e,t){const n=Hn[e];return typeof n=="object"?n[t]?n.$:void 0:n}const Jn=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Qn=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),Zn={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},Te=e=>G(()=>e());function er(e,t,n){let r=n.length,i=t.length,a=r,s=0,o=0,l=t[i-1].nextSibling,c=null;for(;s<i||o<a;){if(t[s]===n[o]){s++,o++;continue}for(;t[i-1]===n[a-1];)i--,a--;if(i===s){const f=a<r?o?n[o-1].nextSibling:n[a-o]:l;for(;o<a;)e.insertBefore(n[o++],f)}else if(a===o)for(;s<i;)(!c||!c.has(t[s]))&&t[s].remove(),s++;else if(t[s]===n[a-1]&&n[o]===t[i-1]){const f=t[--i].nextSibling;e.insertBefore(n[o++],t[s++].nextSibling),e.insertBefore(n[--a],f),t[i]=n[a]}else{if(!c){c=new Map;let u=o;for(;u<a;)c.set(n[u],u++)}const f=c.get(t[s]);if(f!=null)if(o<f&&f<a){let u=s,g=1,w;for(;++u<i&&u<a&&!((w=c.get(t[u]))==null||w!==f+g);)g++;if(g>f-o){const m=t[s];for(;o<f;)e.insertBefore(n[o++],m)}else e.replaceChild(n[o++],t[s++])}else s++;else t[s++].remove()}}}const Rt="_$DX_DELEGATE";function tr(e,t,n,r={}){let i;return Re(a=>{i=a,t===document?e():b(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function D(e,t,n,r){let i;const a=()=>{const o=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return o.innerHTML=e,n?o.content.firstChild.firstChild:r?o.firstChild:o.content.firstChild},s=t?()=>ie(()=>document.importNode(i||(i=a()),!0)):()=>(i||(i=a())).cloneNode(!0);return s.cloneNode=s,s}function pe(e,t=window.document){const n=t[Rt]||(t[Rt]=new Set);for(let r=0,i=e.length;r<i;r++){const a=e[r];n.has(a)||(n.add(a),t.addEventListener(a,dr))}}function ce(e,t,n){_e(e)||(n==null?e.removeAttribute(t):e.setAttribute(t,n))}function nr(e,t,n,r){_e(e)||(r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r))}function rr(e,t,n){_e(e)||(n?e.setAttribute(t,""):e.removeAttribute(t))}function X(e,t){_e(e)||(t==null?e.removeAttribute("class"):e.className=t)}function hn(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=a=>i.call(e,n[1],a))}else e.addEventListener(t,n,typeof n!="function"&&n)}function pn(e,t,n={}){const r=Object.keys(t||{}),i=Object.keys(n);let a,s;for(a=0,s=i.length;a<s;a++){const o=i[a];!o||o==="undefined"||t[o]||(Ft(e,o,!1),delete n[o])}for(a=0,s=r.length;a<s;a++){const o=r[a],l=!!t[o];!o||o==="undefined"||n[o]===l||!l||(Ft(e,o,!0),n[o]=l)}return n}function ir(e,t,n){if(!t)return n?ce(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,a;for(a in n)t[a]==null&&r.removeProperty(a),delete n[a];for(a in t)i=t[a],i!==n[a]&&(r.setProperty(a,i),n[a]=i);return n}function sr(e,t,n){n!=null?e.style.setProperty(t,n):e.style.removeProperty(t)}function Pt(e,t={},n,r){const i={};return r||V(()=>i.children=qe(e,t.children,i.children)),V(()=>typeof t.ref=="function"&&or(t.ref,e)),V(()=>ar(e,t,n,!0,i,!0)),i}function or(e,t,n){return ie(()=>e(t,n))}function b(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return qe(e,t,r,n);V(i=>qe(e,t(),i,n),r)}function ar(e,t,n,r,i={},a=!1){t||(t={});for(const s in i)if(!(s in t)){if(s==="children")continue;i[s]=Ut(e,s,null,i[s],n,a,t)}for(const s in t){if(s==="children")continue;const o=t[s];i[s]=Ut(e,s,o,i[s],n,a,t)}}function lr(e){let t,n;return!_e()||!(t=_.registry.get(n=ur()))?e():(_.completed&&_.completed.add(t),_.registry.delete(n),t)}function _e(e){return!!_.context&&!_.done&&(!e||e.isConnected)}function cr(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function Ft(e,t,n){const r=t.trim().split(/\s+/);for(let i=0,a=r.length;i<a;i++)e.classList.toggle(r[i],n)}function Ut(e,t,n,r,i,a,s){let o,l,c,f,u;if(t==="style")return ir(e,n,r);if(t==="classList")return pn(e,n,r);if(n===r)return r;if(t==="ref")a||n(e);else if(t.slice(0,3)==="on:"){const g=t.slice(3);r&&e.removeEventListener(g,r,typeof r!="function"&&r),n&&e.addEventListener(g,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const g=t.slice(10);r&&e.removeEventListener(g,r,!0),n&&e.addEventListener(g,n,!0)}else if(t.slice(0,2)==="on"){const g=t.slice(2).toLowerCase(),w=Jn.has(g);if(!w&&r){const m=Array.isArray(r)?r[0]:r;e.removeEventListener(g,m)}(w||n)&&(hn(e,g,n,w),w&&pe([g]))}else if(t.slice(0,5)==="attr:")ce(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")rr(e,t.slice(5),n);else if((u=t.slice(0,5)==="prop:")||(c=Bn.has(t))||!i&&((f=Gn(t,e.tagName))||(l=Wn.has(t)))||(o=e.nodeName.includes("-")||"is"in s)){if(u)t=t.slice(5),l=!0;else if(_e(e))return n;t==="class"||t==="className"?X(e,n):o&&!l&&!c?e[cr(t)]=n:e[f||t]=n}else{const g=i&&t.indexOf(":")>-1&&Zn[t.split(":")[0]];g?nr(e,g,t,n):ce(e,Xn[t]||t,n)}return n}function dr(e){if(_.registry&&_.events&&_.events.find(([l,c])=>c===e))return;let t=e.target;const n=`$$${e.type}`,r=e.target,i=e.currentTarget,a=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),s=()=>{const l=t[n];if(l&&!t.disabled){const c=t[`${n}Data`];if(c!==void 0?l.call(t,c,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&a(t.host),!0},o=()=>{for(;s()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),_.registry&&!_.done&&(_.done=_$HY.done=!0),e.composedPath){const l=e.composedPath();a(l[0]);for(let c=0;c<l.length-2&&(t=l[c],!!s());c++){if(t._$host){t=t._$host,o();break}if(t.parentNode===i)break}}else o();a(r)}function qe(e,t,n,r,i){const a=_e(e);if(a){!n&&(n=[...e.childNodes]);let l=[];for(let c=0;c<n.length;c++){const f=n[c];f.nodeType===8&&f.data.slice(0,2)==="!$"?f.remove():l.push(f)}n=l}for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,o=r!==void 0;if(e=o&&n[0]&&n[0].parentNode||e,s==="string"||s==="number"){if(a||s==="number"&&(t=t.toString(),t===n))return n;if(o){let l=n[0];l&&l.nodeType===3?l.data!==t&&(l.data=t):l=document.createTextNode(t),n=Ce(e,n,r,l)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||s==="boolean"){if(a)return n;n=Ce(e,n,r)}else{if(s==="function")return V(()=>{let l=t();for(;typeof l=="function";)l=l();n=qe(e,l,n,r)}),()=>n;if(Array.isArray(t)){const l=[],c=n&&Array.isArray(n);if(xt(l,t,n,i))return V(()=>n=qe(e,l,n,r,!0)),()=>n;if(a){if(!l.length)return n;if(r===void 0)return n=[...e.childNodes];let f=l[0];if(f.parentNode!==e)return n;const u=[f];for(;(f=f.nextSibling)!==r;)u.push(f);return n=u}if(l.length===0){if(n=Ce(e,n,r),o)return n}else c?n.length===0?It(e,l,r):er(e,n,l):(n&&Ce(e),It(e,l));n=l}else if(t.nodeType){if(a&&t.parentNode)return n=o?[t]:t;if(Array.isArray(n)){if(o)return n=Ce(e,n,r,t);Ce(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function xt(e,t,n,r){let i=!1;for(let a=0,s=t.length;a<s;a++){let o=t[a],l=n&&n[e.length],c;if(!(o==null||o===!0||o===!1))if((c=typeof o)=="object"&&o.nodeType)e.push(o);else if(Array.isArray(o))i=xt(e,o,l)||i;else if(c==="function")if(r){for(;typeof o=="function";)o=o();i=xt(e,Array.isArray(o)?o:[o],Array.isArray(l)?l:[l])||i}else e.push(o),i=!0;else{const f=String(o);l&&l.nodeType===3&&l.data===f?e.push(l):e.push(document.createTextNode(f))}}return i}function It(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function Ce(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let a=!1;for(let s=t.length-1;s>=0;s--){const o=t[s];if(i!==o){const l=o.parentNode===e;!a&&!s?l?e.replaceChild(i,o):e.insertBefore(i,n):l&&o.remove()}else a=!0}}else e.insertBefore(i,n);return[i]}function ur(){return _.getNextContextId()}const fr="http://www.w3.org/2000/svg";function yr(e,t=!1,n=void 0){return t?document.createElementNS(fr,e):document.createElement(e,{is:n})}function hr(e,t){const n=G(e);return G(()=>{const r=n();switch(typeof r){case"function":return ie(()=>r(t));case"string":const i=Qn.has(r),a=_.context?lr():yr(r,i,ie(()=>t.is));return Pt(a,t,i),a}})}function gn(e){const[,t]=Ct(e,["component"]);return hr(()=>e.component,t)}const pr="modulepreload",gr=function(e){return"/"+e},qt={},Be=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let s=function(c){return Promise.all(c.map(f=>Promise.resolve(f).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=s(n.map(c=>{if(c=gr(c),c in qt)return;qt[c]=!0;const f=c.endsWith(".css"),u=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":pr,f||(g.as="script"),g.crossOrigin="",g.href=c,l&&g.setAttribute("nonce",l),document.head.appendChild(g),f)return new Promise((w,m)=>{g.addEventListener("load",w),g.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})};/**
* @license lucide-solid v0.475.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var mr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},Pe=mr,br=D("<svg>"),vr=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wr=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),xr=e=>{const[t,n]=Ct(e,["color","size","strokeWidth","children","class","name","iconNode","absoluteStrokeWidth"]);return(()=>{var r=br();return Pt(r,M(Pe,{get width(){return t.size??Pe.width},get height(){return t.size??Pe.height},get stroke(){return t.color??Pe.stroke},get"stroke-width"(){return Te(()=>!!t.absoluteStrokeWidth)()?Number(t.strokeWidth??Pe["stroke-width"])*24/Number(t.size):Number(t.strokeWidth??Pe["stroke-width"])},get class(){return wr("lucide","lucide-icon",t.name!=null?`lucide-${vr(t==null?void 0:t.name)}`:void 0,t.class!=null?t.class:"")}},n),!0,!0),b(r,h(We,{get each(){return t.iconNode},children:([i,a])=>h(gn,M({component:i},a))})),r})()},L=xr,kr=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],$r=e=>h(L,M(e,{name:"Check",iconNode:kr})),Sr=$r,_r=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ar=e=>h(L,M(e,{name:"ChevronDown",iconNode:_r})),Cr=Ar,Pr=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Nr=e=>h(L,M(e,{name:"ChevronLeft",iconNode:Pr})),Tr=Nr,Er=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Mr=e=>h(L,M(e,{name:"ChevronRight",iconNode:Er})),Dr=Mr,Lr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],zr=e=>h(L,M(e,{name:"CircleAlert",iconNode:Lr})),Or=zr,jr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Rr=e=>h(L,M(e,{name:"CircleCheck",iconNode:jr})),Fr=Rr,Ur=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],Ir=e=>h(L,M(e,{name:"CirclePlay",iconNode:Ur})),qr=Ir,Kr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Yr=e=>h(L,M(e,{name:"CirclePlus",iconNode:Kr})),Vr=Yr,Wr=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],Br=e=>h(L,M(e,{name:"CloudDownload",iconNode:Wr})),Xr=Br,Hr=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Gr=e=>h(L,M(e,{name:"Database",iconNode:Hr})),Jr=Gr,Qr=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Zr=e=>h(L,M(e,{name:"ExternalLink",iconNode:Qr})),ei=Zr,ti=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ni=e=>h(L,M(e,{name:"EyeOff",iconNode:ti})),ri=ni,ii=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],si=e=>h(L,M(e,{name:"Eye",iconNode:ii})),oi=si,ai=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],li=e=>h(L,M(e,{name:"Film",iconNode:ai})),ci=li,di=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],ui=e=>h(L,M(e,{name:"Filter",iconNode:di})),fi=ui,yi=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],hi=e=>h(L,M(e,{name:"History",iconNode:yi})),pi=hi,gi=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],mi=e=>h(L,M(e,{name:"Layers",iconNode:gi})),bi=mi,vi=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],wi=e=>h(L,M(e,{name:"LayoutDashboard",iconNode:vi})),xi=wi,ki=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],$i=e=>h(L,M(e,{name:"Loader",iconNode:ki})),Si=$i,_i=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],Ai=e=>h(L,M(e,{name:"Maximize2",iconNode:_i})),Ci=Ai,Pi=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Ni=e=>h(L,M(e,{name:"Music",iconNode:Pi})),Ti=Ni,Ei=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Mi=e=>h(L,M(e,{name:"Pause",iconNode:Ei})),Di=Mi,Li=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],zi=e=>h(L,M(e,{name:"Pencil",iconNode:Li})),Oi=zi,ji=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Ri=e=>h(L,M(e,{name:"Play",iconNode:ji})),Fi=Ri,Ui=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],Ii=e=>h(L,M(e,{name:"Puzzle",iconNode:Ui})),qi=Ii,Ki=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Yi=e=>h(L,M(e,{name:"Search",iconNode:Ki})),Vi=Yi,Wi=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Bi=e=>h(L,M(e,{name:"Settings2",iconNode:Wi})),Xi=Bi,Hi=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Gi=e=>h(L,M(e,{name:"ShieldCheck",iconNode:Hi})),Ji=Gi,Qi=[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]],Zi=e=>h(L,M(e,{name:"SkipBack",iconNode:Qi})),es=Zi,ts=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],ns=e=>h(L,M(e,{name:"SkipForward",iconNode:ts})),rs=ns,is=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],ss=e=>h(L,M(e,{name:"SlidersVertical",iconNode:is})),os=ss,as=[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]],ls=e=>h(L,M(e,{name:"Terminal",iconNode:as})),cs=ls,ds=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],us=e=>h(L,M(e,{name:"Trash2",iconNode:ds})),fs=us,ys=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],hs=e=>h(L,M(e,{name:"User",iconNode:ys})),ps=hs,gs=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ms=e=>h(L,M(e,{name:"X",iconNode:gs})),bs=ms,vs=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ws=e=>h(L,M(e,{name:"Zap",iconNode:vs})),xs=ws;const Kt={zap:xs,"plus-circle":Vr,layers:bi,sliders:os,puzzle:qi,"chevron-down":Cr,"trash-2":fs,"download-cloud":Xr,music:Ti,"shield-check":Ji,database:Jr,"alert-circle":Or,"check-circle-2":Fr,loader:Si,terminal:cs,search:Vi,filter:fi,film:ci,play:Fi,"external-link":ei,x:bs,"play-circle":qr,"skip-back":es,pause:Di,"skip-forward":rs,"layout-dashboard":xi,history:pi,"chevron-right":Dr,"chevron-left":Tr,eye:oi,"eye-off":ri,pencil:Oi,check:Sr,"settings-2":Xi,user:ps,"maximize-2":Ci};function H(e){const t=Kt[e.name]||Kt["alert-circle"];return h(gn,{component:t,get class(){return e.class}})}const kt=Symbol("store-raw"),Ee=Symbol("store-node"),ue=Symbol("store-has"),mn=Symbol("store-self");function bn(e){let t=e[le];if(!t&&(Object.defineProperty(e,le,{value:t=new Proxy(e,Ss)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,a=n.length;i<a;i++){const s=n[i];r[s].get&&Object.defineProperty(e,s,{enumerable:r[s].enumerable,get:r[s].get.bind(t)})}}return t}function nt(e){let t;return e!=null&&typeof e=="object"&&(e[le]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function Ke(e,t=new Set){let n,r,i,a;if(n=e!=null&&e[kt])return n;if(!nt(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let s=0,o=e.length;s<o;s++)i=e[s],(r=Ke(i,t))!==i&&(e[s]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const s=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let l=0,c=s.length;l<c;l++)a=s[l],!o[a].get&&(i=e[a],(r=Ke(i,t))!==i&&(e[a]=r))}return e}function rt(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function Ye(e,t,n){if(e[t])return e[t];const[r,i]=ne(n,{equals:!1,internal:!0});return r.$=i,e[t]=r}function ks(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===le||t===Ee||(delete n.value,delete n.writable,n.get=()=>e[le][t]),n}function vn(e){mt()&&Ye(rt(e,Ee),mn)()}function $s(e){return vn(e),Reflect.ownKeys(e)}const Ss={get(e,t,n){if(t===kt)return e;if(t===le)return n;if(t===gt)return vn(e),n;const r=rt(e,Ee),i=r[t];let a=i?i():e[t];if(t===Ee||t===ue||t==="__proto__")return a;if(!i){const s=Object.getOwnPropertyDescriptor(e,t);mt()&&(typeof a!="function"||e.hasOwnProperty(t))&&!(s&&s.get)&&(a=Ye(r,t,a)())}return nt(a)?bn(a):a},has(e,t){return t===kt||t===le||t===gt||t===Ee||t===ue||t==="__proto__"?!0:(mt()&&Ye(rt(e,ue),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:$s,getOwnPropertyDescriptor:ks};function it(e,t,n,r=!1){if(!r&&e[t]===n)return;const i=e[t],a=e.length;n===void 0?(delete e[t],e[ue]&&e[ue][t]&&i!==void 0&&e[ue][t].$()):(e[t]=n,e[ue]&&e[ue][t]&&i===void 0&&e[ue][t].$());let s=rt(e,Ee),o;if((o=Ye(s,t,i))&&o.$(()=>n),Array.isArray(e)&&e.length!==a){for(let l=e.length;l<a;l++)(o=s[l])&&o.$();(o=Ye(s,"length",a))&&o.$(e.length)}(o=s[mn])&&o.$()}function wn(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const i=n[r];it(e,i,t[i])}}function _s(e,t){if(typeof t=="function"&&(t=t(e)),t=Ke(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const i=t[n];e[n]!==i&&it(e,n,i)}it(e,"length",r)}else wn(e,t)}function je(e,t,n=[]){let r,i=e;if(t.length>1){r=t.shift();const s=typeof r,o=Array.isArray(e);if(Array.isArray(r)){for(let l=0;l<r.length;l++)je(e,[r[l]].concat(t),n);return}else if(o&&s==="function"){for(let l=0;l<e.length;l++)r(e[l],l)&&je(e,[l].concat(t),n);return}else if(o&&s==="object"){const{from:l=0,to:c=e.length-1,by:f=1}=r;for(let u=l;u<=c;u+=f)je(e,[u].concat(t),n);return}else if(t.length>1){je(e[r],t,[r].concat(n));return}i=e[r],n=[r].concat(n)}let a=t[0];typeof a=="function"&&(a=a(i,n),a===i)||r===void 0&&a==null||(a=Ke(a),r===void 0||nt(i)&&nt(a)&&!Array.isArray(a)?wn(i,a):it(e,r,a))}function xn(...[e,t]){const n=Ke(e||{}),r=Array.isArray(n),i=bn(n);function a(...s){cn(()=>{r&&s.length===1?_s(n,s[0]):je(n,s)})}return[i,a]}const[de,Q]=xn({activeDownloads:{},jobStatuses:{},logs:[],notification:null,lastJobId:null,error:null}),As=e=>{Q("activeDownloads",e.id,t=>({...t,...e,done:e.status==="complete"||e.percent>=100}))},Cs=e=>{Q("activeDownloads",e.id,t=>({...t,status:"error",error:e.message})),Q("error",e)};var Ps=D('<div class="space-y-3 overflow-y-auto custom-scrollbar flex-1 pr-2 max-h-[300px]"style="mask-image:linear-gradient(to bottom, black 0%, black 85%, transparent 100%);-webkit-mask-image:linear-gradient(to bottom, black 0%, black 85%, transparent 100%)">'),Ns=D('<div class="rounded-[2rem] border border-white/5 bg-black/20 p-6 flex flex-col gap-4 h-full"><div class="flex items-center justify-between"><h3 class="text-lg font-bold text-white flex items-center gap-2">Active Downloads'),Ts=D('<div class="flex flex-col items-center justify-center flex-1 py-12 text-gray-500 gap-3"><span class="text-xs font-bold uppercase tracking-widest">No active tasks'),Es=D('<div class="text-[10px] text-red-400 font-mono break-all">'),Ms=D('<div class="text-[10px] text-slate-500 text-right">ETA: '),Ds=D('<div class="rounded-xl border border-white/5 bg-white/5 p-3 space-y-2 transition-all duration-300"><div class="flex justify-between items-center text-xs"><span class="font-bold text-slate-200 truncate max-w-[70%]"></span><span></span></div><div class="h-1.5 w-full rounded-full bg-black/40 overflow-hidden"><div>');function Ls(){const e=G(()=>Object.values(de.activeDownloads).sort((r,i)=>r.done!==i.done?r.done?1:-1:(r.filename||r.id).localeCompare(i.filename||i.id))),t=G(()=>e().length>0);return(()=>{var n=Ns(),r=n.firstChild,i=r.firstChild,a=i.firstChild;return b(i,h(H,{name:"download-cloud",class:"w-5 h-5 text-accent-primary"}),a),b(n,h(Z,{get when(){return t()},get fallback(){return(()=>{var s=Ts(),o=s.firstChild;return b(s,h(H,{name:"check-circle-2",class:"w-10 h-10 opacity-20"}),o),s})()},get children(){var s=Ps();return b(s,h(We,{get each(){return e()},children:o=>(()=>{var l=Ds(),c=l.firstChild,f=c.firstChild,u=f.nextSibling,g=c.nextSibling,w=g.firstChild;return b(f,()=>o.filename||o.id),b(u,(()=>{var m=Te(()=>o.status==="error");return()=>m()?"Error":Te(()=>o.percent!==void 0)()?`${o.percent.toFixed(1)}%`:"0.0%"})()),b(l,h(Z,{get when(){return o.status==="error"},get children(){var m=Es();return b(m,()=>o.error),m}}),g),b(l,h(Z,{get when(){return Te(()=>!!(o.eta&&!o.done))()&&o.status!=="error"},get children(){var m=Ms();return m.firstChild,b(m,()=>o.eta,null),m}}),null),V(m=>{var x={"opacity-0 scale-95":o.done,"opacity-100 scale-100":!o.done},N=`font-mono ${o.status==="error"?"text-red-400":o.done?"text-emerald-400":"text-accent-primary"}`,T=`h-full transition-all duration-300 ${o.status==="error"?"bg-red-500":o.done?"bg-emerald-500":"bg-vibrant-gradient"}`,E=`${o.percent||0}%`;return m.e=pn(l,x,m.e),N!==m.t&&X(u,m.t=N),T!==m.a&&X(w,m.a=T),E!==m.o&&sr(w,"width",m.o=E),m},{e:void 0,t:void 0,a:void 0,o:void 0}),l})()})),s}}),null),n})()}var zs=D('<div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">'),me=D("<div>"),Os=D("<div><div class=h-full>");function js(e){return(()=>{var t=zs(),n=t.firstChild;return b(n,()=>e.children),V(()=>X(t,`relative ${e.class||""}`)),t})()}function Rs(e){const t=()=>{switch(e.span){case 2:return"lg:col-span-2";case 3:return"lg:col-span-3";case 4:return"lg:col-span-4";default:return"lg:col-span-1"}},n=(i,a)=>{i.preventDefault(),i.stopPropagation(),e.onResizeStart&&e.onResizeStart(e.widgetId,a,i)},r=i=>({n:"cursor-n-resize",s:"cursor-s-resize",e:"cursor-e-resize",w:"cursor-w-resize",ne:"cursor-ne-resize",nw:"cursor-nw-resize",se:"cursor-se-resize",sw:"cursor-sw-resize"})[i]||"";return(()=>{var i=Os(),a=i.firstChild;return b(i,h(Z,{get when(){return e.isEditMode},get children(){return[(()=>{var s=me();return s.$$mousedown=o=>n(o,"n"),V(()=>X(s,`absolute top-0 left-2 right-2 h-2 ${r("n")} resize-handle opacity-0 group-hover:opacity-100 transition-opacity rounded-t-lg`)),s})(),(()=>{var s=me();return s.$$mousedown=o=>n(o,"s"),V(()=>X(s,`absolute bottom-0 left-2 right-2 h-2 ${r("s")} resize-handle opacity-0 group-hover:opacity-100 transition-opacity rounded-b-lg`)),s})(),(()=>{var s=me();return s.$$mousedown=o=>n(o,"w"),V(()=>X(s,`absolute top-2 left-0 bottom-2 w-2 ${r("w")} resize-handle opacity-0 group-hover:opacity-100 transition-opacity rounded-l-lg`)),s})(),(()=>{var s=me();return s.$$mousedown=o=>n(o,"e"),V(()=>X(s,`absolute top-2 right-0 bottom-2 w-2 ${r("e")} resize-handle opacity-0 group-hover:opacity-100 transition-opacity rounded-r-lg`)),s})(),(()=>{var s=me();return s.$$mousedown=o=>n(o,"nw"),V(()=>X(s,`absolute top-0 left-0 w-4 h-4 ${r("nw")} resize-handle opacity-0 group-hover:opacity-100 transition-opacity rounded-tl-lg`)),s})(),(()=>{var s=me();return s.$$mousedown=o=>n(o,"ne"),V(()=>X(s,`absolute top-0 right-0 w-4 h-4 ${r("ne")} resize-handle opacity-0 group-hover:opacity-100 transition-opacity rounded-tr-lg`)),s})(),(()=>{var s=me();return s.$$mousedown=o=>n(o,"sw"),V(()=>X(s,`absolute bottom-0 left-0 w-4 h-4 ${r("sw")} resize-handle opacity-0 group-hover:opacity-100 transition-opacity rounded-bl-lg`)),s})(),(()=>{var s=me();return s.$$mousedown=o=>n(o,"se"),V(()=>X(s,`absolute bottom-0 right-0 w-4 h-4 ${r("se")} resize-handle opacity-0 group-hover:opacity-100 transition-opacity rounded-br-lg`)),s})()]}}),a),b(a,()=>e.children),V(s=>{var o=`${t()} ${e.class||""} relative group`,l=e.widgetId;return o!==s.e&&X(i,s.e=o),l!==s.t&&ce(i,"data-widget-id",s.t=l),s},{e:void 0,t:void 0}),i})()}pe(["mousedown"]);const lt="/logo.png";var Fs=D('<div class="rounded-[2rem] border border-accent-primary/20 glass-vibrant p-8 relative overflow-hidden group h-full"><div class="absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity duration-500"><img alt="ytdl-go logo"class="w-48 h-48 rotate-12 object-contain"></div><div class="relative z-10 space-y-4"><h1 class="text-4xl font-black text-white tracking-tight">Welcome Back!</h1><p class="text-lg text-gray-300 max-w-lg">Your media library is ready. You have <span class="text-white font-bold"> items</span> across <span class="text-white font-bold"> creators</span>.</p><div class="flex flex-wrap gap-3 pt-4"><button class="px-6 py-3 rounded-xl bg-white text-black font-black uppercase tracking-widest hover:scale-105 transition-transform shadow-lg flex items-center gap-2">New Download</button><button class="px-6 py-3 rounded-xl bg-black/40 text-white border border-white/10 font-black uppercase tracking-widest hover:bg-black/60 transition-colors flex items-center gap-2">Browse Library');function Us(e){return(()=>{var t=Fs(),n=t.firstChild,r=n.firstChild,i=n.nextSibling,a=i.firstChild,s=a.nextSibling,o=s.firstChild,l=o.nextSibling,c=l.firstChild,f=l.nextSibling,u=f.nextSibling,g=u.firstChild,w=s.nextSibling,m=w.firstChild,x=m.firstChild,N=m.nextSibling,T=N.firstChild;return ce(r,"src",lt),b(l,()=>{var E;return((E=e.stats)==null?void 0:E.totalItems)||0},c),b(u,()=>{var E;return((E=e.stats)==null?void 0:E.totalCreators)||0},g),m.$$click=()=>e.onTabChange("download"),b(m,h(H,{name:"plus-circle",class:"w-4 h-4"}),x),N.$$click=()=>e.onTabChange("library"),b(N,h(H,{name:"layers",class:"w-4 h-4"}),T),t})()}pe(["click"]);var Is=D('<div class="rounded-[2rem] border border-white/5 bg-black/20 p-6 flex flex-col justify-center gap-4 h-full"><h3 class="text-sm font-bold text-gray-400 uppercase tracking-widest">Library Stats</h3><div class="grid grid-cols-2 gap-4"><div class="p-4 rounded-2xl bg-white/5 border border-white/5"><div class="text-3xl font-black text-accent-primary"></div><div class="text-[10px] font-bold text-gray-500 uppercase">Creators</div></div><div class="p-4 rounded-2xl bg-white/5 border border-white/5"><div class="text-3xl font-black text-accent-secondary"></div><div class="text-[10px] font-bold text-gray-500 uppercase">Media Files');function qs(e){return(()=>{var t=Is(),n=t.firstChild,r=n.nextSibling,i=r.firstChild,a=i.firstChild,s=i.nextSibling,o=s.firstChild;return b(a,()=>{var l;return((l=e.stats)==null?void 0:l.totalCreators)||0}),b(o,()=>{var l;return((l=e.stats)==null?void 0:l.totalItems)||0}),t})()}var Ks=D('<img class="w-full h-full object-cover transition-smooth group-hover/thumb:scale-105"loading=lazy>',!0,!1,!1),Ys=D('<div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover/thumb:opacity-100 transition-smooth">'),Vs=D("<div>"),Ws=D('<div class="absolute inset-0 flex items-center justify-center text-gray-700">');function Bs(e){const[t,n]=Ct(e,["src","alt","class","size"]),r={sm:"aspect-video w-24",md:"aspect-video w-full",lg:"aspect-video w-full max-w-2xl"}[t.size||"md"];return(()=>{var i=Vs();return Pt(i,M({get class(){return`relative rounded-xl overflow-hidden bg-bg-surface-soft group/thumb ${r} ${t.class||""}`}},n),!1,!0),b(i,h(Z,{get when(){return t.src},get fallback(){return(()=>{var a=Ws();return b(a,h(H,{name:"image",class:"w-8 h-8"})),a})()},get children(){return[(()=>{var a=Ks();return V(s=>{var o=t.src,l=t.alt||"Video thumbnail";return o!==s.e&&ce(a,"src",s.e=o),l!==s.t&&ce(a,"alt",s.t=l),s},{e:void 0,t:void 0}),a})(),Ys()]}})),i})()}var Xs=D('<div class="w-full py-16 flex flex-col items-center justify-center text-center gap-4 bg-black/20 rounded-2xl border border-dashed border-white/10"><img alt="Empty Library"class="w-24 h-24 opacity-20 grayscale brightness-50"><div class=space-y-1><p class="text-white/40 font-black uppercase tracking-widest text-xs">Nothing here yet!</p><p class="text-gray-600 font-bold text-[10px] uppercase tracking-tighter italic">Feed me URLs!'),Hs=D('<div class=space-y-4><div class="flex items-center justify-between px-2"><div class="flex items-center gap-2"><h2 class="text-xl font-bold text-white">Recent Additions</h2></div><button class="text-xs font-bold text-accent-primary hover:text-white transition-colors flex items-center gap-1">See All</button></div><div class="relative group/carousel"><div class="flex gap-4 overflow-x-auto pb-4 pt-2 px-2 custom-scrollbar snap-x scroll-smooth">'),Gs=D('<div class="flex-shrink-0 w-72 flex flex-col gap-3 p-4 rounded-2xl border border-white/5 bg-black/20 hover:border-accent-primary/40 hover:bg-black/40 transition-all group cursor-pointer snap-start"><div class="relative aspect-video rounded-xl overflow-hidden shadow-lg group-hover:scale-[1.02] transition-transform"><div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"><div class="w-10 h-10 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center text-white border border-white/30"></div></div><div class="absolute top-2 right-2 px-2 py-0.5 rounded-full bg-black/60 backdrop-blur-md border border-white/10 text-[9px] font-black uppercase tracking-widest text-white/90"></div></div><div class="min-w-0 space-y-1"><h4 class="font-bold text-white truncate text-sm leading-snug"></h4><div class="flex items-center justify-between gap-2"><p class="text-xs text-accent-primary/80 truncate font-semibold"></p><span class="text-[10px] text-gray-600 font-medium whitespace-nowrap">');function Js(e){return(()=>{var t=Hs(),n=t.firstChild,r=n.firstChild;r.firstChild;var i=r.nextSibling;i.firstChild;var a=n.nextSibling,s=a.firstChild;return b(r,h(H,{name:"history",class:"w-4 h-4 text-accent-primary/60"}),null),i.$$click=()=>e.onTabChange("library"),b(i,h(H,{name:"chevron-right",class:"w-3 h-3"}),null),b(s,h(We,{get each(){var o;return((o=e.stats)==null?void 0:o.recentItems)||[]},children:o=>(()=>{var l=Gs(),c=l.firstChild,f=c.firstChild,u=f.firstChild,g=f.nextSibling,w=c.nextSibling,m=w.firstChild,x=m.nextSibling,N=x.firstChild,T=N.nextSibling;return l.$$click=()=>{var E;return(E=e.onPlay)==null?void 0:E.call(e,o)},b(c,h(Bs,{get src(){return o.thumbnailUrl},get alt(){return o.title},size:"md",class:"w-full h-full"}),f),b(u,h(H,{name:"play",class:"w-5 h-5 fill-current"})),b(g,()=>o.type),b(m,()=>o.title),b(N,()=>o.creator),b(T,()=>o.date||"Just now"),l})()}),null),b(s,h(Z,{get when(){var o,l;return!((l=(o=e.stats)==null?void 0:o.recentItems)!=null&&l.length)},get children(){var o=Xs(),l=o.firstChild;return ce(l,"src",lt),o}}),null),t})()}pe(["click"]);var Qs=D('<div class="rounded-[2rem] border border-dashed border-white/10 bg-black/20 p-6 h-[148px] animate-pulse">'),Zs=D("<div class=h-full>"),eo=D('<button class="flex items-center gap-2 px-3 py-2 rounded-xl border border-white/10 bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white transition-all text-xs font-bold">Reset'),to=D('<div class="transition-smooth animate-in fade-in slide-in-from-right-4 duration-500 space-y-6"><div class="flex items-center justify-between px-2"><div class="flex items-center gap-2"><div></div><span class="text-xs font-black uppercase tracking-widest text-gray-500"></span></div><div class="flex items-center gap-2"><button>'),no=D("<div>");const ro=Ve(()=>Be(()=>import("./assets/QuickDownload-Bvr-m2tr.js"),[])),ut="ytdl-go:dashboard-layout:v2",io="ytdl-go:dashboard-layout:v1",Yt=[{id:"welcome",span:4,enabled:!0,x:0,y:0,width:4,height:2},{id:"quick-download",span:3,enabled:!0,x:0,y:2,width:3,height:2},{id:"active-downloads",span:1,enabled:!0,x:3,y:2,width:1,height:2},{id:"recent-activity",span:3,enabled:!0,x:0,y:4,width:3,height:2},{id:"stats",span:1,enabled:!0,x:3,y:4,width:1,height:2}];function so(e){let t=!1;const[n,r]=ne(!1),[i,a]=ne([...Yt]),[s,o]=ne({isDragging:!1,widgetId:null,startX:0,startY:0,originalX:0,originalY:0,currentX:0,currentY:0}),[l,c]=ne({isResizing:!1,widgetId:null,direction:null,startX:0,startY:0,originalWidth:0,originalHeight:0,originalX:0,originalY:0,currentWidth:0,currentHeight:0,currentX:0,currentY:0}),f=y=>{let p=0,k=0;return y.map(S=>{const z=S.span||1;p+z>4&&(p=0,k+=2);const Y={...S,x:p,y:k,width:z,height:2};return p+=z,p>=4&&(p=0,k+=2),Y})};St(()=>{if(typeof localStorage>"u"||typeof localStorage.getItem!="function")return;let y=localStorage.getItem(ut);if(y)try{const d=JSON.parse(y);if(Array.isArray(d)){a(d),queueMicrotask(()=>{t=!0});return}}catch(d){console.warn("Failed to load new dashboard layout:",d)}if(y=localStorage.getItem(io),y)try{const d=JSON.parse(y);if(Array.isArray(d)){const p=f(d);a(p),localStorage.setItem(ut,JSON.stringify(p))}}catch(d){console.warn("Failed to load legacy dashboard layout:",d)}queueMicrotask(()=>{t=!0})}),Ue(()=>{const y=i();t&&typeof localStorage<"u"&&typeof localStorage.setItem=="function"&&localStorage.setItem(ut,JSON.stringify(y))});const u=G(()=>typeof e.libraryModel=="function"?e.libraryModel():e.libraryModel),g=G(()=>{var d,p,k,S,z;const y=u();return{totalItems:((d=y==null?void 0:y.items)==null?void 0:d.length)||0,totalCreators:(((p=y==null?void 0:y.artists)==null?void 0:p.length)||0)+(((k=y==null?void 0:y.videos)==null?void 0:k.length)||0)+(((S=y==null?void 0:y.podcasts)==null?void 0:S.length)||0),recentItems:((z=y==null?void 0:y.items)==null?void 0:z.slice(0,4))||[]}}),w=y=>{e.onDownload&&e.onDownload(y)},m=()=>{a([...Yt])},x=(y,d)=>{if(!n())return;const p=i().find(k=>k.id===y);p&&(document.addEventListener("mousemove",$),document.addEventListener("mouseup",B),document.body.style.userSelect="none",document.body.style.cursor="grabbing",o({isDragging:!0,widgetId:y,startX:d.clientX,startY:d.clientY,originalX:p.x,originalY:p.y,currentX:p.x,currentY:p.y}),d.preventDefault())},N=y=>{const d=s();if(!d.isDragging)return;const p=Math.round((y.clientX-d.startX)/100),k=Math.round((y.clientY-d.startY)/100),S=i().find(J=>J.id===d.widgetId),z=(S==null?void 0:S.width)||1,Y=Math.max(0,Math.min(4-z,d.originalX+p)),j=Math.max(0,d.originalY+k);o(J=>({...J,currentX:Y,currentY:j}))},T=()=>{const y=s();y.isDragging&&(a(d=>d.map(p=>p.id===y.widgetId?{...p,x:y.currentX,y:y.currentY}:p)),o({isDragging:!1,widgetId:null,startX:0,startY:0,originalX:0,originalY:0,currentX:0,currentY:0}),l().isResizing||(document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",B),document.body.style.userSelect="",document.body.style.cursor=""))},E=(y,d,p)=>{if(!n())return;const k=i().find(S=>S.id===y);k&&(document.addEventListener("mousemove",$),document.addEventListener("mouseup",B),document.body.style.userSelect="none",document.body.style.cursor=C(d),c({isResizing:!0,widgetId:y,direction:d,startX:p.clientX,startY:p.clientY,originalWidth:k.width,originalHeight:k.height,originalX:k.x,originalY:k.y,currentWidth:k.width,currentHeight:k.height,currentX:k.x,currentY:k.y}),p.preventDefault())},K=y=>{const d=l();if(!d.isResizing)return;const p=Math.round((y.clientX-d.startX)/100),k=Math.round((y.clientY-d.startY)/100);let S=d.originalWidth,z=d.originalHeight,Y=d.originalX,j=d.originalY;d.direction.includes("e")&&(S=Math.max(1,Math.min(4-d.originalX,d.originalWidth+p))),d.direction.includes("w")&&(S=Math.max(1,Math.min(d.originalX+d.originalWidth,d.originalWidth-p)),Y=d.originalX+d.originalWidth-S),d.direction.includes("s")&&(z=Math.max(1,d.originalHeight+k)),d.direction.includes("n")&&(z=Math.max(1,d.originalHeight-k),j=d.originalY+d.originalHeight-z),c(J=>({...J,currentWidth:S,currentHeight:z,currentX:Y,currentY:j}))},U=()=>{const y=l();y.isResizing&&(a(d=>d.map(p=>p.id===y.widgetId?{...p,width:y.currentWidth,height:y.currentHeight,x:y.currentX,y:y.currentY,span:y.currentWidth}:p)),c({isResizing:!1,widgetId:null,direction:null,startX:0,startY:0,originalWidth:0,originalHeight:0,originalX:0,originalY:0,currentWidth:0,currentHeight:0,currentX:0,currentY:0}),s().isDragging||(document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",B),document.body.style.userSelect="",document.body.style.cursor=""))},$=y=>{N(y),K(y)},B=()=>{T(),U()},C=y=>({n:"ns-resize",s:"ns-resize",e:"ew-resize",w:"ew-resize",ne:"nesw-resize",sw:"nesw-resize",nw:"nwse-resize",se:"nwse-resize"})[y]||"nwse-resize";$e(()=>{document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",B),document.body.style.userSelect="",document.body.style.cursor=""});const A=y=>{switch(y.id){case"welcome":return h(Us,{get stats(){return g()},get onTabChange(){return e.onTabChange}});case"quick-download":return h(wt,{get fallback(){return Qs()},get children(){return h(ro,{onDownload:w,get onTabChange(){return e.onTabChange}})}});case"active-downloads":return(()=>{var d=Zs();return b(d,h(Ls,{})),d})();case"recent-activity":return h(Js,{get stats(){return g()},get onTabChange(){return e.onTabChange},get onPlay(){return e.onPlay}});case"stats":return h(qs,{get stats(){return g()}});default:return null}};return(()=>{var y=to(),d=y.firstChild,p=d.firstChild,k=p.firstChild,S=k.nextSibling,z=p.nextSibling,Y=z.firstChild;return b(S,()=>n()?"Dashboard: Edit Mode":"Dashboard"),b(z,h(Z,{get when(){return n()},get children(){var j=eo(),J=j.firstChild;return j.$$click=m,b(j,h(H,{name:"refresh-cw",class:"w-3.5 h-3.5"}),J),j}}),Y),Y.$$click=()=>r(!n()),b(Y,h(H,{get name(){return n()?"check":"pencil"},class:"w-3.5 h-3.5"}),null),b(Y,()=>n()?"Done":"Edit Layout",null),b(y,h(js,{get children(){return h(We,{get each(){return i()},children:j=>h(Z,{get when(){return j.enabled||n()},get children(){return h(Rs,{get span(){return j.width||j.span},get widgetId(){return j.id},get isEditMode(){return n()},onResizeStart:E,get class(){return`relative group/widget transition-all duration-500 ${n()?"scale-[0.98] ring-2 ring-dashed ring-white/10 rounded-[2.2rem] p-1":""} ${s().isDragging&&s().widgetId===j.id?"opacity-50":""} ${l().isResizing&&l().widgetId===j.id?"ring-2 ring-accent-primary":""}`},get style(){return Te(()=>!!(s().isDragging&&s().widgetId===j.id))()?{transform:`translate(${(s().currentX-s().originalX)*100}px, ${(s().currentY-s().originalY)*100}px)`,"z-index":1e3}:Te(()=>!!(l().isResizing&&l().widgetId===j.id))()?{width:`${l().currentWidth*25}%`,height:`${l().currentHeight*100}px`,"z-index":999}:{}},get children(){var J=no();return J.$$mousedown=Ae=>x(j.id,Ae),b(J,()=>A(j)),V(()=>X(J,`${n()&&!j.enabled?"opacity-30":""} h-full ${n()?"cursor-move":""}`)),J}})}})})}}),null),V(j=>{var J=`w-2 h-2 rounded-full ${n()?"bg-amber-500 animate-pulse":"bg-accent-primary"}`,Ae=`flex items-center gap-2 px-4 py-2 rounded-xl border transition-all duration-300 text-xs font-bold ${n()?"bg-amber-500/20 border-amber-500/30 text-amber-400":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10 hover:text-white"}`;return J!==j.e&&X(k,j.e=J),Ae!==j.t&&X(Y,j.t=Ae),j},{e:void 0,t:void 0}),y})()}pe(["click","mousedown"]);var oo=D('<aside class="w-72 bg-bg-surface/85 border-r border-white/10 flex flex-col p-6 backdrop-blur-xl transition-all duration-300"><div class="flex items-center gap-3 mb-10 px-2"><div class="w-10 h-10 bg-accent-primary/10 rounded-2xl flex items-center justify-center shadow-lg shadow-accent-primary/5 overflow-hidden border border-accent-primary/20"><img alt="ytdl-go logo"class="w-8 h-8 object-contain brightness-0 invert opacity-80"></div><span class="text-xl font-black tracking-tight text-transparent bg-clip-text bg-vibrant-gradient">ytdl-go</span></div><nav class="flex-1 space-y-2"><button><span class="font-bold text-sm">Dashboard</span></button><div class="pt-4 pb-2 px-4 text-xs font-bold text-gray-600 uppercase tracking-widest">Media</div><button><span class="font-bold text-sm">New Download</span></button><button><span class="font-bold text-sm">Library</span></button><div class="pt-4 pb-2 px-4 text-xs font-bold text-gray-600 uppercase tracking-widest">System</div><button><span class="font-bold text-sm">Settings</span></button></nav><div class="mt-auto relative has-tooltip"><span class="tooltip bg-bg-surface-soft text-[10px] px-2 py-1 rounded shadow-xl mb-4 border border-white/10 w-56 text-center leading-relaxed">Coming Soon: extension provider management and health status.</span><button type=button disabled aria-disabled=true aria-label="Extensions panel (Coming Soon)"class="w-full p-4 bg-white/5 rounded-2xl border border-white/5 opacity-70 cursor-not-allowed text-left hover:bg-white/10 transition-colors"><div class="flex items-center gap-2 mb-2 text-xs font-bold text-gray-500 uppercase tracking-widest">Extensions</div><div class="flex items-center justify-between text-xs"><span class=text-gray-500>PO Token Provider</span><span class="px-2 py-0.5 bg-white/10 text-gray-500 rounded-full font-bold border border-white/10">Coming Soon');function ao(e){const t=()=>e.activeTab;return(()=>{var n=oo(),r=n.firstChild,i=r.firstChild,a=i.firstChild,s=r.nextSibling,o=s.firstChild,l=o.firstChild,c=o.nextSibling,f=c.nextSibling,u=f.firstChild,g=f.nextSibling,w=g.firstChild,m=g.nextSibling,x=m.nextSibling,N=x.firstChild,T=s.nextSibling,E=T.firstChild,K=E.nextSibling,U=K.firstChild,$=U.firstChild;return ce(a,"src",lt),o.$$click=()=>e.onTabChange("dashboard"),b(o,h(H,{name:"layout-dashboard",class:"w-5 h-5"}),l),f.$$click=()=>e.onTabChange("download"),b(f,h(H,{name:"plus-circle",class:"w-5 h-5"}),u),g.$$click=()=>e.onTabChange("library"),b(g,h(H,{name:"layers",class:"w-5 h-5"}),w),x.$$click=()=>e.onTabChange("settings"),b(x,h(H,{name:"sliders",class:"w-5 h-5"}),N),b(U,h(H,{name:"puzzle",class:"w-3 h-3"}),$),V(B=>{var C=`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${t()==="dashboard"?"bg-accent-primary/10 text-accent-secondary shadow-sm shadow-accent-primary/5":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,A=`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${t()==="download"?"bg-accent-primary/10 text-accent-secondary shadow-sm shadow-accent-primary/5":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,y=`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${t()==="library"?"bg-accent-primary/10 text-accent-secondary shadow-sm shadow-accent-primary/5":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,d=`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${t()==="settings"?"bg-accent-primary/10 text-accent-secondary shadow-sm shadow-accent-primary/5":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`;return C!==B.e&&X(o,B.e=C),A!==B.t&&X(f,B.t=A),y!==B.a&&X(g,B.a=y),d!==B.o&&X(x,B.o=d),B},{e:void 0,t:void 0,a:void 0,o:void 0}),n})()}pe(["click"]);var lo=D('<header class="h-24 px-10 flex items-center justify-between border-b border-white/5 bg-transparent backdrop-blur-sm z-20"><div class="flex items-center gap-4"><h2 class="text-2xl font-black text-white tracking-tighter uppercase leading-none"></h2><div class="h-4 w-px bg-white/10 mx-2"></div><div class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20"><div class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></div><span class="text-[10px] font-bold text-emerald-400 uppercase tracking-widest">YT_AUTH_OK</span></div></div><div class="flex items-center gap-3"><button><span class="text-[10px] font-bold uppercase tracking-widest">Advanced Mode</span></button><div class="w-10 h-10 rounded-2xl bg-gradient-to-br from-gray-800 to-gray-900 border border-white/10 flex items-center justify-center shadow-inner group cursor-pointer hover:border-accent-primary/50 transition-colors">');function co(e){const t=()=>e.isAdvanced,n=()=>{switch(e.activeTab){case"dashboard":return"Dashboard";case"download":return"New Download";case"library":return"Media Library";case"settings":return"Settings";default:return"ytdl-go"}};return(()=>{var r=lo(),i=r.firstChild,a=i.firstChild,s=i.nextSibling,o=s.firstChild,l=o.firstChild,c=o.nextSibling;return b(a,n),hn(o,"click",e.onToggleAdvanced,!0),b(o,h(H,{name:"settings-2",get class(){return`w-3.5 h-3.5 ${t()?"animate-pulse-slow":""}`}}),l),b(c,h(H,{name:"user",class:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})),V(()=>X(o,`flex items-center gap-2 px-4 py-2 rounded-xl border transition-all duration-300 ${t()?"bg-accent-primary/20 border-accent-primary/30 text-accent-secondary shadow-lg shadow-accent-primary/10":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`)),r})()}pe(["click"]);var uo=D('<div class="text-[11px] text-gray-600 mt-2 break-all">'),fo=D('<div class="p-3 rounded-xl bg-red-500/10 border border-red-500/20 text-red-400 text-xs">'),yo=D('<div class="fixed inset-0 z-50 bg-[#05070a]/80 backdrop-blur-sm flex items-center justify-center p-4"><div class="w-full max-w-2xl rounded-3xl border border-white/10 bg-[#0a0c14] shadow-2xl p-8 space-y-6 animate-in fade-in zoom-in-95 duration-300"><div class="flex items-center gap-3"><div class="p-2 rounded-xl bg-amber-500/10 text-amber-400"></div><div><div class="font-bold text-white text-xl">Duplicate File Detected</div><div class="text-xs text-gray-500">Choose how to handle this file.</div></div></div><div class="p-4 rounded-2xl border border-white/10 bg-[#05070a]"><div class="text-xs text-gray-500 mb-1">Filename</div><div class="text-sm text-white font-mono break-all"></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-3">'),ho=D('<button class="text-left p-4 rounded-2xl border border-white/10 bg-white/5 hover:border-blue-500/40 hover:bg-blue-500/10 transition-all"><div class="flex items-center justify-between"><span class="font-bold text-white text-sm"></span><span class="text-[10px] px-2 py-0.5 rounded-full bg-white/10 text-gray-400 font-mono"></span></div><div class="text-xs text-gray-500 mt-1">');const po=[{value:"overwrite",label:"Overwrite",hint:"Replace this file",key:"o"},{value:"overwrite_all",label:"Overwrite All",hint:"Replace all duplicates in this job",key:"O"},{value:"skip",label:"Skip",hint:"Skip this file",key:"s"},{value:"skip_all",label:"Skip All",hint:"Skip all duplicates in this job",key:"S"},{value:"rename",label:"Rename",hint:"Save as next available filename",key:"r"},{value:"rename_all",label:"Rename All",hint:"Rename all duplicates in this job",key:"R"},{value:"cancel",label:"Cancel",hint:"Abort this item",key:"q"}];function go(e){return(()=>{var t=yo(),n=t.firstChild,r=n.firstChild,i=r.firstChild,a=r.nextSibling,s=a.firstChild,o=s.nextSibling,l=a.nextSibling;return b(i,h(H,{name:"alert-circle",class:"w-5 h-5"})),b(o,()=>{var c;return((c=e.prompt)==null?void 0:c.filename)||"Unknown file"}),b(a,h(Z,{get when(){var c;return(c=e.prompt)==null?void 0:c.path},get children(){var c=uo();return b(c,()=>e.prompt.path),c}}),null),b(n,h(Z,{get when(){return e.error},get children(){var c=fo();return b(c,()=>e.error),c}}),l),b(l,h(We,{each:po,children:c=>(()=>{var f=ho(),u=f.firstChild,g=u.firstChild,w=g.nextSibling,m=u.nextSibling;return f.$$click=()=>{var x;return(x=e.onSelect)==null?void 0:x.call(e,c.value)},b(g,()=>c.label),b(w,()=>c.key),b(m,()=>c.hint),f})()})),t})()}pe(["click"]);const kn="ytdl-go:app-state:v1",mo=new Set(["download","library","settings"]),bo=new Set(["prompt","overwrite","skip","rename"]),vo=new Set(["artists","channels","playlists","all_media"]),wo=new Set(["gallery","list","detail"]),Vt=new Set(["all","audio","video"]),xo=new Set(["newest","oldest","creator_asc","creator_desc","collection_asc","collection_desc","playlist_asc","playlist_desc"]),ko=80,$o=32,So=1440*60,oe={output:"{title}.{ext}",quality:"best",jobs:1,timeout:180,format:"",audioOnly:!1,onDuplicate:"prompt",useCookies:!0,poTokenExtension:!1},_o={creatorType:"",creatorName:"",albumName:"",playlistKey:"",playlistKind:""},Ao={query:"",creator:"",collection:"",playlist:"",savedPlaylistId:""},Co=()=>({ui:{activeTab:"dashboard",isAdvanced:!1},settings:{...oe},library:{downloads:[],section:"artists",viewMode:"gallery",typeFilter:"all",navPath:{..._o},filters:{...Ao},sortKey:"newest",savedPlaylists:[],playlistAssignments:{},ui:{advancedFiltersOpen:!1,metadataBannerDismissed:!1}},player:{active:!1,selectedMedia:null,minimized:!1},download:{urlInput:"",isDownloading:!1,jobStatus:null,progressTasks:{},logMessages:[],duplicateQueue:[],duplicateError:""}}),$n=_t();let Wt=!1;const Po=e=>({ui:{activeTab:e.ui.activeTab,isAdvanced:e.ui.isAdvanced},settings:{...e.settings},library:{section:e.library.section,viewMode:e.library.viewMode,typeFilter:e.library.typeFilter,navPath:{...e.library.navPath},filters:{query:e.library.filters.query,creator:e.library.filters.creator,collection:e.library.filters.collection,playlist:e.library.filters.playlist,savedPlaylistId:e.library.filters.savedPlaylistId},sortKey:e.library.sortKey,savedPlaylists:e.library.savedPlaylists,playlistAssignments:e.library.playlistAssignments,ui:{advancedFiltersOpen:e.library.ui.advancedFiltersOpen,metadataBannerDismissed:e.library.ui.metadataBannerDismissed}},download:{urlInput:e.download.urlInput,activeJobId:e.download.activeJobId}}),W=(e,t)=>typeof e=="string"?e:t,Fe=(e,t)=>typeof e=="boolean"?e:t,No=e=>W(e,"").trim().replace(/\s+/g," ").slice(0,ko),Bt=(e,t,n)=>{const r=typeof e=="number"?e:Number(e);if(!Number.isFinite(r))return t;const i=Math.trunc(r);return i<=0?t:Math.min(i,n)},To=e=>{const t=e&&typeof e=="object"?e:{},n=W(t.onDuplicate,oe.onDuplicate);return{output:W(t.output,oe.output),quality:W(t.quality,oe.quality),jobs:Bt(t.jobs,oe.jobs,$o),timeout:Bt(t.timeout,oe.timeout,So),format:W(t.format,oe.format),audioOnly:Fe(t.audioOnly,oe.audioOnly),onDuplicate:bo.has(n)?n:oe.onDuplicate,useCookies:Fe(t.useCookies,oe.useCookies),poTokenExtension:Fe(t.poTokenExtension,oe.poTokenExtension)}},Eo=(e,t=new Set)=>{const n=e&&typeof e=="object"?e:{},r=W(n.savedPlaylistId,"").trim();return{query:W(n.query,""),creator:W(n.creator,""),collection:W(n.collection,""),playlist:W(n.playlist,""),savedPlaylistId:t.has(r)?r:""}},Mo=e=>{if(!Array.isArray(e))return[];const t=new Set,n=[];for(const r of e){const i=r&&typeof r=="object"?r:{},a=W(i.id,"").trim(),s=No(i.name);a===""||s===""||t.has(a)||(t.add(a),n.push({id:a,name:s,createdAt:W(i.createdAt,""),updatedAt:W(i.updatedAt,"")}))}return n},Do=(e,t)=>{const n=e&&typeof e=="object"?e:{},r={};for(const[i,a]of Object.entries(n)){const s=String(i||"").trim(),o=W(a,"").trim();s===""||o===""||!t.has(o)||(r[s]=o)}return r},Lo=e=>{const t=e&&typeof e=="object"?e:{},n=W(t.creatorType,"").trim().toLowerCase(),r=W(t.playlistKind,"").trim().toLowerCase();return{creatorType:n==="artist"||n==="channel"?n:"",creatorName:W(t.creatorName,""),albumName:W(t.albumName,""),playlistKey:W(t.playlistKey,""),playlistKind:r==="source"||r==="saved"?r:""}},zo=e=>{const t=e&&typeof e=="object"?e:{};return{advancedFiltersOpen:Fe(t.advancedFiltersOpen,!1),metadataBannerDismissed:Fe(t.metadataBannerDismissed,!1)}},Oo=e=>{const t=e&&typeof e=="object"?e:{},n=W(t.section,"artists"),r=W(t.viewMode,"gallery"),i=W(t.sortKey,"newest"),a=Mo(t.savedPlaylists),s=new Set(a.map(f=>f.id)),o=W(t.typeFilter,"").trim().toLowerCase(),l=W(t.activeMediaType,"").trim().toLowerCase();let c="all";return Vt.has(o)?c=o:Vt.has(l)&&(c=l),{section:vo.has(n)?n:"artists",viewMode:wo.has(r)?r:"gallery",typeFilter:c,navPath:Lo(t.navPath),filters:Eo(t.filters,s),sortKey:xo.has(i)?i:"newest",savedPlaylists:a,playlistAssignments:Do(t.playlistAssignments,s),ui:zo(t.ui)}},jo=()=>{if(typeof window>"u")return null;try{const e=window.localStorage.getItem(kn);return e?JSON.parse(e):null}catch(e){return Wt||(console.warn("Failed to read persisted app state from localStorage:",e),Wt=!0),null}},Ro=()=>{var l,c,f,u;const e=Co(),t=jo();if(!t||typeof t!="object")return e;const n=mo.has((l=t==null?void 0:t.ui)==null?void 0:l.activeTab)?t.ui.activeTab:e.ui.activeTab,r=typeof((c=t==null?void 0:t.ui)==null?void 0:c.isAdvanced)=="boolean"?t.ui.isAdvanced:e.ui.isAdvanced,i=To(t.settings),a=Oo(t.library),s=typeof((f=t==null?void 0:t.download)==null?void 0:f.urlInput)=="string"?t.download.urlInput:e.download.urlInput,o=typeof((u=t==null?void 0:t.download)==null?void 0:u.activeJobId)=="string"?t.download.activeJobId:"";return{...e,ui:{activeTab:n,isAdvanced:r},settings:{...i},library:{...e.library,section:a.section,viewMode:a.viewMode,typeFilter:a.typeFilter,navPath:a.navPath,filters:a.filters,sortKey:a.sortKey,savedPlaylists:a.savedPlaylists,playlistAssignments:a.playlistAssignments,ui:a.ui},download:{...e.download,urlInput:s,activeJobId:o}}};function Fo(e){const[t,n]=xn(Ro());let r=!1;return Ue(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(kn,JSON.stringify(Po(t))),r=!1}catch(i){r||(console.warn("Failed to persist app state to localStorage:",i),r=!0)}}),h($n.Provider,{value:{state:t,setState:n},get children(){return e.children}})}function Nt(){const e=ot($n);if(!e)throw new Error("useAppStore must be used within an AppStoreProvider");return e}const Uo=new Set(["queued","running","reconnecting","complete","error"]),Tt=e=>{if(typeof e!="string")return"";const t=e.trim().toLowerCase();return t==="done"?"complete":Uo.has(t)?t:""},Io=/\.(mp3|wav|ogg|flac|m4a|opus|aac|alac|wma|aiff|aif|ape|dsf|dff|mka)$/i,qo=/\.(mp4|webm|mov|avi|mkv|m4v|wmv|mpeg|mpg|ts|ogv|3gp|f4v|flv|vob|m2ts)$/i,Ko=e=>Io.test(String(e||"")),Yo=e=>qo.test(String(e||"")),Vo=e=>{const t=String(e||"").trim().toLowerCase();return t==="audio"?"audio":t==="video"?"video":"unknown"},Wo=e=>{const t=String((e==null?void 0:e.filename)||"").trim();if(t!==""){if(Ko(t))return"audio";if(Yo(t))return"video"}return Vo(e==null?void 0:e.type)},Bo=80,Xt="/api/library/playlists",Xo="/api/library/playlists/migrate",Ht="ytdl-go:saved-playlists:backend-migration:v1",$t=e=>String(e||"").trim().replace(/\s+/g," ").slice(0,Bo),Ne=e=>String(e||"").trim(),Sn=e=>String(e||"").trim(),Ho=e=>{const t=e&&typeof e=="object"?e:{},n=Ne(t.id),r=$t(t.name);return n===""||r===""?null:{id:n,name:r,createdAt:typeof t.createdAt=="string"?t.createdAt.trim():"",updatedAt:typeof t.updatedAt=="string"?t.updatedAt.trim():""}},Go=e=>{if(!Array.isArray(e))return[];const t=[],n=new Set,r=new Set;for(const i of e){const a=Ho(i);if(!a||n.has(a.id))continue;const s=a.name.toLowerCase();r.has(s)||(n.add(a.id),r.add(s),t.push(a))}return t},Jo=(e,t)=>{const n=e&&typeof e=="object"?e:{},r={};for(const[i,a]of Object.entries(n)){const s=Sn(i),o=Ne(a);s===""||o===""||!t.has(o)||(r[s]=o)}return r},xe=e=>{const t=e&&typeof e=="object"?e:{},n=Go(t.playlists),r=new Set(n.map(i=>i.id));return{playlists:n,assignments:Jo(t.assignments,r)}},ft=e=>Array.isArray(e==null?void 0:e.playlists)&&e.playlists.length>0||(e==null?void 0:e.assignments)&&typeof e.assignments=="object"&&Object.keys(e.assignments).length>0,Gt=(e,t,n="")=>e.some(r=>r.id!==n&&r.name.localeCompare(t,void 0,{sensitivity:"base"})===0),Qo=()=>typeof globalThis<"u"&&globalThis.crypto&&typeof globalThis.crypto.randomUUID=="function"?globalThis.crypto.randomUUID():`saved-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,yt=async(e,t)=>{try{const n=await e.json();if(n&&typeof n.error=="string"&&n.error.trim()!=="")return n.error.trim()}catch{}return t},Oe=e=>e&&typeof e=="object"&&e.name==="AbortError";function Zo(){const{state:e,setState:t}=Nt(),[n,r]=ne("");let i=null,a=null,s=0,o=Promise.resolve(),l=!1;const c=()=>xe({playlists:e.library.savedPlaylists,assignments:e.library.playlistAssignments}),f=C=>{const A=xe(C),y=new Set(A.playlists.map(d=>d.id));t("library","savedPlaylists",A.playlists),t("library","playlistAssignments",A.assignments),t("library","filters","savedPlaylistId",d=>y.has(Ne(d))?d:"")},u=async C=>{const A=await fetch(Xt,{signal:C});if(!A.ok)throw new Error(await yt(A,"Unable to load saved playlists from backend."));const y=await A.json();return xe(y)},g=async(C,A)=>{const y=xe(C),d=await fetch(Xt,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(y),signal:A});if(!d.ok)throw new Error(await yt(d,"Unable to persist saved playlists."));const p=await d.json();return xe(p)},w=async(C,A)=>{const y=xe(C),d=await fetch(Xo,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y),signal:A});if(!d.ok)throw new Error(await yt(d,"Unable to migrate saved playlists."));const p=await d.json();return{state:xe(p),migrated:!!(p&&p.migrated)}},m=async C=>{s+=1;const A=s;a&&a.abort();const y=new AbortController;a=y;try{const d=await g(C,y.signal);return!l&&A===s&&(f(d),r("")),d}finally{a===y&&(a=null)}},x=C=>{const A=o.then(C,C);return o=A.catch(()=>{}),A},N=()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem(Ht)==="1"}catch{return!1}},T=()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(Ht,"1")}catch{}},E=async()=>{i&&i.abort();const C=new AbortController;i=C;const A=s,y=c();try{const d=await u(C.signal);if(l||C.signal.aborted||s!==A)return;if(f(d),r(""),ft(d)){T();return}if(!ft(y)){N()||T();return}const p=await w(y,C.signal);if(l||C.signal.aborted||s!==A)return;f(p.state),(p.migrated||ft(p.state))&&T()}catch(d){if(Oe(d)||C.signal&&C.signal.aborted)return;const p=d instanceof Error?d.message:"Failed to initialize saved playlists.";r(p),console.error("Failed to initialize saved playlists:",d)}finally{i===C&&(i=null)}},K=C=>x(async()=>{const A=$t(C);if(A==="")return{ok:!1,error:"Playlist name is required."};const y=c();if(Gt(y.playlists,A))return{ok:!1,error:"A playlist with that name already exists."};const d=new Date().toISOString(),p={id:Qo(),name:A,createdAt:d,updatedAt:d};try{const S=(await m({playlists:[...y.playlists,p],assignments:y.assignments})).playlists.find(z=>z.id===p.id);return S?{ok:!0,playlist:S}:{ok:!1,error:"A playlist with that name already exists."}}catch(k){return Oe(k)?{ok:!1,error:"Request canceled."}:{ok:!1,error:k instanceof Error?k.message:"Unable to create saved playlist."}}}),U=(C,A)=>x(async()=>{const y=Ne(C),d=$t(A);if(y==="")return{ok:!1,error:"Playlist not found."};if(d==="")return{ok:!1,error:"Playlist name is required."};const p=c();if(!p.playlists.some(Y=>Y.id===y))return{ok:!1,error:"Playlist not found."};if(Gt(p.playlists,d,y))return{ok:!1,error:"A playlist with that name already exists."};const S=new Date().toISOString(),z=p.playlists.map(Y=>Y.id===y?{...Y,name:d,updatedAt:S}:Y);try{const j=(await m({playlists:z,assignments:p.assignments})).playlists.find(J=>J.id===y);return j?j.name.localeCompare(d,void 0,{sensitivity:"base"})!==0?{ok:!1,error:"A playlist with that name already exists."}:{ok:!0}:{ok:!1,error:"Playlist not found."}}catch(Y){return Oe(Y)?{ok:!1,error:"Request canceled."}:{ok:!1,error:Y instanceof Error?Y.message:"Unable to rename saved playlist."}}}),$=C=>x(async()=>{const A=Ne(C);if(A==="")return{ok:!1,error:"Playlist not found."};const y=c(),d=y.playlists.filter(k=>k.id!==A);if(d.length===y.playlists.length)return{ok:!1,error:"Playlist not found."};const p={};for(const[k,S]of Object.entries(y.assignments))S!==A&&(p[k]=S);try{return await m({playlists:d,assignments:p}),{ok:!0}}catch(k){return Oe(k)?{ok:!1,error:"Request canceled."}:{ok:!1,error:k instanceof Error?k.message:"Unable to delete saved playlist."}}}),B=(C,A)=>x(async()=>{const y=Sn(C),d=Ne(A);if(y==="")return;const p=c();if(!(d===""||p.playlists.some(z=>z.id===d)))return;const S={...p.assignments};if(d===""){if(!(y in S))return;delete S[y]}else{if(S[y]===d)return;S[y]=d}try{await m({playlists:p.playlists,assignments:S})}catch(z){if(Oe(z))return;console.error("Failed to assign saved playlist:",z)}});return $e(()=>{l=!0,i&&i.abort(),a&&a.abort()}),{initError:n,initialize:E,createPlaylist:K,renamePlaylist:U,deletePlaylist:$,assignPlaylist:B}}class ea{constructor(){this.socket=null,this.reconnectInterval=3e3,this.shouldReconnect=!0,this.listeners=new Set}addListener(t){return this.listeners.add(t),()=>this.listeners.delete(t)}connect(){if(this.socket&&(this.socket.readyState===WebSocket.OPEN||this.socket.readyState===WebSocket.CONNECTING))return;const t=window.location.protocol==="https:"?"wss:":"ws:",n=window.location.host,r=`${t}//${n}/ws`;this.socket=new WebSocket(r),this.socket.onopen=()=>{console.log("WebSocket connected")},this.socket.onmessage=i=>{try{const a=JSON.parse(i.data);this.dispatch(a)}catch(a){console.error("Failed to parse WebSocket message:",a)}},this.socket.onclose=()=>{console.log("WebSocket disconnected"),this.shouldReconnect&&setTimeout(()=>{console.log("Reconnecting..."),this.connect()},this.reconnectInterval)},this.socket.onerror=i=>{console.error("WebSocket error:",i),this.socket.close()}}dispatch(t){const{type:n,payload:r}=t;switch(n){case"progress":As(r);break;case"error":Cs(r);break}this.listeners.forEach(i=>{try{i(t)}catch(a){console.error("Error in WebSocket listener:",a)}})}close(){this.shouldReconnect=!1,this.socket&&this.socket.close()}}const _n=new ea,ht=80,ta=new Set(["debug","info","warn","error"]),na=e=>{switch(e){case"queued":return"Waiting for a worker to start the job.";case"running":return"Download in progress...";case"reconnecting":return"Reconnecting to the progress stream...";case"complete":return"All downloads in this job are finished.";case"error":return"Download failed.";default:return""}},ke=(e,t=0)=>{const n=typeof e=="number"?e:Number(e);return Number.isFinite(n)?Math.max(0,Math.trunc(n)):t},Jt=e=>{const t=typeof e=="number"?e:Number(e);return!Number.isFinite(t)||t<0?0:t>100?100:t},Qt=e=>{if(!e||typeof e!="object")return null;const t={total:ke(e.total,0),succeeded:ke(e.succeeded,0),failed:ke(e.failed,0)};return t.total<=0&&t.succeeded<=0&&t.failed<=0?null:t},Zt=(e,t,n)=>{const r=typeof t=="string"?t.trim():"";if(r!==""&&r!==e)return r;if(e==="error"){const i=typeof n=="string"?n.trim():"";if(i)return i}return na(e)},en=e=>{if(typeof e!="string")return"info";const t=e.trim().toLowerCase();return ta.has(t)?t:"info"},tn=Tt,ra=e=>{var r;const t=e.status==="complete"?"Download Complete":"Download Failed",n=e.status==="complete"?`Successfully downloaded ${((r=e.stats)==null?void 0:r.succeeded)||0} items.`:e.error||e.message||"An error occurred during download.";Q("notification",{type:e.status==="complete"?"success":"error",message:`${t}: ${n}`}),setTimeout(()=>{Q("notification",null)},1e4),!(typeof window>"u"||!("Notification"in window))&&Notification.permission==="granted"&&new Notification(t,{body:n,icon:"/favicon.ico"})};function ia(){const{state:e,setState:t}=Nt(),n=s=>{if(!s||typeof s!="object"||typeof s.type!="string")return;const o=s.payload||s;cn(()=>{try{switch(s.type){case"snapshot":o.snapshot?r(o.snapshot):s.snapshot&&r(s.snapshot);break;case"status":try{Q("jobStatuses",o.jobId,l=>{const c=Tt(o.status),f={...l||{},jobId:o.jobId,status:c,message:Zt(o.status,o.message,o.error),error:o.error,stats:Qt(o.stats)||(l==null?void 0:l.stats),exitCode:o.exitCode};if((l==null?void 0:l.status)!==c&&(c==="complete"||c==="error")){ra(f);const u=o.jobId;setTimeout(()=>{try{const g=de.activeDownloads,w=Object.keys(g).filter(m=>{var x,N;return((x=g[m])==null?void 0:x.jobId)===u||((N=g[m])==null?void 0:N.done)});for(const m of w)Q("activeDownloads",m,void 0)}catch(g){console.error("Failed to clear completed job tasks:",g)}},300)}return f})}catch(l){console.error("Critical error processing status payload:",l)}break;case"register":case"progress":if(!o.id)return;Q("activeDownloads",o.id,l=>({id:o.id,jobId:o.jobId,filename:o.filename||(l==null?void 0:l.filename),label:o.label||o.filename||(l==null?void 0:l.label)||o.id,total:ke(o.total,(l==null?void 0:l.total)||0),current:ke(o.current,(l==null?void 0:l.current)||0),percent:Jt(o.percent),status:o.status||(l==null?void 0:l.status)||"downloading",eta:o.eta||(l==null?void 0:l.eta),done:o.status==="complete"||o.percent>=100}));break;case"finish":o.id&&(Q("activeDownloads",o.id,"done",!0),Q("activeDownloads",o.id,"percent",100));break;case"duplicate":typeof o.promptId=="string"&&o.promptId!==""&&(t("download","duplicateQueue",l=>l.some(c=>c.promptId===o.promptId)?l:[...l,{jobId:o.jobId,promptId:o.promptId,path:o.path||"",filename:o.filename||""}]),t("download","duplicateError",""));break;case"duplicate-resolved":typeof o.promptId=="string"&&o.promptId!==""&&(t("download","duplicateQueue",l=>l.filter(c=>c.promptId!==o.promptId)),t("download","duplicateError",""));break;case"log":Q("logs",l=>[...l,{level:en(o.level),message:o.message}].slice(-ht));break;case"done":Q("jobStatuses",o.jobId,"status",tn(o.status));break;default:break}}catch(l){console.error("Error processing WebSocket event:",l)}})},r=s=>{const o=s.jobId;if(Q("jobStatuses",o,{jobId:o,status:tn(s.status),message:Zt(s.status,"",s.error),error:s.error,stats:Qt(s.stats),exitCode:s.exitCode}),Array.isArray(s.tasks))for(const l of s.tasks)Q("activeDownloads",l.id,{id:l.id,jobId:o,label:l.label||l.id,total:ke(l.total,0),current:ke(l.current,0),percent:Jt(l.percent),done:!!l.done||l.percent>=100});if(Array.isArray(s.duplicates)&&s.duplicates.length>0&&t("download","duplicateQueue",l=>{const c=[...l];for(const f of s.duplicates)c.some(u=>u.promptId===f.promptId)||c.push({jobId:o,promptId:f.promptId,path:f.path,filename:f.filename});return c}),Array.isArray(s.logs)){const l=s.logs.map(c=>({level:en(c.level),message:c.message}));Q("logs",l.slice(-ht))}};return St(()=>{const s=_n.addListener(n);typeof window<"u"&&"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),$e(s)}),$e(()=>{}),{startDownload:async s=>{const o=s.split(",").map(l=>l.trim()).filter(l=>l.length>0);if(o.length!==0)try{const l=await fetch("/api/download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({urls:o,options:{output:e.settings.output,quality:e.settings.quality,jobs:e.settings.jobs,timeout:e.settings.timeout,audio:e.settings.audioOnly,"on-duplicate":e.settings.onDuplicate,"use-cookies":e.settings.useCookies,"po-token":e.settings.poTokenExtension?"true":""}})}),c=await l.json();if(!l.ok)throw new Error(c.error||"Failed to start download");Q("lastJobId",c.jobId)}catch(l){console.error("Download start failed:",l),Q("logs",c=>[...c,{level:"error",message:l.message||"Failed to start download"}].slice(-ht))}},cancelDownload:async s=>{if(s)try{const o=await fetch("/api/download/cancel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jobId:s})});if(!o.ok){const l=await o.json().catch(()=>({}));throw new Error(l.error||"Failed to cancel download")}}catch(o){console.error("Download cancel failed:",o)}},listenForProgress:s=>{console.log("Now listening for job:",s)}}}const nn="Unknown Artist",sa="Unknown Channel",oa="Unknown Creator",aa="Unknown Album",An="Standalone",se=(...e)=>{for(const t of e)if(typeof t=="string"){const n=t.trim();if(n!=="")return n}return""},la=(e,t)=>{const n=String(e||"").toLowerCase();return n==="podcast"?"Podcast":n==="music"||n==="audio"?"Music":"YouTube Video"},ca=e=>e!=null&&e.metadata&&typeof e.metadata=="object"?e.metadata:{},da=e=>{if(typeof(e==null?void 0:e.modified_at)=="string"){const t=Date.parse(e.modified_at);if(Number.isFinite(t))return t}if(typeof(e==null?void 0:e.modifiedAt)=="string"){const t=Date.parse(e.modifiedAt);if(Number.isFinite(t))return t}if(typeof(e==null?void 0:e.date)=="string"){const t=Date.parse(e.date);if(Number.isFinite(t))return t}return 0},te=(e,t)=>String(e||"").localeCompare(String(t||""),void 0,{sensitivity:"base",numeric:!0}),De=(e,t)=>e!==""?e:t||"",ua=(e,t,n)=>{var N,T;const r=ca(e),i=la(e==null?void 0:e.type,(e==null?void 0:e.artist)||r.artist||r.author),a=se(e==null?void 0:e.title,r.title,"Untitled"),s=se(e==null?void 0:e.artist,r.artist,r.author,i==="Music"?nn:oa),o=se(e==null?void 0:e.album,r.album,i==="Music"?aa:s),l=se((N=e==null?void 0:e.playlist)==null?void 0:N.title,(T=r==null?void 0:r.playlist)==null?void 0:T.title,An),c=se(e==null?void 0:e.thumbnail_url,e==null?void 0:e.thumbnailUrl,e==null?void 0:e.thumbnailURL,r.thumbnail_url,r.thumbnailUrl,r.thumbnailURL),f=se(e==null?void 0:e.relative_path,e==null?void 0:e.filename,e==null?void 0:e.id),u=se(n[f],""),g=t.get(u),w=da(e),m=!!((e==null?void 0:e.has_sidecar)??(e==null?void 0:e.hasSidecar)),x=[];return m||x.push("missing_sidecar"),(s===nn||s===sa)&&x.push("missing_creator"),a==="Untitled"&&x.push("missing_title"),{raw:e,mediaKey:f,filename:String((e==null?void 0:e.filename)||""),relativePath:se(e==null?void 0:e.relative_path,e==null?void 0:e.filename,""),folder:String((e==null?void 0:e.folder)||""),id:String((e==null?void 0:e.id)||(e==null?void 0:e.filename)||f),type:i,title:a,creator:s,album:o,sourcePlaylist:l,savedPlaylistId:(g==null?void 0:g.id)||"",savedPlaylistName:(g==null?void 0:g.name)||"Unassigned",date:se(e==null?void 0:e.date,""),modifiedAt:se(e==null?void 0:e.modified_at,e==null?void 0:e.modifiedAt,""),size:se(e==null?void 0:e.size,""),sizeBytes:Number.isFinite(Number(e==null?void 0:e.size_bytes))?Number(e.size_bytes):0,sourceURL:se(e==null?void 0:e.source_url,r.source_url,""),thumbnailUrl:c,metadata:r,timestamp:w,hasSidecar:m,anomalies:x,hasAnomaly:x.length>0}},Se=(e,t)=>{const n=[...e];return n.sort((r,i)=>{switch(t){case"oldest":return r.timestamp-i.timestamp||te(r.title,i.title);case"creator_asc":return te(r.creator,i.creator)||te(r.title,i.title);case"creator_desc":return te(i.creator,r.creator)||te(r.title,i.title);case"collection_asc":return te(r.album,i.album)||te(r.title,i.title);case"collection_desc":return te(i.album,r.album)||te(r.title,i.title);case"playlist_asc":return te(r.sourcePlaylist,i.sourcePlaylist)||te(r.title,i.title);case"playlist_desc":return te(i.sourcePlaylist,r.sourcePlaylist)||te(r.title,i.title);case"newest":default:return i.timestamp-r.timestamp||te(r.title,i.title)}}),n},fa=(e,t)=>{const n=String(t.query||"").trim().toLowerCase();return!(n&&![e.title,e.creator,e.album,e.sourcePlaylist,e.savedPlaylistName,e.filename].join(" ").toLowerCase().includes(n)||t.creator&&e.creator!==t.creator||t.collection&&e.album!==t.collection||t.playlist&&e.sourcePlaylist!==t.playlist||t.savedPlaylistId&&e.savedPlaylistId!==t.savedPlaylistId)},be=e=>[...e].sort((t,n)=>n.latestTimestamp-t.latestTimestamp||te(t.name,n.name)),ya=e=>{const t=new Map;for(const i of e.filter(a=>a.type==="Music")){t.has(i.creator)||t.set(i.creator,{name:i.creator,type:"artist",items:[],albumsByName:new Map,latestTimestamp:i.timestamp,thumbnailUrl:i.thumbnailUrl||""});const a=t.get(i.creator);a.items.push(i),a.latestTimestamp=Math.max(a.latestTimestamp,i.timestamp),a.thumbnailUrl=De(a.thumbnailUrl,i.thumbnailUrl),a.albumsByName.has(i.album)||a.albumsByName.set(i.album,{name:i.album,items:[],latestTimestamp:i.timestamp,thumbnailUrl:i.thumbnailUrl||""});const s=a.albumsByName.get(i.album);s.items.push(i),s.latestTimestamp=Math.max(s.latestTimestamp,i.timestamp),s.thumbnailUrl=De(s.thumbnailUrl,i.thumbnailUrl)}const n=[],r=new Map;for(const[i,a]of t.entries()){const s=be(Array.from(a.albumsByName.values())).map(l=>({...l,items:Se(l.items,"newest"),count:l.items.length})),o={name:i,type:"artist",items:Se(a.items,"newest"),count:a.items.length,latestTimestamp:a.latestTimestamp,thumbnailUrl:a.thumbnailUrl,albums:s};n.push(o),r.set(i,o)}return{groups:be(n),byName:r}},ha=e=>{const t=new Map;for(const i of e.filter(a=>a.type==="YouTube Video")){t.has(i.creator)||t.set(i.creator,{name:i.creator,type:"video_creator",items:[],latestTimestamp:i.timestamp,thumbnailUrl:i.thumbnailUrl||""});const a=t.get(i.creator);a.items.push(i),a.latestTimestamp=Math.max(a.latestTimestamp,i.timestamp),a.thumbnailUrl=De(a.thumbnailUrl,i.thumbnailUrl)}const n=[],r=new Map;for(const[i,a]of t.entries()){const s={name:i,type:"video_creator",items:Se(a.items,"newest"),count:a.items.length,latestTimestamp:a.latestTimestamp,thumbnailUrl:a.thumbnailUrl};n.push(s),r.set(i,s)}return{groups:be(n),byName:r}},pa=e=>{const t=new Map;for(const i of e.filter(a=>a.type==="Podcast")){t.has(i.creator)||t.set(i.creator,{name:i.creator,type:"podcast",items:[],latestTimestamp:i.timestamp,thumbnailUrl:i.thumbnailUrl||""});const a=t.get(i.creator);a.items.push(i),a.latestTimestamp=Math.max(a.latestTimestamp,i.timestamp),a.thumbnailUrl=De(a.thumbnailUrl,i.thumbnailUrl)}const n=[],r=new Map;for(const[i,a]of t.entries()){const s={name:i,type:"podcast",items:Se(a.items,"newest"),count:a.items.length,latestTimestamp:a.latestTimestamp,thumbnailUrl:a.thumbnailUrl};n.push(s),r.set(i,s)}return{groups:be(n),byName:r}},ga=(e,t)=>{const n=new Map;for(const l of e){const c=se(l.sourcePlaylist,An),f=`source:${c.toLowerCase()}`;n.has(f)||n.set(f,{key:f,kind:"source",name:c,items:[],latestTimestamp:l.timestamp,thumbnailUrl:l.thumbnailUrl||""});const u=n.get(f);u.items.push(l),u.latestTimestamp=Math.max(u.latestTimestamp,l.timestamp),u.thumbnailUrl=De(u.thumbnailUrl,l.thumbnailUrl)}const r=new Map;for(const l of t)r.set(l.id,{key:`saved:${l.id}`,kind:"saved",name:l.name,playlistId:l.id,items:[],latestTimestamp:0,thumbnailUrl:""});for(const l of e){if(!l.savedPlaylistId||!r.has(l.savedPlaylistId))continue;const c=r.get(l.savedPlaylistId);c.items.push(l),c.latestTimestamp=Math.max(c.latestTimestamp,l.timestamp),c.thumbnailUrl=De(c.thumbnailUrl,l.thumbnailUrl)}const i=be(Array.from(n.values())).map(l=>({...l,count:l.items.length,items:Se(l.items,"newest")})),a=be(Array.from(r.values())).map(l=>({...l,count:l.items.length,items:Se(l.items,"newest")})),s=be([...i,...a]),o=new Map(s.map(l=>[l.key,l]));return{sourceGroups:i,savedGroups:a,combined:s,byKey:o}},pt=e=>Array.from(new Set(e.filter(t=>typeof t=="string"&&t.trim()!=="").map(t=>t.trim()))).sort(te),ma=({downloads:e,savedPlaylists:t,playlistAssignments:n,typeFilter:r,sortKey:i,filters:a})=>{const s=Array.isArray(e)?e:[],o=Array.isArray(t)?t:[],l=n&&typeof n=="object"?n:{},c=new Map(o.map($=>[String($.id||"").trim(),$])),f=s.map($=>ua($,c,l)),u=f.filter($=>$.hasAnomaly),w=f.filter($=>r==="all"?!0:$.type===r).filter($=>fa($,a||{})),m=Se(w,i),x=ya(w),N=ha(w),T=pa(w),E=ga(w,o),K=be([...x.groups.map($=>({...$,key:`artist:${$.name}`,creatorType:"artist"})),...N.groups.map($=>({...$,key:`video_creator:${$.name}`,creatorType:"video_creator"})),...T.groups.map($=>({...$,key:`podcast:${$.name}`,creatorType:"podcast"}))]),U={creators:pt(w.map($=>$.creator)),collections:pt(w.map($=>$.album)),sourcePlaylists:pt(w.map($=>$.sourcePlaylist))};return{items:f,filteredItems:m,anomalyItems:u,anomalyCount:u.length,artists:x.groups,artistsByName:x.byName,videos:N.groups,videosByName:N.byName,podcasts:T.groups,podcastsByName:T.byName,creatorCards:K,playlists:E.combined,playlistsByKey:E.byKey,sourcePlaylists:E.sourceGroups,savedPlaylists:E.savedGroups,filterOptions:U}};var ba=D('<div class="max-w-7xl mx-auto">'),rn=D('<div class="max-w-4xl mx-auto">'),va=D('<div class="max-w-dynamic mx-auto h-full">'),wa=D('<img class="absolute -top-10 -left-4 w-12 h-12 object-contain animate-bounce -rotate-12 pointer-events-none drop-shadow-lg"alt="Gopher Success">'),xa=D('<div class="fixed bottom-10 left-1/2 -translate-x-1/2 z-[100] animate-in fade-in slide-in-from-bottom-4 duration-500"><div><div class=relative><div></div></div><div class="flex-1 min-w-0"><p class="text-sm font-bold leading-tight line-clamp-2"></p></div><button class="p-1 hover:bg-white/5 rounded-lg transition-colors">'),ka=D('<div class="flex h-screen bg-[radial-gradient(circle_at_12%_8%,rgba(56,189,248,0.16),transparent_35%),radial-gradient(circle_at_88%_2%,rgba(20,184,166,0.14),transparent_30%),linear-gradient(180deg,#05070a,#070b12_45%,#05070a)] text-gray-200 overflow-hidden font-sans select-none"><main class="flex-1 flex flex-col bg-transparent relative min-w-0"><div class="flex-1 overflow-y-auto p-6 md:p-10 custom-scrollbar">'),$a=D('<div class="flex flex-col items-center justify-center h-full text-gray-500 gap-4 animate-pulse"><span class="text-xs font-bold uppercase tracking-widest">Loading View...');const Sa=Ve(()=>Be(()=>import("./assets/DownloadView-Bhq3JPU9.js"),[])),_a=Ve(()=>Be(()=>import("./assets/LibraryView-Cl1mHjKT.js"),[])),Aa=Ve(()=>Be(()=>import("./assets/SettingsView-oKTrTPgU.js"),[])),Ca=Ve(()=>Be(()=>import("./assets/Player-CdVu9tNX.js"),[])),Pa=e=>{if(!e||typeof e!="object")return 0;const t=Number(e.succeeded);return Number.isFinite(t)?Math.max(0,Math.trunc(t)):0},Na=(e,t)=>{const n=Tt(e);return n==="complete"?!0:n!=="error"?!1:Pa(t)>0},Ta=e=>String(e||"").split("/").map(t=>encodeURIComponent(t)).join("/"),He=e=>String(e||"").trim();function Ea(){const{state:e,setState:t}=Nt(),[n,r]=ne([]),{initialize:i,createPlaylist:a,renamePlaylist:s,deletePlaylist:o,assignPlaylist:l}=Zo(),{listenForProgress:c,startDownload:f}=ia();let u=null,g=0,w="",m="",x=null,N=!1;const T=()=>e.ui.activeTab||"dashboard",E=()=>e.ui.isAdvanced,K=G(()=>ma({downloads:e.library.downloads,savedPlaylists:e.library.savedPlaylists,playlistAssignments:e.library.playlistAssignments,typeFilter:e.library.typeFilter,sortKey:e.library.sortKey,filters:e.library.filters})),U=v=>{t("ui","activeTab",v)},$=()=>{t("ui","isAdvanced",v=>!v)},B=()=>{U("library")},C=()=>{x&&(clearTimeout(x),x=null)},A=async()=>{if(N)return!1;u&&u.abort(),u=new AbortController;const v=++g;try{const P=await fetch("/api/media/",{signal:u.signal});if(P.ok){const O=await P.json();if(N||v!==g)return!1;const I=Array.isArray(O)?O:O.items||[];return t("library","downloads",I),!0}return!1}catch(P){return P&&typeof P=="object"&&P.name==="AbortError"||console.error("Failed to fetch media files:",P),!1}finally{v===g&&(u=null)}},y=async()=>await A()?{ok:!0,message:"Library refreshed. Legacy files without sidecars may still need re-download for complete metadata and thumbnails."}:{ok:!1,message:"Unable to refresh metadata right now. Please retry in a few seconds."},d=v=>{v&&t("download","duplicateQueue",P=>P.filter(O=>O.promptId!==v))},p=async v=>{const P=e.download.duplicateQueue[0];if(P){t("download","duplicateError","");try{const O=await fetch("/api/download/duplicate-response",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jobId:P.jobId,promptId:P.promptId,choice:v})}),I=await O.json().catch(()=>({}));if(!O.ok||I.error){if(O.status===404||O.status===409){d(P.promptId),t("download","duplicateError","");return}t("download","duplicateError",I.error||"Failed to submit duplicate choice");return}d(P.promptId),t("download","duplicateError","")}catch(O){t("download","duplicateError",O.message||"Failed to submit duplicate choice")}}},k=v=>{if(e.download.duplicateQueue.length===0)return;const P=document.activeElement;if(!(P&&(P.tagName==="INPUT"||P.tagName==="TEXTAREA"||P.isContentEditable))&&!(v.metaKey||v.ctrlKey||v.altKey))switch(v.key){case"o":v.preventDefault(),p("overwrite");break;case"O":v.preventDefault(),p("overwrite_all");break;case"s":v.preventDefault(),p("skip");break;case"S":v.preventDefault(),p("skip_all");break;case"r":v.preventDefault(),p("rename");break;case"R":v.preventDefault(),p("rename_all");break;case"q":v.preventDefault(),p("cancel");break}},S=async(v,P=1)=>{if(!v||N)return;m=v;const O=await A();if(!(N||m!==v)){if(O){w=v,m="",C();return}if(P>=3){m="";return}C(),x=setTimeout(()=>{x=null,S(v,P+1)},P*1e3)}};St(()=>{A(),i(),_n.connect(),typeof window<"u"&&window.addEventListener("keydown",k),e.ui.activeTab||U("dashboard")}),Ue(()=>{const v=T();(v==="library"||v==="dashboard")&&A()}),Ue(()=>{const v=de.jobStatuses;for(const P in v){const O=v[P];typeof P!="string"||P===""||P===w||P===m||Na(O==null?void 0:O.status,O==null?void 0:O.stats)&&S(P,1)}}),$e(()=>{N=!0,C(),typeof window<"u"&&window.removeEventListener("keydown",k),u&&(u.abort(),u=null)});const z=v=>({...v,url:`/api/media/${Ta(v.filename)}`}),Y=(v,P)=>{const O=Array.isArray(e.library.downloads)?e.library.downloads:[],I=Array.isArray(v)&&v.length>0?v:O,R=[],ee=new Set;for(const we of I){if(!we||typeof we!="object")continue;const ze=He(we.filename);ze===""||ee.has(ze)||(ee.add(ze),R.push(we))}const ve=He(P==null?void 0:P.filename);return ve!==""&&!ee.has(ve)&&R.unshift(P),R},j=(v,P)=>{if(!v||typeof v!="object"||String(v.filename||"").trim()==="")return;const O=Y(P,v);r(O),t("player","selectedMedia",z(v)),t("player","minimized",!1),t("player","active",!0)},J=()=>{t("player","active",!1),t("player","selectedMedia",null),t("player","minimized",!1),r([])},Ae=()=>{const v=e.player.selectedMedia;v&&(Wo(v),t("library","typeFilter","all")),t("library","section","all_media"),t("library","navPath",{creatorType:"",creatorName:"",albumName:"",playlistKey:"",playlistKind:""}),U("library")},Et=()=>{var ee;const v=n();if(v.length===0)return;const P=He((ee=e.player.selectedMedia)==null?void 0:ee.filename),O=v.findIndex(ve=>He(ve.filename)===P),I=O<0?0:(O+1)%v.length,R=v[I];R&&(t("player","selectedMedia",z(R)),t("player","active",!0))};return(()=>{var v=ka(),P=v.firstChild,O=P.firstChild;return b(v,h(ao,{get activeTab(){return T()},onTabChange:U}),P),b(P,h(co,{get activeTab(){return T()},get isAdvanced(){return E()},onToggleAdvanced:$}),O),b(O,h(wt,{get fallback(){return(()=>{var I=$a(),R=I.firstChild;return b(I,h(H,{name:"loader",class:"w-10 h-10 animate-spin text-accent-primary"}),R),I})()},get children(){return[h(Z,{get when(){return T()==="dashboard"},get children(){var I=ba();return b(I,h(so,{libraryModel:K,onTabChange:U,onDownload:f,onPlay:R=>j(R,e.library.downloads)})),I}}),h(Z,{get when(){return T()==="download"},get children(){var I=rn();return b(I,h(Sa,{onOpenLibrary:B,onStartDownload:R=>c(R)})),I}}),h(Z,{get when(){return T()==="library"},get children(){var I=va();return b(I,h(_a,{downloads:()=>e.library.downloads,section:()=>e.library.section,viewMode:()=>e.library.viewMode,typeFilter:()=>e.library.typeFilter,navPath:()=>e.library.navPath,filters:()=>e.library.filters,sortKey:()=>e.library.sortKey,uiState:()=>e.library.ui,savedPlaylists:()=>e.library.savedPlaylists,playlistAssignments:()=>e.library.playlistAssignments,onSectionChange:R=>t("library","section",R),onViewModeChange:R=>t("library","viewMode",R),onTypeFilterChange:R=>t("library","typeFilter",R),onNavPathChange:R=>t("library","navPath",R),onFilterChange:(R,ee)=>t("library","filters",R,ee),onClearFilters:()=>t("library","filters",{query:"",savedPlaylistId:""}),onSortKeyChange:R=>t("library","sortKey",R),onUiStateChange:(R,ee)=>t("library","ui",R,ee),openPlayer:(R,ee)=>j(R,ee),onOpenQueue:Ae,onCreatePlaylist:a,onRenamePlaylist:s,onDeletePlaylist:o,onAssignPlaylist:l,onRetryMetadataScan:y})),I}}),h(Z,{get when(){return T()==="settings"},get children(){var I=rn();return b(I,h(Aa,{})),I}})]}}),null),b(O,h(Z,{get when(){return e.download.duplicateQueue.length>0},get children(){return h(go,{get prompt(){return e.download.duplicateQueue[0]},onSelect:p,get error(){return e.download.duplicateError}})}}),null),b(O,h(Z,{get when(){return de.notification},get children(){var I=xa(),R=I.firstChild,ee=R.firstChild,ve=ee.firstChild,we=ee.nextSibling,ze=we.firstChild,Mt=we.nextSibling;return b(ve,h(H,{get name(){return de.notification.type==="success"?"check-circle-2":"alert-circle"},class:"w-5 h-5 relative z-10"})),b(ee,h(Z,{get when(){return de.notification.type==="success"},get children(){var ge=wa();return ce(ge,"src",lt),ge}}),null),b(ze,()=>de.notification.message),Mt.$$click=()=>Q("notification",null),b(Mt,h(H,{name:"x",class:"w-4 h-4 opacity-50"})),V(ge=>{var Dt=`px-6 py-4 rounded-2xl border backdrop-blur-xl shadow-2xl flex items-center gap-4 min-w-[340px] max-w-md ${de.notification.type==="success"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-400":"bg-red-500/10 border-red-500/20 text-red-400"}`,Lt=`p-2.5 rounded-xl ${de.notification.type==="success"?"bg-emerald-500/20":"bg-red-500/20"}`;return Dt!==ge.e&&X(R,ge.e=Dt),Lt!==ge.t&&X(ve,ge.t=Lt),ge},{e:void 0,t:void 0}),I}}),null),b(v,h(wt,{get children(){return h(Z,{get when(){return e.player.active},get children(){return h(Ca,{get active(){return e.player.active},get minimized(){return e.player.minimized},get media(){return e.player.selectedMedia},onClose:J,onMinimize:()=>t("player","minimized",!0),onRestore:()=>t("player","minimized",!1),onNext:Et,onPrevious:Et})}})}}),null),v})()}pe(["click"]);const Ma=document.getElementById("root");tr(()=>h(Fo,{get children(){return h(Ea,{})}}),Ma);export{Ls as A,We as F,Rs as G,H as I,Z as S,Bs as T,ia as a,V as b,h as c,X as d,de as e,js as f,pe as g,ne as h,b as i,G as j,ma as k,Ue as l,Te as m,Tt as n,hn as o,Wo as p,$e as q,or as r,ce as s,D as t,Nt as u,ir as v};
