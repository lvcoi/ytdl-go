(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const ol=!1,al=(e,t)=>e===t,je=Symbol("solid-proxy"),Dn=typeof Proxy=="function",Jt=Symbol("solid-track"),It={equals:al};let In=Rn;const Qe=1,Et=2,En={owned:null,cleanups:null,context:null,owner:null};var le=null;let Vt=null,cl=null,ce=null,pe=null,Ge=null,Ft=0;function Dt(e,t){const n=ce,l=le,r=e.length===0,i=t===void 0?l:t,o=r?En:{owned:null,cleanups:null,context:i?i.context:null,owner:i},s=r?e:()=>e(()=>Le(()=>wt(o)));le=o,ce=null;try{return ut(s,!0)}finally{ce=n,le=l}}function Ne(e,t){t=t?Object.assign({},It,t):It;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},l=r=>(typeof r=="function"&&(r=r(n.value)),Ln(n,r));return[jn.bind(n),l]}function z(e,t,n){const l=sn(e,t,!1,Qe);_t(l)}function mt(e,t,n){In=bl;const l=sn(e,t,!1,Qe);l.user=!0,Ge?Ge.push(l):_t(l)}function L(e,t,n){n=n?Object.assign({},It,n):It;const l=sn(e,t,!0,0);return l.observers=null,l.observerSlots=null,l.comparator=n.equals||void 0,_t(l),jn.bind(l)}function dl(e){return ut(e,!1)}function Le(e){if(ce===null)return e();const t=ce;ce=null;try{return e()}finally{ce=t}}function On(e){mt(()=>Le(e))}function rn(e){return le===null||(le.cleanups===null?le.cleanups=[e]:le.cleanups.push(e)),e}function Zt(){return ce}function ul(e,t){const n=Symbol("context");return{id:n,Provider:xl(n),defaultValue:e}}function fl(e){let t;return le&&le.context&&(t=le.context[e.id])!==void 0?t:e.defaultValue}function gl(e){const t=L(e),n=L(()=>Qt(t()));return n.toArray=()=>{const l=n();return Array.isArray(l)?l:l!=null?[l]:[]},n}function jn(){if(this.sources&&this.state)if(this.state===Qe)_t(this);else{const e=pe;pe=null,ut(()=>jt(this),!1),pe=e}if(ce){const e=this.observers?this.observers.length:0;ce.sources?(ce.sources.push(this),ce.sourceSlots.push(e)):(ce.sources=[this],ce.sourceSlots=[e]),this.observers?(this.observers.push(ce),this.observerSlots.push(ce.sources.length-1)):(this.observers=[ce],this.observerSlots=[ce.sources.length-1])}return this.value}function Ln(e,t,n){let l=e.value;return(!e.comparator||!e.comparator(l,t))&&(e.value=t,e.observers&&e.observers.length&&ut(()=>{for(let r=0;r<e.observers.length;r+=1){const i=e.observers[r],o=Vt&&Vt.running;o&&Vt.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?pe.push(i):Ge.push(i),i.observers&&zn(i)),o||(i.state=Qe)}if(pe.length>1e6)throw pe=[],new Error},!1)),t}function _t(e){if(!e.fn)return;wt(e);const t=Ft;yl(e,e.value,t)}function yl(e,t,n){let l;const r=le,i=ce;ce=le=e;try{l=e.fn(t)}catch(o){return e.pure&&(e.state=Qe,e.owned&&e.owned.forEach(wt),e.owned=null),e.updatedAt=n+1,Fn(o)}finally{ce=i,le=r}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Ln(e,l):e.value=l,e.updatedAt=n)}function sn(e,t,n,l=Qe,r){const i={fn:e,state:l,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:le,context:le?le.context:null,pure:n};return le===null||le!==En&&(le.owned?le.owned.push(i):le.owned=[i]),i}function Ot(e){if(e.state===0)return;if(e.state===Et)return jt(e);if(e.suspense&&Le(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Ft);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===Qe)_t(e);else if(e.state===Et){const l=pe;pe=null,ut(()=>jt(e,t[0]),!1),pe=l}}function ut(e,t){if(pe)return e();let n=!1;t||(pe=[]),Ge?n=!0:Ge=[],Ft++;try{const l=e();return hl(n),l}catch(l){n||(Ge=null),pe=null,Fn(l)}}function hl(e){if(pe&&(Rn(pe),pe=null),e)return;const t=Ge;Ge=null,t.length&&ut(()=>In(t),!1)}function Rn(e){for(let t=0;t<e.length;t++)Ot(e[t])}function bl(e){let t,n=0;for(t=0;t<e.length;t++){const l=e[t];l.user?e[n++]=l:Ot(l)}for(t=0;t<n;t++)Ot(e[t])}function jt(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const l=e.sources[n];if(l.sources){const r=l.state;r===Qe?l!==t&&(!l.updatedAt||l.updatedAt<Ft)&&Ot(l):r===Et&&jt(l,t)}}}function zn(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Et,n.pure?pe.push(n):Ge.push(n),n.observers&&zn(n))}}function wt(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),l=e.sourceSlots.pop(),r=n.observers;if(r&&r.length){const i=r.pop(),o=n.observerSlots.pop();l<r.length&&(i.sourceSlots[o]=l,r[l]=i,n.observerSlots[l]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)wt(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)wt(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function pl(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Fn(e,t=le){throw pl(e)}function Qt(e){if(typeof e=="function"&&!e.length)return Qt(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const l=Qt(e[n]);Array.isArray(l)?t.push.apply(t,l):t.push(l)}return t}return e}function xl(e,t){return function(l){let r;return z(()=>r=Le(()=>(le.context={...le.context,[e]:l.value},gl(()=>l.children))),void 0),r}}const ml=Symbol("fallback");function fn(e){for(let t=0;t<e.length;t++)e[t]()}function wl(e,t,n={}){let l=[],r=[],i=[],o=0,s=t.length>1?[]:null;return rn(()=>fn(i)),()=>{let a=e()||[],g=a.length,p,f;return a[Jt],Le(()=>{let M,E,J,Z,ie,re,se,te,ue;if(g===0)o!==0&&(fn(i),i=[],l=[],r=[],o=0,s&&(s=[])),n.fallback&&(l=[ml],r[0]=Dt(D=>(i[0]=D,n.fallback())),o=1);else if(o===0){for(r=new Array(g),f=0;f<g;f++)l[f]=a[f],r[f]=Dt(h);o=g}else{for(J=new Array(g),Z=new Array(g),s&&(ie=new Array(g)),re=0,se=Math.min(o,g);re<se&&l[re]===a[re];re++);for(se=o-1,te=g-1;se>=re&&te>=re&&l[se]===a[te];se--,te--)J[te]=r[se],Z[te]=i[se],s&&(ie[te]=s[se]);for(M=new Map,E=new Array(te+1),f=te;f>=re;f--)ue=a[f],p=M.get(ue),E[f]=p===void 0?-1:p,M.set(ue,f);for(p=re;p<=se;p++)ue=l[p],f=M.get(ue),f!==void 0&&f!==-1?(J[f]=r[p],Z[f]=i[p],s&&(ie[f]=s[p]),f=E[f],M.set(ue,f)):i[p]();for(f=re;f<g;f++)f in J?(r[f]=J[f],i[f]=Z[f],s&&(s[f]=ie[f],s[f](f))):r[f]=Dt(h);r=r.slice(0,o=g),l=a.slice(0)}return r});function h(M){if(i[f]=M,s){const[E,J]=Ne(f);return s[f]=J,t(a[f],E)}return t(a[f])}}}function u(e,t){return Le(()=>e(t||{}))}function At(){return!0}const en={get(e,t,n){return t===je?n:e.get(t)},has(e,t){return t===je?!0:e.has(t)},set:At,deleteProperty:At,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:At,deleteProperty:At}},ownKeys(e){return e.keys()}};function Wt(e){return(e=typeof e=="function"?e():e)?e:{}}function vl(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function R(...e){let t=!1;for(let o=0;o<e.length;o++){const s=e[o];t=t||!!s&&je in s,e[o]=typeof s=="function"?(t=!0,L(s)):s}if(Dn&&t)return new Proxy({get(o){for(let s=e.length-1;s>=0;s--){const a=Wt(e[s])[o];if(a!==void 0)return a}},has(o){for(let s=e.length-1;s>=0;s--)if(o in Wt(e[s]))return!0;return!1},keys(){const o=[];for(let s=0;s<e.length;s++)o.push(...Object.keys(Wt(e[s])));return[...new Set(o)]}},en);const n={},l=Object.create(null);for(let o=e.length-1;o>=0;o--){const s=e[o];if(!s)continue;const a=Object.getOwnPropertyNames(s);for(let g=a.length-1;g>=0;g--){const p=a[g];if(p==="__proto__"||p==="constructor")continue;const f=Object.getOwnPropertyDescriptor(s,p);if(!l[p])l[p]=f.get?{enumerable:!0,configurable:!0,get:vl.bind(n[p]=[f.get.bind(s)])}:f.value!==void 0?f:void 0;else{const h=n[p];h&&(f.get?h.push(f.get.bind(s)):f.value!==void 0&&h.push(()=>f.value))}}}const r={},i=Object.keys(l);for(let o=i.length-1;o>=0;o--){const s=i[o],a=l[s];a&&a.get?Object.defineProperty(r,s,a):r[s]=a?a.value:void 0}return r}function qn(e,...t){const n=t.length;if(Dn&&je in e){const r=n>1?t.flat():t[0],i=t.map(o=>new Proxy({get(s){return o.includes(s)?e[s]:void 0},has(s){return o.includes(s)&&s in e},keys(){return o.filter(s=>s in e)}},en));return i.push(new Proxy({get(o){return r.includes(o)?void 0:e[o]},has(o){return r.includes(o)?!1:o in e},keys(){return Object.keys(e).filter(o=>!r.includes(o))}},en)),i}const l=[];for(let r=0;r<=n;r++)l[r]={};for(const r of Object.getOwnPropertyNames(e)){let i=n;for(let a=0;a<t.length;a++)if(t[a].includes(r)){i=a;break}const o=Object.getOwnPropertyDescriptor(e,r);!o.get&&!o.set&&o.enumerable&&o.writable&&o.configurable?l[i][r]=o.value:Object.defineProperty(l[i],r,o)}return l}const $l=e=>`Stale read from <${e}>.`;function be(e){const t="fallback"in e&&{fallback:()=>e.fallback};return L(wl(()=>e.each,e.children,t||void 0))}function F(e){const t=e.keyed,n=L(()=>e.when,void 0,void 0),l=t?n:L(n,void 0,{equals:(r,i)=>!r==!i});return L(()=>{const r=l();if(r){const i=e.children;return typeof i=="function"&&i.length>0?Le(()=>i(t?r:()=>{if(!Le(l))throw $l("Show");return n()})):i}return e.fallback},void 0,void 0)}const Sl=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],_l=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...Sl]),kl=new Set(["innerHTML","textContent","innerText","children"]),Cl=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Al=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function Pl(e,t){const n=Al[e];return typeof n=="object"?n[t]?n.$:void 0:n}const Nl=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Ml=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),Tl={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},Ue=e=>L(()=>e());function Dl(e,t,n){let l=n.length,r=t.length,i=l,o=0,s=0,a=t[r-1].nextSibling,g=null;for(;o<r||s<i;){if(t[o]===n[s]){o++,s++;continue}for(;t[r-1]===n[i-1];)r--,i--;if(r===o){const p=i<l?s?n[s-1].nextSibling:n[i-s]:a;for(;s<i;)e.insertBefore(n[s++],p)}else if(i===s)for(;o<r;)(!g||!g.has(t[o]))&&t[o].remove(),o++;else if(t[o]===n[i-1]&&n[s]===t[r-1]){const p=t[--r].nextSibling;e.insertBefore(n[s++],t[o++].nextSibling),e.insertBefore(n[--i],p),t[r]=n[i]}else{if(!g){g=new Map;let f=s;for(;f<i;)g.set(n[f],f++)}const p=g.get(t[o]);if(p!=null)if(s<p&&p<i){let f=o,h=1,M;for(;++f<r&&f<i&&!((M=g.get(t[f]))==null||M!==p+h);)h++;if(h>p-s){const E=t[o];for(;s<p;)e.insertBefore(n[s++],E)}else e.replaceChild(n[s++],t[o++])}else o++;else t[o++].remove()}}}const gn="_$DX_DELEGATE";function Il(e,t,n,l={}){let r;return Dt(i=>{r=i,t===document?e():c(t,e(),t.firstChild?null:void 0,n)},l.owner),()=>{r(),t.textContent=""}}function _(e,t,n,l){let r;const i=()=>{const s=document.createElement("template");return s.innerHTML=e,s.content.firstChild},o=()=>(r||(r=i())).cloneNode(!0);return o.cloneNode=o,o}function He(e,t=window.document){const n=t[gn]||(t[gn]=new Set);for(let l=0,r=e.length;l<r;l++){const i=e[l];n.has(i)||(n.add(i),t.addEventListener(i,zl))}}function Ye(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function El(e,t,n,l){l==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,l)}function Ol(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}function de(e,t){t==null?e.removeAttribute("class"):e.className=t}function Un(e,t,n,l){if(l)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const r=n[0];e.addEventListener(t,n[0]=i=>r.call(e,n[1],i))}else e.addEventListener(t,n,typeof n!="function"&&n)}function jl(e,t,n={}){const l=Object.keys(t||{}),r=Object.keys(n);let i,o;for(i=0,o=r.length;i<o;i++){const s=r[i];!s||s==="undefined"||t[s]||(yn(e,s,!1),delete n[s])}for(i=0,o=l.length;i<o;i++){const s=l[i],a=!!t[s];!s||s==="undefined"||n[s]===a||!a||(yn(e,s,!0),n[s]=a)}return n}function Kn(e,t,n){if(!t)return n?Ye(e,"style"):t;const l=e.style;if(typeof t=="string")return l.cssText=t;typeof n=="string"&&(l.cssText=n=void 0),n||(n={}),t||(t={});let r,i;for(i in n)t[i]==null&&l.removeProperty(i),delete n[i];for(i in t)r=t[i],r!==n[i]&&(l.setProperty(i,r),n[i]=r);return n}function on(e,t,n){n!=null?e.style.setProperty(t,n):e.style.removeProperty(t)}function Bn(e,t={},n,l){const r={};return l||z(()=>r.children=vt(e,t.children,r.children)),z(()=>typeof t.ref=="function"&&Vn(t.ref,e)),z(()=>Ll(e,t,n,!0,r,!0)),r}function Vn(e,t,n){return Le(()=>e(t,n))}function c(e,t,n,l){if(n!==void 0&&!l&&(l=[]),typeof t!="function")return vt(e,t,l,n);z(r=>vt(e,t(),r,n),l)}function Ll(e,t,n,l,r={},i=!1){t||(t={});for(const o in r)if(!(o in t)){if(o==="children")continue;r[o]=hn(e,o,null,r[o],n,i,t)}for(const o in t){if(o==="children")continue;const s=t[o];r[o]=hn(e,o,s,r[o],n,i,t)}}function Rl(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function yn(e,t,n){const l=t.trim().split(/\s+/);for(let r=0,i=l.length;r<i;r++)e.classList.toggle(l[r],n)}function hn(e,t,n,l,r,i,o){let s,a,g,p,f;if(t==="style")return Kn(e,n,l);if(t==="classList")return jl(e,n,l);if(n===l)return l;if(t==="ref")i||n(e);else if(t.slice(0,3)==="on:"){const h=t.slice(3);l&&e.removeEventListener(h,l,typeof l!="function"&&l),n&&e.addEventListener(h,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const h=t.slice(10);l&&e.removeEventListener(h,l,!0),n&&e.addEventListener(h,n,!0)}else if(t.slice(0,2)==="on"){const h=t.slice(2).toLowerCase(),M=Nl.has(h);if(!M&&l){const E=Array.isArray(l)?l[0]:l;e.removeEventListener(h,E)}(M||n)&&(Un(e,h,n,M),M&&He([h]))}else if(t.slice(0,5)==="attr:")Ye(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")Ol(e,t.slice(5),n);else if((f=t.slice(0,5)==="prop:")||(g=kl.has(t))||!r&&((p=Pl(t,e.tagName))||(a=_l.has(t)))||(s=e.nodeName.includes("-")||"is"in o))f&&(t=t.slice(5),a=!0),t==="class"||t==="className"?de(e,n):s&&!a&&!g?e[Rl(t)]=n:e[p||t]=n;else{const h=r&&t.indexOf(":")>-1&&Tl[t.split(":")[0]];h?El(e,h,t,n):Ye(e,Cl[t]||t,n)}return n}function zl(e){let t=e.target;const n=`$$${e.type}`,l=e.target,r=e.currentTarget,i=a=>Object.defineProperty(e,"target",{configurable:!0,value:a}),o=()=>{const a=t[n];if(a&&!t.disabled){const g=t[`${n}Data`];if(g!==void 0?a.call(t,g,e):a.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&i(t.host),!0},s=()=>{for(;o()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const a=e.composedPath();i(a[0]);for(let g=0;g<a.length-2&&(t=a[g],!!o());g++){if(t._$host){t=t._$host,s();break}if(t.parentNode===r)break}}else s();i(l)}function vt(e,t,n,l,r){for(;typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,o=l!==void 0;if(e=o&&n[0]&&n[0].parentNode||e,i==="string"||i==="number"){if(i==="number"&&(t=t.toString(),t===n))return n;if(o){let s=n[0];s&&s.nodeType===3?s.data!==t&&(s.data=t):s=document.createTextNode(t),n=st(e,n,l,s)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||i==="boolean")n=st(e,n,l);else{if(i==="function")return z(()=>{let s=t();for(;typeof s=="function";)s=s();n=vt(e,s,n,l)}),()=>n;if(Array.isArray(t)){const s=[],a=n&&Array.isArray(n);if(tn(s,t,n,r))return z(()=>n=vt(e,s,n,l,!0)),()=>n;if(s.length===0){if(n=st(e,n,l),o)return n}else a?n.length===0?bn(e,s,l):Dl(e,n,s):(n&&st(e),bn(e,s));n=s}else if(t.nodeType){if(Array.isArray(n)){if(o)return n=st(e,n,l,t);st(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function tn(e,t,n,l){let r=!1;for(let i=0,o=t.length;i<o;i++){let s=t[i],a=n&&n[e.length],g;if(!(s==null||s===!0||s===!1))if((g=typeof s)=="object"&&s.nodeType)e.push(s);else if(Array.isArray(s))r=tn(e,s,a)||r;else if(g==="function")if(l){for(;typeof s=="function";)s=s();r=tn(e,Array.isArray(s)?s:[s],Array.isArray(a)?a:[a])||r}else e.push(s),r=!0;else{const p=String(s);a&&a.nodeType===3&&a.data===p?e.push(a):e.push(document.createTextNode(p))}}return r}function bn(e,t,n=null){for(let l=0,r=t.length;l<r;l++)e.insertBefore(t[l],n)}function st(e,t,n,l){if(n===void 0)return e.textContent="";const r=l||document.createTextNode("");if(t.length){let i=!1;for(let o=t.length-1;o>=0;o--){const s=t[o];if(r!==s){const a=s.parentNode===e;!i&&!o?a?e.replaceChild(r,s):e.insertBefore(r,n):a&&s.remove()}else i=!0}}else e.insertBefore(r,n);return[r]}const Fl="http://www.w3.org/2000/svg";function ql(e,t=!1,n=void 0){return t?document.createElementNS(Fl,e):document.createElement(e,{is:n})}function Ul(e,t){const n=L(e);return L(()=>{const l=n();switch(typeof l){case"function":return Le(()=>l(t));case"string":const r=Ml.has(l),i=ql(l,r,Le(()=>t.is));return Bn(i,t,r),i}})}function Wn(e){const[,t]=qn(e,["component"]);return Ul(()=>e.component,t)}const ot={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Kl=_("<svg>");const Bl=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),U=e=>{const[t,n]=qn(e,["color","size","strokeWidth","children","class","name","iconNode","absoluteStrokeWidth"]);return(()=>{var l=Kl();return Bn(l,R(ot,{get width(){return t.size??ot.width},get height(){return t.size??ot.height},get stroke(){return t.color??ot.stroke},get"stroke-width"(){return Ue(()=>!!t.absoluteStrokeWidth)()?Number(t.strokeWidth??ot["stroke-width"])*24/Number(t.size):Number(t.strokeWidth??ot["stroke-width"])},get class(){return`lucide lucide-${Bl((t==null?void 0:t.name)??"icon")} ${t.class!=null?t.class:""}`}},n),!0,!0),c(l,u(be,{get each(){return t.iconNode},children:([r,i])=>u(Wn,R({component:r},i))})),l})()},Vl=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Wl=e=>u(U,R(e,{name:"AlertCircle",iconNode:Vl})),Gl=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],Yl=e=>u(U,R(e,{name:"BarChart2",iconNode:Gl})),Hl=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Xl=e=>u(U,R(e,{name:"CheckCircle2",iconNode:Hl})),Jl=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Zl=e=>u(U,R(e,{name:"Check",iconNode:Jl})),Ql=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],er=e=>u(U,R(e,{name:"ChevronDown",iconNode:Ql})),tr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],nr=e=>u(U,R(e,{name:"Clock",iconNode:tr})),lr=[["polyline",{points:"10 15 15 20 20 15",key:"axus6l"}],["path",{d:"M4 4h7a4 4 0 0 1 4 4v12",key:"wcbgct"}]],rr=e=>u(U,R(e,{name:"CornerRightDown",iconNode:lr})),ir=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],sr=e=>u(U,R(e,{name:"Database",iconNode:ir})),or=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]],ar=e=>u(U,R(e,{name:"DownloadCloud",iconNode:or})),cr=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],dr=e=>u(U,R(e,{name:"Download",iconNode:cr})),ur=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],fr=e=>u(U,R(e,{name:"ExternalLink",iconNode:ur})),gr=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],yr=e=>u(U,R(e,{name:"Film",iconNode:gr})),hr=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],br=e=>u(U,R(e,{name:"Filter",iconNode:hr})),pr=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],xr=e=>u(U,R(e,{name:"Grid3x3",iconNode:pr})),mr=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],wr=e=>u(U,R(e,{name:"GripVertical",iconNode:mr})),vr=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],$r=e=>u(U,R(e,{name:"HardDrive",iconNode:vr})),Sr=[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]],_r=e=>u(U,R(e,{name:"Layers",iconNode:Sr})),kr=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Cr=e=>u(U,R(e,{name:"LayoutDashboard",iconNode:kr})),Ar=[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]],Pr=e=>u(U,R(e,{name:"Loader",iconNode:Ar})),Nr=[["path",{d:"M5 12h14",key:"1ays0h"}]],Mr=e=>u(U,R(e,{name:"Minus",iconNode:Nr})),Tr=[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]],Dr=e=>u(U,R(e,{name:"Move",iconNode:Tr})),Ir=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Er=e=>u(U,R(e,{name:"Music",iconNode:Ir})),Or=[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]],jr=e=>u(U,R(e,{name:"Pause",iconNode:Or})),Lr=[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]],Rr=e=>u(U,R(e,{name:"Pen",iconNode:Lr})),zr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],Fr=e=>u(U,R(e,{name:"PlayCircle",iconNode:zr})),qr=[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]],Ur=e=>u(U,R(e,{name:"Play",iconNode:qr})),Kr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Br=e=>u(U,R(e,{name:"PlusCircle",iconNode:Kr})),Vr=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Wr=e=>u(U,R(e,{name:"Plus",iconNode:Vr})),Gr=[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]],Yr=e=>u(U,R(e,{name:"Puzzle",iconNode:Gr})),Hr=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Xr=e=>u(U,R(e,{name:"Search",iconNode:Hr})),Jr=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Zr=e=>u(U,R(e,{name:"Settings",iconNode:Jr})),Qr=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ei=e=>u(U,R(e,{name:"ShieldCheck",iconNode:Qr})),ti=[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]],ni=e=>u(U,R(e,{name:"SkipBack",iconNode:ti})),li=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],ri=e=>u(U,R(e,{name:"SkipForward",iconNode:li})),ii=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],si=e=>u(U,R(e,{name:"Sliders",iconNode:ii})),oi=[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]],ai=e=>u(U,R(e,{name:"Terminal",iconNode:oi})),ci=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],di=e=>u(U,R(e,{name:"Trash2",iconNode:ci})),ui=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fi=e=>u(U,R(e,{name:"X",iconNode:ui})),gi=[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]],yi=e=>u(U,R(e,{name:"Zap",iconNode:gi}));var hi=_('<svg viewBox="0 0 24 24"fill=none stroke=currentColor strokeWidth=2><rect x=3 y=3 width=18 height=18 rx=2>');const bi={zap:yi,"plus-circle":Br,layers:_r,sliders:si,puzzle:Yr,"chevron-down":er,"trash-2":di,"download-cloud":ar,music:Er,"shield-check":ei,database:sr,"alert-circle":Wl,"check-circle-2":Xl,loader:Pr,terminal:ai,search:Xr,filter:br,film:yr,play:Ur,"external-link":fr,x:fi,"play-circle":Fr,"skip-back":ni,pause:jr,"skip-forward":ri,"layout-dashboard":Cr,move:Dr,grip:wr,grid:xr,plus:Wr,minus:Mr,settings:Zr,"bar-chart":Yl,"hard-drive":$r,clock:nr,download:dr,"edit-2":Rr,check:Zl,"corner-right-down":rr};function X(e){const t=bi[e.name];return t?u(Wn,{component:t,get class(){return e.class}}):(()=>{var n=hi();return z(()=>Ye(n,"class",e.class)),n})()}const nn=Symbol("store-raw"),dt=Symbol("store-node"),We=Symbol("store-has"),Gn=Symbol("store-self");function Yn(e){let t=e[je];if(!t&&(Object.defineProperty(e,je,{value:t=new Proxy(e,mi)}),!Array.isArray(e))){const n=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let r=0,i=n.length;r<i;r++){const o=n[r];l[o].get&&Object.defineProperty(e,o,{enumerable:l[o].enumerable,get:l[o].get.bind(t)})}}return t}function Lt(e){let t;return e!=null&&typeof e=="object"&&(e[je]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function $t(e,t=new Set){let n,l,r,i;if(n=e!=null&&e[nn])return n;if(!Lt(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,s=e.length;o<s;o++)r=e[o],(l=$t(r,t))!==r&&(e[o]=l)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let a=0,g=o.length;a<g;a++)i=o[a],!s[i].get&&(r=e[i],(l=$t(r,t))!==r&&(e[i]=l))}return e}function Rt(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function St(e,t,n){if(e[t])return e[t];const[l,r]=Ne(n,{equals:!1,internal:!0});return l.$=r,e[t]=l}function pi(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===je||t===dt||(delete n.value,delete n.writable,n.get=()=>e[je][t]),n}function Hn(e){Zt()&&St(Rt(e,dt),Gn)()}function xi(e){return Hn(e),Reflect.ownKeys(e)}const mi={get(e,t,n){if(t===nn)return e;if(t===je)return n;if(t===Jt)return Hn(e),n;const l=Rt(e,dt),r=l[t];let i=r?r():e[t];if(t===dt||t===We||t==="__proto__")return i;if(!r){const o=Object.getOwnPropertyDescriptor(e,t);Zt()&&(typeof i!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(i=St(l,t,i)())}return Lt(i)?Yn(i):i},has(e,t){return t===nn||t===je||t===Jt||t===dt||t===We||t==="__proto__"?!0:(Zt()&&St(Rt(e,We),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:xi,getOwnPropertyDescriptor:pi};function zt(e,t,n,l=!1){if(!l&&e[t]===n)return;const r=e[t],i=e.length;n===void 0?(delete e[t],e[We]&&e[We][t]&&r!==void 0&&e[We][t].$()):(e[t]=n,e[We]&&e[We][t]&&r===void 0&&e[We][t].$());let o=Rt(e,dt),s;if((s=St(o,t,r))&&s.$(()=>n),Array.isArray(e)&&e.length!==i){for(let a=e.length;a<i;a++)(s=o[a])&&s.$();(s=St(o,"length",i))&&s.$(e.length)}(s=o[Gn])&&s.$()}function Xn(e,t){const n=Object.keys(t);for(let l=0;l<n.length;l+=1){const r=n[l];zt(e,r,t[r])}}function wi(e,t){if(typeof t=="function"&&(t=t(e)),t=$t(t),Array.isArray(t)){if(e===t)return;let n=0,l=t.length;for(;n<l;n++){const r=t[n];e[n]!==r&&zt(e,n,r)}zt(e,"length",l)}else Xn(e,t)}function xt(e,t,n=[]){let l,r=e;if(t.length>1){l=t.shift();const o=typeof l,s=Array.isArray(e);if(Array.isArray(l)){for(let a=0;a<l.length;a++)xt(e,[l[a]].concat(t),n);return}else if(s&&o==="function"){for(let a=0;a<e.length;a++)l(e[a],a)&&xt(e,[a].concat(t),n);return}else if(s&&o==="object"){const{from:a=0,to:g=e.length-1,by:p=1}=l;for(let f=a;f<=g;f+=p)xt(e,[f].concat(t),n);return}else if(t.length>1){xt(e[l],t,[l].concat(n));return}r=e[l],n=[l].concat(n)}let i=t[0];typeof i=="function"&&(i=i(r,n),i===r)||l===void 0&&i==null||(i=$t(i),l===void 0||Lt(r)&&Lt(i)&&!Array.isArray(i)?Xn(r,i):zt(e,l,i))}function vi(...[e,t]){const n=$t(e||{}),l=Array.isArray(n),r=Yn(n);function i(...o){dl(()=>{l&&o.length===1?wi(n,o[0]):xt(n,o)})}return[r,i]}const Jn="ytdl-go:app-state:v1",$i=new Set(["download","library","settings","dashboard"]),Si=new Set(["prompt","overwrite","skip","rename"]),_i=new Set(["video","audio"]),ki=new Set(["newest","oldest","creator_asc","creator_desc","collection_asc","collection_desc","playlist_asc","playlist_desc"]),Ci=80,Zn=32,Qn=1440*60,Oe={output:"{title}.{ext}",quality:"best",jobs:1,timeout:180,format:"",audioOnly:!1,onDuplicate:"prompt",useCookies:!0,poTokenExtension:!1},Ai=()=>({ui:{activeTab:"download",isAdvanced:!1},settings:{...Oe},library:{downloads:[],activeMediaType:"video",filters:{creator:"",collection:"",playlist:"",savedPlaylistId:""},sortKey:"newest",savedPlaylists:[],playlistAssignments:{}},player:{active:!1,selectedMedia:null},dashboard:{widgets:[{id:"quick-download",type:"quick-download",col:1,row:1,colSpan:4,rowSpan:2},{id:"recent-downloads",type:"recent-downloads",col:5,row:1,colSpan:8,rowSpan:4},{id:"system-stats",type:"system-stats",col:1,row:3,colSpan:4,rowSpan:2},{id:"storage",type:"storage",col:1,row:5,colSpan:4,rowSpan:2}]},download:{urlInput:"",isDownloading:!1,jobStatus:null,progressTasks:{},logMessages:[],duplicateQueue:[],duplicateError:""}}),el=ul();let pn=!1;const Pi=e=>({ui:{activeTab:e.ui.activeTab,isAdvanced:e.ui.isAdvanced},settings:{...e.settings},library:{activeMediaType:e.library.activeMediaType,filters:{creator:e.library.filters.creator,collection:e.library.filters.collection,playlist:e.library.filters.playlist,savedPlaylistId:e.library.filters.savedPlaylistId},sortKey:e.library.sortKey,savedPlaylists:e.library.savedPlaylists,playlistAssignments:e.library.playlistAssignments},download:{urlInput:e.download.urlInput},dashboard:{widgets:e.dashboard.widgets}}),he=(e,t)=>typeof e=="string"?e:t,Gt=(e,t)=>typeof e=="boolean"?e:t,Ni=e=>he(e,"").trim().replace(/\s+/g," ").slice(0,Ci),xn=(e,t,n)=>{const l=typeof e=="number"?e:Number(e);if(!Number.isFinite(l))return t;const r=Math.trunc(l);return r<=0?t:Math.min(r,n)},Mi=e=>{const t=e&&typeof e=="object"?e:{},n=he(t.onDuplicate,Oe.onDuplicate);return{output:he(t.output,Oe.output),quality:he(t.quality,Oe.quality),jobs:xn(t.jobs,Oe.jobs,Zn),timeout:xn(t.timeout,Oe.timeout,Qn),format:he(t.format,Oe.format),audioOnly:Gt(t.audioOnly,Oe.audioOnly),onDuplicate:Si.has(n)?n:Oe.onDuplicate,useCookies:Gt(t.useCookies,Oe.useCookies),poTokenExtension:Gt(t.poTokenExtension,Oe.poTokenExtension)}},Ti=(e,t=new Set)=>{const n=e&&typeof e=="object"?e:{},l=he(n.savedPlaylistId,"").trim();return{creator:he(n.creator,""),collection:he(n.collection,""),playlist:he(n.playlist,""),savedPlaylistId:t.has(l)?l:""}},Di=e=>{if(!Array.isArray(e))return[];const t=new Set,n=[];for(const l of e){const r=l&&typeof l=="object"?l:{},i=he(r.id,"").trim(),o=Ni(r.name);i===""||o===""||t.has(i)||(t.add(i),n.push({id:i,name:o,createdAt:he(r.createdAt,""),updatedAt:he(r.updatedAt,"")}))}return n},Ii=(e,t)=>{const n=e&&typeof e=="object"?e:{},l={};for(const[r,i]of Object.entries(n)){const o=String(r||"").trim(),s=he(i,"").trim();o===""||s===""||!t.has(s)||(l[o]=s)}return l},Ei=e=>{const t=e&&typeof e=="object"?e:{},n=he(t.activeMediaType,"video"),l=he(t.sortKey,"newest"),r=Di(t.savedPlaylists),i=new Set(r.map(o=>o.id));return{activeMediaType:_i.has(n)?n:"video",filters:Ti(t.filters,i),sortKey:ki.has(l)?l:"newest",savedPlaylists:r,playlistAssignments:Ii(t.playlistAssignments,i)}},Oi=e=>{if(!Array.isArray(e))return null;const t=[];for(const n of e){const l=n&&typeof n=="object"?n:{},r=he(l.id,"").trim(),i=he(l.type,"").trim(),o=typeof l.col=="number"?Math.trunc(l.col):Number(l.col),s=typeof l.row=="number"?Math.trunc(l.row):Number(l.row),a=typeof l.colSpan=="number"?Math.trunc(l.colSpan):Number(l.colSpan),g=typeof l.rowSpan=="number"?Math.trunc(l.rowSpan):Number(l.rowSpan);r===""||i===""||!Number.isFinite(o)||o<1||!Number.isFinite(s)||s<1||!Number.isFinite(a)||a<1||!Number.isFinite(g)||g<1||t.push({id:r,type:i,col:o,row:s,colSpan:a,rowSpan:g})}return t.length>0?t:null},ji=()=>{if(typeof window>"u")return null;try{const e=window.localStorage.getItem(Jn);return e?JSON.parse(e):null}catch(e){return pn||(console.warn("Failed to read persisted app state from localStorage:",e),pn=!0),null}},Li=()=>{var a,g,p,f;const e=Ai(),t=ji();if(!t||typeof t!="object")return e;const n=$i.has((a=t==null?void 0:t.ui)==null?void 0:a.activeTab)?t.ui.activeTab:e.ui.activeTab,l=typeof((g=t==null?void 0:t.ui)==null?void 0:g.isAdvanced)=="boolean"?t.ui.isAdvanced:e.ui.isAdvanced,r=Mi(t.settings),i=Ei(t.library),o=typeof((p=t==null?void 0:t.download)==null?void 0:p.urlInput)=="string"?t.download.urlInput:e.download.urlInput,s=Oi((f=t==null?void 0:t.dashboard)==null?void 0:f.widgets)??e.dashboard.widgets;return{...e,ui:{activeTab:n,isAdvanced:l},settings:{...r},library:{...e.library,activeMediaType:i.activeMediaType,filters:i.filters,sortKey:i.sortKey,savedPlaylists:i.savedPlaylists,playlistAssignments:i.playlistAssignments},download:{...e.download,urlInput:o},dashboard:{widgets:s}}};function Ri(e){const[t,n]=vi(Li());let l=!1;return mt(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(Jn,JSON.stringify(Pi(t))),l=!1}catch(r){l||(console.warn("Failed to persist app state to localStorage:",r),l=!0)}}),u(el.Provider,{value:{state:t,setState:n},get children(){return e.children}})}function ft(){const e=fl(el);if(!e)throw new Error("useAppStore must be used within an AppStoreProvider");return e}var zi=_('<div class="cursor-grab active:cursor-grabbing p-1 rounded-lg hover:bg-white/10 text-gray-500 hover:text-gray-300 transition-colors">'),Fi=_('<div class="absolute bottom-0 right-0 w-6 h-6 flex items-end justify-end pr-1 pb-1 cursor-se-resize text-gray-600 hover:text-gray-300 transition-colors"><svg width=10 height=10 viewBox="0 0 10 10"fill=currentColor><circle cx=8 cy=8 r=1.5></circle><circle cx=4 cy=8 r=1.5></circle><circle cx=8 cy=4 r=1.5>'),qi=_('<div class="relative flex flex-col bg-[#0a0c14] border border-white/10 rounded-2xl overflow-hidden"><div class="flex items-center justify-between px-4 py-3 border-b border-white/5 flex-shrink-0"><span class="text-sm font-semibold text-gray-300"></span></div><div class="flex-1 overflow-hidden p-3">');const Ui={"quick-download":"Quick Download","recent-downloads":"Recent Downloads","system-stats":"System Stats",storage:"Storage"};function Ki(e){const t=()=>e.widget,n=()=>e.isEditing,l=()=>e.isDragging,r=()=>e.isResizing,i=()=>({"grid-column":`${t().col} / span ${t().colSpan}`,"grid-row":`${t().row} / span ${t().rowSpan}`,opacity:l()?"0.4":"1","z-index":l()||r()?"100":"1",transition:l()||r()?"none":"opacity 0.2s"}),o=()=>l()||r();return(()=>{var s=qi(),a=s.firstChild,g=a.firstChild,p=a.nextSibling;return c(g,()=>Ui[t().type]||t().type),c(a,u(F,{get when(){return n()},get children(){var f=zi();return f.$$mousedown=h=>{h.preventDefault(),e.onDragStart&&e.onDragStart(h,t().id)},c(f,u(X,{name:"grip",class:"w-4 h-4"})),f}}),null),c(p,()=>e.children),c(s,u(F,{get when(){return n()},get children(){var f=Fi();return f.$$mousedown=h=>{h.preventDefault(),h.stopPropagation(),e.onResizeStart&&e.onResizeStart(h,t().id)},f}}),null),z(f=>{var h=i(),M=o()?"none":"auto";return f.e=Kn(s,h,f.e),M!==f.t&&on(p,"pointer-events",f.t=M),f},{e:void 0,t:void 0}),s})()}He(["mousedown"]);var Bi=_('<div class="flex flex-col gap-3 h-full"><input type=text placeholder="Paste URL here..."class="w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-sm text-white placeholder-gray-500 outline-none focus:border-blue-500/50 focus:bg-white/8 transition-all"><div class="flex gap-2"><select class="flex-1 bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-sm text-gray-300 outline-none focus:border-blue-500/50 transition-all"><option value=best>Best Quality</option><option value=1080p>1080p</option><option value=720p>720p</option><option value=480p>480p</option><option value=audio>Audio Only</option></select><button class="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-sm font-semibold rounded-xl transition-all">Download');function Vi({rowSpan:e,colSpan:t}){const[n,l]=Ne(""),[r,i]=Ne("best"),o=()=>{n().trim()&&(window.dispatchEvent(new CustomEvent("ytdl-quick-download",{detail:{url:n(),format:r()}})),l(""))};return(()=>{var s=Bi(),a=s.firstChild,g=a.nextSibling,p=g.firstChild,f=p.nextSibling;return a.$$keydown=h=>h.key==="Enter"&&o(),a.$$input=h=>l(h.target.value),p.addEventListener("change",h=>i(h.target.value)),f.$$click=o,z(()=>a.value=n()),z(()=>p.value=r()),s})()}He(["input","keydown","click"]);var Wi=_('<div class="flex items-center justify-between"><span class="text-2xl font-bold text-white"></span><span class="text-xs text-gray-500">recent files'),Gi=_('<div class="flex-1 flex items-center justify-center text-gray-600 text-sm">No downloads yet'),Yi=_('<div class="flex flex-col gap-2 h-full overflow-hidden">'),Hi=_('<img alt class="w-full h-full object-cover">'),Xi=_('<div class="w-12 h-9 bg-white/10 rounded-lg flex-shrink-0 overflow-hidden">'),Ji=_('<div class="text-xs text-gray-500 truncate">'),Zi=_('<div class="flex items-center gap-3 p-2 bg-white/5 rounded-xl overflow-hidden"><div class="flex-1 min-w-0"><div class="text-sm text-white truncate font-medium">');function Qi({rowSpan:e,colSpan:t}){const{state:n}=ft(),l=L(()=>(n.library.downloads||[]).slice(0,10)),r=L(()=>e>=4?3:e>=3?2:e>=2?1:0),i=L(()=>e>=4),o=L(()=>e>=3);return(()=>{var s=Yi();return c(s,u(F,{when:e<=1,get children(){var a=Wi(),g=a.firstChild;return c(g,()=>l().length),a}}),null),c(s,u(F,{when:e>1,get children(){return[u(be,{get each(){return l().slice(0,r())},children:a=>(()=>{var g=Zi(),p=g.firstChild,f=p.firstChild;return c(g,u(F,{get when(){return i()},get children(){var h=Xi();return c(h,u(F,{get when(){return a.thumbnail},get children(){var M=Hi();return z(()=>Ye(M,"src",a.thumbnail)),M}})),h}}),p),c(f,()=>a.title||a.filename),c(p,u(F,{get when(){return o()},get children(){var h=Ji();return c(h,()=>a.creator||a.channel||""),h}}),null),g})()}),u(F,{get when(){return l().length===0},get children(){return Gi()}})]}}),null),s})()}var es=_('<div class="grid grid-cols-2 gap-2"><div class="bg-white/5 rounded-xl p-3"><div class="text-xs text-gray-500 mb-1">Active</div><div class="text-2xl font-bold text-blue-400"></div></div><div class="bg-white/5 rounded-xl p-3"><div class="text-xs text-gray-500 mb-1">Completed</div><div class="text-2xl font-bold text-green-400">'),ts=_('<div class="bg-white/5 rounded-xl p-3"><div class="text-xs text-gray-500 mb-1">Last Job</div><div class="text-sm text-white truncate"></div><div class="text-xs text-gray-400">'),ns=_('<div class="flex items-center justify-between"><span class="text-sm text-gray-400">Active: <span class="text-blue-400 font-bold"></span></span><span class="text-sm text-gray-400">Done: <span class="text-green-400 font-bold">'),ls=_('<div class="flex flex-col gap-3 h-full">');function rs({rowSpan:e,colSpan:t}){const{state:n}=ft(),l=L(()=>n.download.isDownloading),r=L(()=>l()?1:0),i=L(()=>(n.library.downloads||[]).length),o=L(()=>n.download.jobStatus);return(()=>{var s=ls();return c(s,u(F,{when:e>=2,get children(){return[(()=>{var a=es(),g=a.firstChild,p=g.firstChild,f=p.nextSibling,h=g.nextSibling,M=h.firstChild,E=M.nextSibling;return c(f,r),c(E,i),a})(),u(F,{get when(){return e>=3&&o()},get children(){var a=ts(),g=a.firstChild,p=g.nextSibling,f=p.nextSibling;return c(p,()=>{var h;return((h=o())==null?void 0:h.jobId)||"None"}),c(f,()=>{var h;return((h=o())==null?void 0:h.status)||""}),a}})]}}),null),c(s,u(F,{when:e<2,get children(){var a=ns(),g=a.firstChild,p=g.firstChild,f=p.nextSibling,h=g.nextSibling,M=h.firstChild,E=M.nextSibling;return c(f,r),c(E,i),a}}),null),s})()}var is=_('<div class="grid grid-cols-2 gap-2"><div class="bg-white/5 rounded-xl p-3"><div class="text-xs text-gray-500 mb-1">Videos</div><div class="text-2xl font-bold text-purple-400"></div></div><div class="bg-white/5 rounded-xl p-3"><div class="text-xs text-gray-500 mb-1">Audio</div><div class="text-2xl font-bold text-pink-400">'),ss=_('<div class="bg-white/5 rounded-xl p-3"><div class="text-xs text-gray-500 mb-1">Total Media</div><div class="text-2xl font-bold text-white">'),os=_('<div class="flex items-center justify-between"><span class="text-sm text-gray-400">Videos: <span class="text-purple-400 font-bold"></span></span><span class="text-sm text-gray-400">Audio: <span class="text-pink-400 font-bold">'),as=_('<div class="flex flex-col gap-3 h-full">');function cs({rowSpan:e,colSpan:t}){const{state:n}=ft(),l=L(()=>n.library.downloads||[]),r=L(()=>l().filter(s=>s.type!=="audio").length),i=L(()=>l().filter(s=>s.type==="audio").length),o=L(()=>l().length);return(()=>{var s=as();return c(s,u(F,{when:e>=2,get children(){return[(()=>{var a=is(),g=a.firstChild,p=g.firstChild,f=p.nextSibling,h=g.nextSibling,M=h.firstChild,E=M.nextSibling;return c(f,r),c(E,i),a})(),u(F,{when:e>=3,get children(){var a=ss(),g=a.firstChild,p=g.nextSibling;return c(p,o),a}})]}}),null),c(s,u(F,{when:e<2,get children(){var a=os(),g=a.firstChild,p=g.firstChild,f=p.nextSibling,h=g.nextSibling,M=h.firstChild,E=M.nextSibling;return c(f,r),c(E,i),a}}),null),s})()}var ds=_('<div class="text-gray-500 text-sm">Unknown widget'),us=_('<span class="px-2 py-0.5 bg-orange-500/15 text-orange-400 text-xs font-bold rounded-full border border-orange-500/20">Editing'),fs=_('<button class="flex items-center gap-2 px-3 py-2 bg-blue-600/15 hover:bg-blue-600/25 text-blue-400 text-sm font-semibold rounded-xl border border-blue-500/20 transition-all">Add Widget'),gs=_('<div class="absolute inset-0 pointer-events-none z-0 rounded-xl overflow-hidden"style="background-image:linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);background-size:calc((100% + 8px) / 12) 88px;background-position:0 0">'),ys=_('<div class="fixed inset-y-0 right-0 w-72 bg-[#0a0c14] border-l border-white/10 z-50 flex flex-col shadow-2xl"style=top:0;bottom:0><div class="flex items-center justify-between px-5 py-4 border-b border-white/10"><span class="font-bold text-white text-sm">Add Widget</span><button class="p-1.5 rounded-lg hover:bg-white/10 text-gray-500 hover:text-gray-300 transition-colors"></button></div><div class="flex-1 overflow-y-auto p-4 space-y-3">'),hs=_('<div class="relative w-full min-h-full"><div class="flex items-center justify-between mb-6"><div class="flex items-center gap-3"><h1 class="text-xl font-bold text-white">Dashboard</h1></div><div class="flex items-center gap-2"><button></button></div></div><div class=relative><div class=relative style="display:grid;grid-template-columns:repeat(12, 1fr);grid-auto-rows:80px;gap:8px;min-height:608px">'),bs=_('<button class="w-full text-left p-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl transition-all"><div class="flex items-center gap-3 mb-1"><div class="w-8 h-8 bg-blue-600/20 rounded-lg flex items-center justify-center"></div><span class="text-sm font-semibold text-white"></span></div><p class="text-xs text-gray-500 ml-11">');const mn=80,ht=8,bt=12,ps=2,xs=1,ms=[{type:"quick-download",label:"Quick Download",icon:"download",description:"Paste a URL and start downloading",defaultColSpan:4,defaultRowSpan:2},{type:"recent-downloads",label:"Recent Downloads",icon:"clock",description:"See your most recent media",defaultColSpan:6,defaultRowSpan:3},{type:"system-stats",label:"System Stats",icon:"bar-chart",description:"Active and completed downloads",defaultColSpan:4,defaultRowSpan:2},{type:"storage",label:"Storage",icon:"hard-drive",description:"Media library statistics",defaultColSpan:4,defaultRowSpan:2}];function ws(e,t,n){switch(e){case"quick-download":return u(Vi,{rowSpan:t,colSpan:n});case"recent-downloads":return u(Qi,{rowSpan:t,colSpan:n});case"system-stats":return u(rs,{rowSpan:t,colSpan:n});case"storage":return u(cs,{rowSpan:t,colSpan:n});default:return ds()}}function vs(){const{state:e,setState:t}=ft(),[n,l]=Ne(!1),[r,i]=Ne(!1),[o,s]=Ne(null),[a,g]=Ne(null),[p,f]=Ne(null),[h,M]=Ne(null);let E;const J=L(()=>{var m;return((m=e.dashboard)==null?void 0:m.widgets)||[]}),Z=m=>{t("dashboard","widgets",m)},ie=()=>{if(!E)return{cellW:0,cellH:mn+ht};const m=E.getBoundingClientRect(),N=ht*(bt-1),w=(m.width-N)/bt,T=mn+ht;return{cellW:w,cellH:T,rect:m}},re=(m,N)=>{const{cellW:w,cellH:T,rect:k}=ie();if(!k||w<=0)return{col:1,row:1};const ne=m-k.left,Y=N-k.top,we=Math.max(1,Math.min(bt,Math.floor(ne/(w+ht))+1)),B=Math.max(1,Math.floor(Y/T)+1);return{col:we,row:B}},se=m=>{const N=o(),w=a();if(N){const{col:T,row:k}=re(m.clientX,m.clientY),ne=J().find(B=>B.id===N.widgetId);if(!ne)return;const Y=Math.max(1,Math.min(bt-ne.colSpan+1,T)),we=Math.max(1,k);f({col:Y,row:we})}if(w){const T=J().find(G=>G.id===w.widgetId);if(!T)return;const{cellW:k,cellH:ne,rect:Y}=ie();if(!Y||k<=0)return;const we=m.clientX-w.startMouseX,B=m.clientY-w.startMouseY,Q=Math.round(we/(k+ht)),ae=Math.round(B/ne),y=Math.max(ps,Math.min(bt-T.col+1,w.startColSpan+Q)),C=Math.max(xs,w.startRowSpan+ae);M({colSpan:y,rowSpan:C})}},te=()=>{const m=o(),N=a();if(m){const w=p();w&&Z(T=>T.map(k=>k.id===m.widgetId?{...k,col:w.col,row:w.row}:k)),s(null),f(null)}if(N){const w=h();w&&Z(T=>T.map(k=>k.id===N.widgetId?{...k,colSpan:w.colSpan,rowSpan:w.rowSpan}:k)),g(null),M(null)}},ue=(m,N)=>{const w=J().find(T=>T.id===N);w&&(s({widgetId:N,startMouseX:m.clientX,startMouseY:m.clientY,startCol:w.col,startRow:w.row}),f({col:w.col,row:w.row}))},D=(m,N)=>{const w=J().find(T=>T.id===N);w&&(g({widgetId:N,startMouseX:m.clientX,startMouseY:m.clientY,startColSpan:w.colSpan,startRowSpan:w.rowSpan}),M({colSpan:w.colSpan,rowSpan:w.rowSpan}))},I=m=>{var k;const N=typeof globalThis<"u"&&((k=globalThis.crypto)!=null&&k.randomUUID)?globalThis.crypto.randomUUID():`${m.type}-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,T={id:`${m.type}-${N}`,type:m.type,col:1,row:1,colSpan:m.defaultColSpan,rowSpan:m.defaultRowSpan};Z(ne=>[...ne,T]),i(!1)},K=m=>{const N=o(),w=a();let T={...m};if(N&&N.widgetId===m.id){const k=p();k&&(T={...T,col:k.col,row:k.row})}if(w&&w.widgetId===m.id){const k=h();k&&(T={...T,colSpan:k.colSpan,rowSpan:k.rowSpan})}return T};return(()=>{var m=hs(),N=m.firstChild,w=N.firstChild;w.firstChild;var T=w.nextSibling,k=T.firstChild,ne=N.nextSibling,Y=ne.firstChild;c(w,u(F,{get when(){return n()},get children(){return us()}}),null),c(T,u(F,{get when(){return n()},get children(){var B=fs(),Q=B.firstChild;return B.$$click=()=>i(ae=>!ae),c(B,u(X,{name:"plus",class:"w-4 h-4"}),Q),B}}),k),k.$$click=()=>{const B=n();l(Q=>!Q),B&&(i(!1),s(null),g(null),f(null),M(null))},c(k,u(X,{get name(){return n()?"check":"edit-2"},class:"w-4 h-4"}),null),c(k,()=>n()?"Done":"Edit",null),c(ne,u(F,{get when(){return n()},get children(){return gs()}}),Y),Y.addEventListener("mouseleave",te),Y.$$mouseup=te,Y.$$mousemove=se;var we=E;return typeof we=="function"?Vn(we,Y):E=Y,c(Y,u(be,{get each(){return J()},children:B=>{const Q=()=>K(B),ae=()=>{var C;return((C=o())==null?void 0:C.widgetId)===B.id},y=()=>{var C;return((C=a())==null?void 0:C.widgetId)===B.id};return u(Ki,{get widget(){return Q()},get isEditing(){return n()},get isDragging(){return ae()},get isResizing(){return y()},onDragStart:ue,onResizeStart:D,get children(){return ws(B.type,Q().rowSpan,Q().colSpan)}})}})),c(m,u(F,{get when(){return Ue(()=>!!r())()&&n()},get children(){var B=ys(),Q=B.firstChild,ae=Q.firstChild,y=ae.nextSibling,C=Q.nextSibling;return y.$$click=()=>i(!1),c(y,u(X,{name:"x",class:"w-4 h-4"})),c(C,u(be,{each:ms,children:G=>(()=>{var ve=bs(),$e=ve.firstChild,Re=$e.firstChild,ye=Re.nextSibling,Xe=$e.nextSibling;return ve.$$click=()=>I(G),c(Re,u(X,{get name(){return G.icon},class:"w-4 h-4 text-blue-400"})),c(ye,()=>G.label),c(Xe,()=>G.description),ve})()})),B}}),null),z(B=>{var Q=`flex items-center gap-2 px-3 py-2 text-sm font-semibold rounded-xl border transition-all ${n()?"bg-green-600/15 hover:bg-green-600/25 text-green-400 border-green-500/20":"bg-white/5 hover:bg-white/10 text-gray-400 border-white/10"}`,ae=o()?"grabbing":"default";return Q!==B.e&&de(k,B.e=Q),ae!==B.t&&on(Y,"cursor",B.t=ae),B},{e:void 0,t:void 0}),m})()}He(["click","mousemove","mouseup"]);var $s=_('<div class="text-[11px] text-gray-600 mt-2 break-all">'),Ss=_('<div class="p-3 rounded-xl bg-red-500/10 border border-red-500/20 text-red-400 text-xs">'),_s=_('<div class="fixed inset-0 z-50 bg-[#05070a]/80 backdrop-blur-sm flex items-center justify-center p-4"><div class="w-full max-w-2xl rounded-3xl border border-white/10 bg-[#0a0c14] shadow-2xl p-8 space-y-6 animate-in fade-in zoom-in-95 duration-300"><div class="flex items-center gap-3"><div class="p-2 rounded-xl bg-amber-500/10 text-amber-400"></div><div><div class="font-bold text-white text-xl">Duplicate File Detected</div><div class="text-xs text-gray-500">Choose how to handle this file.</div></div></div><div class="p-4 rounded-2xl border border-white/10 bg-[#05070a]"><div class="text-xs text-gray-500 mb-1">Filename</div><div class="text-sm text-white font-mono break-all"></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-3">'),ks=_('<button class="text-left p-4 rounded-2xl border border-white/10 bg-white/5 hover:border-blue-500/40 hover:bg-blue-500/10 transition-all"><div class="flex items-center justify-between"><span class="font-bold text-white text-sm"></span><span class="text-[10px] px-2 py-0.5 rounded-full bg-white/10 text-gray-400 font-mono"></span></div><div class="text-xs text-gray-500 mt-1">');const Cs=[{value:"overwrite",label:"Overwrite",hint:"Replace this file",key:"o"},{value:"overwrite_all",label:"Overwrite All",hint:"Replace all duplicates in this job",key:"O"},{value:"skip",label:"Skip",hint:"Skip this file",key:"s"},{value:"skip_all",label:"Skip All",hint:"Skip all duplicates in this job",key:"S"},{value:"rename",label:"Rename",hint:"Save as next available filename",key:"r"},{value:"rename_all",label:"Rename All",hint:"Rename all duplicates in this job",key:"R"},{value:"cancel",label:"Cancel",hint:"Abort this item",key:"q"}];function As(e){return(()=>{var t=_s(),n=t.firstChild,l=n.firstChild,r=l.firstChild,i=l.nextSibling,o=i.firstChild,s=o.nextSibling,a=i.nextSibling;return c(r,u(X,{name:"alert-circle",class:"w-5 h-5"})),c(s,()=>{var g;return((g=e.prompt)==null?void 0:g.filename)||"Unknown file"}),c(i,u(F,{get when(){var g;return(g=e.prompt)==null?void 0:g.path},get children(){var g=$s();return c(g,()=>e.prompt.path),g}}),null),c(n,u(F,{get when(){return e.error},get children(){var g=Ss();return c(g,()=>e.error),g}}),a),c(a,u(be,{each:Cs,children:g=>(()=>{var p=ks(),f=p.firstChild,h=f.firstChild,M=h.nextSibling,E=f.nextSibling;return p.$$click=()=>{var J;return(J=e.onSelect)==null?void 0:J.call(e,g.value)},c(h,()=>g.label),c(M,()=>g.key),c(E,()=>g.hint),p})()})),t})()}He(["click"]);const Ps=new Set(["queued","running","reconnecting","complete","error"]),Ns=new Set(["queued","running","reconnecting"]),Ms=new Set(["complete","error"]),tl=e=>{if(typeof e!="string")return"";const t=e.trim().toLowerCase();return Ps.has(t)?t:""},Ts=e=>Ns.has(e),Ds=e=>Ms.has(e);var Is=_('<div class="text-xs text-gray-500 break-words">'),wn=_("<div>"),Es=_('<span>Job: <span class="text-gray-400 font-mono">'),Os=_("<span>Tasks: <span class=text-gray-400>/"),js=_("<span>Exit Code: <span class=text-gray-400>"),Ls=_('<div class="flex justify-end"><button class="inline-flex items-center gap-2 rounded-xl bg-blue-600 px-3 py-2 text-xs font-bold text-white shadow-lg shadow-blue-600/20 transition-all hover:bg-blue-500">View in Library'),Rs=_('<div class="grid grid-cols-3 gap-2"><div class="rounded-xl border border-white/10 bg-white/5 p-3"><div class="text-[10px] uppercase tracking-wider text-gray-500">Total</div><div class="text-sm font-bold text-white"></div></div><div class="rounded-xl border border-white/10 bg-white/5 p-3"><div class="text-[10px] uppercase tracking-wider text-gray-500">Succeeded</div><div class="text-sm font-bold text-green-400"></div></div><div class="rounded-xl border border-white/10 bg-white/5 p-3"><div class="text-[10px] uppercase tracking-wider text-gray-500">Failed</div><div class="text-sm font-bold text-red-400">'),zs=_("<div class=space-y-3>"),Fs=_('<div class="max-h-32 overflow-y-auto custom-scrollbar space-y-0.5">'),qs=_('<div><div class="flex items-start gap-3"><div></div><div class="flex-1 min-w-0"><div class="font-bold text-white"></div><div class="mt-2 flex flex-wrap gap-3 text-[11px] text-gray-500">'),Us=_('<div class="space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500"><div class=space-y-2><h1 class="text-4xl font-black text-white">Unlock Content.</h1><p class="text-gray-500 font-medium">Paste your YouTube URLs below to begin high-speed extraction.</p></div><div class="relative group"><textarea class="w-full h-64 bg-[#0a0c14] border-2 border-white/5 rounded-[2rem] p-8 outline-none focus:border-blue-500/50 focus:ring-4 focus:ring-blue-500/10 transition-all text-xl font-medium placeholder:text-gray-800 custom-scrollbar shadow-2xl"placeholder="Enter URLs (one per line)..."></textarea><div class="absolute bottom-6 right-6 flex gap-3"><button class="p-4 bg-white/5 rounded-2xl hover:bg-red-500/10 hover:text-red-400 transition-all"></button><button class="px-8 py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-2xl font-bold flex items-center gap-3 transition-all shadow-xl shadow-blue-600/30 disabled:opacity-50"></button></div></div><div class="grid grid-cols-3 gap-4"><button><div class="p-3 bg-purple-500/10 text-purple-400 rounded-xl w-fit"></div><div class=text-left><div class="font-bold text-white">Audio Only</div><div class="text-xs text-gray-500">Extract high-quality MP3/Opus</div></div></button><div class="p-6 rounded-3xl bg-white/5 border-2 border-transparent flex flex-col gap-3 group has-tooltip relative cursor-help"><span class="tooltip bg-gray-800 text-[10px] px-3 py-2 rounded-xl shadow-2xl mb-4 border border-white/10 w-56 text-center leading-relaxed">YouTube prevents downloads without valid Proof-of-Origin (PO) tokens. Automated bypass is active.</span><div class="p-3 bg-amber-500/10 text-amber-400 rounded-xl w-fit"></div><div class=text-left><div class="font-bold text-white">PO Token Guard</div><div class="text-xs text-gray-500">Automated Bot Detection Bypass</div></div></div><div class="p-6 rounded-3xl bg-white/5 border-2 border-transparent flex flex-col gap-3"><div class="p-3 bg-green-500/10 text-green-400 rounded-xl w-fit"></div><div class=text-left><div class="font-bold text-white">Smart Meta</div><div class="text-xs text-gray-500">Auto-tagging & Organization'),Ks=_('<div class=space-y-1><div class="flex items-center justify-between text-xs"><span class="text-gray-400 truncate flex-1"></span><span class="text-gray-500 ml-2"></span></div><div class="w-full h-1.5 bg-white/5 rounded-full overflow-hidden"><div>'),Bs=_('<div class="p-8 bg-[#0a0c14] border border-white/5 rounded-[2rem] space-y-6 animate-in zoom-in-95 duration-300"><h3 class="font-bold text-white flex items-center gap-2">Power User Options</h3><div class="grid grid-cols-2 gap-6"><div class=space-y-2><label class="text-xs font-bold text-gray-500">Output Template</label><input class="w-full bg-[#05070a] border border-white/10 rounded-xl p-3 outline-none focus:border-blue-500 text-gray-300"></div><div class=space-y-2><label class="text-xs font-bold text-gray-500">Concurrent Jobs</label><input type=number class="w-full bg-[#05070a] border border-white/10 rounded-xl p-3 outline-none focus:border-blue-500 text-gray-300"></div><div class="space-y-2 col-span-2"><label class="text-xs font-bold text-gray-500">Duplicate Policy</label><select class="w-full bg-[#05070a] border border-white/10 rounded-xl p-3 outline-none focus:border-blue-500 text-gray-300"><option value=prompt>Prompt (default)</option><option value=overwrite>Overwrite</option><option value=skip>Skip</option><option value=rename>Rename');const vn=[1e3,2e3,4e3,8e3,1e4],$n=5,Sn=80,Vs=new Set(["debug","info","warn","error"]),Ee=tl,Ws=Ts,Pt=Ds,Gs=e=>{switch(e){case"queued":return"Queued";case"running":return"Downloading...";case"reconnecting":return"Reconnecting...";case"complete":return"Download Complete";case"error":return"Download Failed";default:return"Download Status"}},Ve=e=>{switch(e){case"queued":return"Waiting for a worker to start the job.";case"running":return"Download in progress...";case"reconnecting":return"Reconnecting to the progress stream...";case"complete":return"All downloads in this job are finished.";case"error":return"Download failed.";default:return""}},Ys=e=>e==="complete"?"check-circle-2":e==="error"?"alert-circle":"loader",Hs=e=>e==="error"?{card:"bg-red-500/5 border-red-500/20",icon:"bg-red-500/10 text-red-400",accent:"text-red-400"}:e==="complete"?{card:"bg-green-500/5 border-green-500/20",icon:"bg-green-500/10 text-green-400",accent:"text-green-400"}:e==="reconnecting"?{card:"bg-amber-500/5 border-amber-500/20",icon:"bg-amber-500/10 text-amber-400",accent:"text-amber-400"}:{card:"bg-blue-500/5 border-blue-500/20",icon:"bg-blue-500/10 text-blue-400",accent:"text-blue-400"},_n=(e,t,n)=>{const l=typeof e=="number"?e:Number(e);if(!Number.isFinite(l))return t;const r=Math.trunc(l);return r<=0?t:Math.min(r,n)},_e=(e,t=0)=>{const n=typeof e=="number"?e:Number(e);return Number.isFinite(n)?Math.max(0,Math.trunc(n)):t},ct=e=>{const t=typeof e=="number"?e:Number(e);return!Number.isFinite(t)||t<0?0:t>100?100:t},Nt=e=>{if(!e||typeof e!="object")return null;const t={total:_e(e.total,0),succeeded:_e(e.succeeded,0),failed:_e(e.failed,0)};return t.total<=0&&t.succeeded<=0&&t.failed<=0?null:t},kn=e=>{const t=_e(e,0);if(t<=0)return"0 B";const n=["B","KB","MB","GB","TB"],l=Math.min(Math.floor(Math.log(t)/Math.log(1024)),n.length-1),r=t/1024**l,i=l===0?0:1;return`${r.toFixed(i)} ${n[l]}`},Xs=(e,t)=>t?"100%":`${ct(e).toFixed(1)}%`,Mt=(e,t,n)=>{const l=typeof t=="string"?t.trim():"";if(l!==""&&l!==e)return l;if(e==="error"){const r=typeof n=="string"?n.trim():"";if(r)return r}return Ve(e)},Cn=e=>{if(typeof e!="string")return"info";const t=e.trim().toLowerCase();return Vs.has(t)?t:"info"},Yt=(e,t,n)=>t??(e==="complete"?0:e==="error"?n??null:null);function Js(e={}){const{state:t,setState:n}=ft(),l=()=>t.download.urlInput,r=d=>{n("download","urlInput",d)},i=()=>t.download.isDownloading,o=d=>{n("download","isDownloading",d)},s=()=>t.download.jobStatus,a=d=>{n("download","jobStatus",P=>typeof d=="function"?d(P):d)},g=()=>t.download.progressTasks,p=d=>{n("download","progressTasks",P=>typeof d=="function"?d(P):d)},f=()=>t.download.logMessages,h=d=>{n("download","logMessages",P=>typeof d=="function"?d(P):d)},M=()=>t.download.duplicateQueue,E=d=>{n("download","duplicateQueue",P=>typeof d=="function"?d(P):d)},J=()=>t.download.duplicateError,Z=d=>{n("download","duplicateError",d)},ie=()=>t.settings,re=()=>t.ui.isAdvanced,se=d=>{if(typeof d=="function"){n("settings",P=>{const x=d(P);return!x||typeof x!="object"?P:{...P,...x}});return}!d||typeof d!="object"||n("settings",P=>({...P,...d}))};let te=null,ue=null,D=0,I="",K=0;const m=()=>M()[0],N=()=>Object.entries(g()).sort(([,d],[,P])=>{const x=((d==null?void 0:d.label)||"").toLowerCase(),q=((P==null?void 0:P.label)||"").toLowerCase();return x===q?0:x<q?-1:1}),w=()=>{const d=N();let P=0;for(const[,x]of d)(x!=null&&x.done||ct(x==null?void 0:x.percent)>=100)&&(P+=1);return{total:d.length,done:P}},T=()=>{var d;return Nt((d=s())==null?void 0:d.stats)},k=()=>{var d;return Ee((d=s())==null?void 0:d.status)},ne=()=>{var d;return Hs(Ee((d=s())==null?void 0:d.status))},Y=()=>{var d,P;return k()==="complete"?!0:k()!=="error"?!1:_e((P=(d=s())==null?void 0:d.stats)==null?void 0:P.succeeded,0)>0},we=()=>{typeof e.onOpenLibrary=="function"&&e.onOpenLibrary()},B=()=>{te&&(te.close(),te=null)},Q=()=>{ue&&(clearTimeout(ue),ue=null)},ae=()=>{Q(),B(),D=0,I="",K=0},y=d=>{const P=d.split(`
`).map(b=>b.trim()).filter(Boolean),x=[],q=[];for(const b of P){try{const V=new URL(b);if(V.protocol==="http:"||V.protocol==="https:"){x.push(b);continue}}catch{}q.push(b)}return{validUrls:x,invalidUrls:q}},C=d=>{d&&E(P=>P.filter(x=>x.promptId!==d))},G=()=>{D=0,Q(),a(d=>!d||d.status!=="reconnecting"?d:{...d,status:"running",message:Ve("running"),error:""})},ve=(d,P)=>{if(!d||typeof d!="object")return;const x=typeof d.jobId=="string"&&d.jobId?d.jobId:P;if(x!==P)return;const q={};if(Array.isArray(d.tasks))for(const O of d.tasks){if(!O||typeof O!="object"||typeof O.id!="string"||O.id==="")continue;const Ce=_e(O.total,0),Ke=_e(O.current,0),et=ct(O.percent),oe=!!O.done||et>=100;q[O.id]={label:O.label||O.id,total:Ce,current:Ce>0&&Ke>Ce?Ce:Ke,percent:oe?100:et,done:oe}}p(q);const b=[];if(Array.isArray(d.logs))for(const O of d.logs.slice(-Sn))!O||typeof O!="object"||typeof O.message!="string"||O.message===""||b.push({level:Cn(O.level),message:O.message});h(b);const V=[];if(Array.isArray(d.duplicates))for(const O of d.duplicates)!O||typeof O!="object"||typeof O.promptId!="string"||O.promptId===""||V.push({jobId:x,promptId:O.promptId,path:typeof O.path=="string"?O.path:"",filename:typeof O.filename=="string"?O.filename:""});E(V),Z("");const v=Ee(d.status),ee=Nt(d.stats),H=typeof d.error=="string"?d.error:"",ke=Number.isFinite(Number(d.exitCode))?Math.trunc(Number(d.exitCode)):null,Se=Number(d.lastSeq);if(Number.isFinite(Se)&&Se>K&&(K=Math.trunc(Se)),a(O=>{const Ce=v||Ee(O==null?void 0:O.status)||"running";return{...O||{},jobId:x,status:Ce,message:Mt(Ce,"",H),error:Ce==="error"?H||(O==null?void 0:O.error)||Ve("error"):"",exitCode:Yt(Ce,ke,O==null?void 0:O.exitCode),stats:ee||(O==null?void 0:O.stats)||null}}),v&&Pt(v)){o(!1);return}o(!0)},$e=(d,P)=>{const x=Ee((d==null?void 0:d.status)||(d==null?void 0:d.message));if(!x)return;const q=typeof d.error=="string"?d.error:"",b=Nt(d.stats),V=Number.isFinite(Number(d.exitCode))?Math.trunc(Number(d.exitCode)):null;if(a(v=>({...v||{},jobId:P,status:x,message:Mt(x,d.message,q),error:x==="error"?q||(v==null?void 0:v.error)||Ve("error"):"",exitCode:Yt(x,V,v==null?void 0:v.exitCode),stats:b||(v==null?void 0:v.stats)||null})),Pt(x)){o(!1),E([]),Z("");return}o(!0)},Re=(d,P)=>{const x=Ee((d==null?void 0:d.status)||(d==null?void 0:d.message))||"complete",q=typeof d.error=="string"?d.error:"",b=Nt(d.stats),V=Number.isFinite(Number(d.exitCode))?Math.trunc(Number(d.exitCode)):null;a(v=>({...v||{},jobId:P,status:x,message:Mt(x,d.message,q),error:x==="error"?q||(v==null?void 0:v.error)||Ve("error"):"",exitCode:Yt(x,V,v==null?void 0:v.exitCode),stats:b||(v==null?void 0:v.stats)||null})),o(!1),E([]),Z(""),ae()},ye=async d=>{const P=m();if(P){Z("");try{const x=await fetch("/api/download/duplicate-response",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jobId:P.jobId,promptId:P.promptId,choice:d})}),q=await x.json().catch(()=>({}));if(!x.ok||q.error){if(x.status===404||x.status===409){C(P.promptId),Z("");return}Z(q.error||"Failed to submit duplicate choice");return}C(P.promptId),Z("")}catch(x){Z(x.message||"Failed to submit duplicate choice")}}},Xe=d=>{if(m()&&!(d.metaKey||d.ctrlKey||d.altKey))switch(d.key){case"o":d.preventDefault(),ye("overwrite");break;case"O":d.preventDefault(),ye("overwrite_all");break;case"s":d.preventDefault(),ye("skip");break;case"S":d.preventDefault(),ye("skip_all");break;case"r":d.preventDefault(),ye("rename");break;case"R":d.preventDefault(),ye("rename_all");break;case"q":d.preventDefault(),ye("cancel");break}};On(()=>{typeof window<"u"&&window.addEventListener("keydown",Xe)}),rn(()=>{ae(),typeof window<"u"&&window.removeEventListener("keydown",Xe)});const rt=d=>{ae(),I=d;const P=()=>{if(I!==d)return;Q(),B();const x=new URLSearchParams({id:d});K>0&&x.set("since",String(K)),te=new EventSource(`/api/download/progress?${x.toString()}`),te.onmessage=q=>{if(I===d)try{const b=JSON.parse(q.data);if(!b||typeof b!="object"||typeof b.type!="string"||(typeof b.jobId=="string"&&b.jobId?b.jobId:d)!==d)return;if(b.type!=="snapshot"){const v=Number(b.seq);if(Number.isFinite(v)&&v>0){const ee=Math.trunc(v);if(ee<=K)return;K=ee}}switch(G(),b.type){case"snapshot":ve(b.snapshot,d);break;case"status":$e(b,d);break;case"register":typeof b.id=="string"&&b.id!==""&&p(v=>{var ee,H;return{...v,[b.id]:{...v[b.id]||{},label:b.label||((ee=v[b.id])==null?void 0:ee.label)||b.id,total:_e(b.total,((H=v[b.id])==null?void 0:H.total)||0),current:_e(b.current,0),percent:ct(b.percent),done:!1}}});break;case"progress":typeof b.id=="string"&&b.id!==""&&p(v=>{const ee=v[b.id]||{},H=_e(b.total,ee.total||0);let ke=_e(b.current,ee.current||0);H>0&&ke>H&&(ke=H);const Se=ct(typeof b.percent=="number"&&Number.isFinite(b.percent)?b.percent:H>0?ke*100/H:ee.percent||0);return{...v,[b.id]:{...ee,label:b.label||ee.label||b.id,total:H,current:ke,percent:Se,done:Se>=100}}});break;case"finish":typeof b.id=="string"&&b.id!==""&&p(v=>{var ee,H,ke,Se;return{...v,[b.id]:{...v[b.id]||{},label:((ee=v[b.id])==null?void 0:ee.label)||b.id,current:Math.max(_e((H=v[b.id])==null?void 0:H.current,0),_e((ke=v[b.id])==null?void 0:ke.total,0)),total:_e((Se=v[b.id])==null?void 0:Se.total,0),percent:100,done:!0}}});break;case"log":typeof b.message=="string"&&b.message!==""&&h(v=>[...v,{level:Cn(b.level),message:b.message}].slice(-Sn));break;case"duplicate":typeof b.promptId=="string"&&b.promptId!==""&&(E(v=>v.some(ee=>ee.promptId===b.promptId)?v:[...v,{jobId:d,promptId:b.promptId,path:typeof b.path=="string"?b.path:"",filename:typeof b.filename=="string"?b.filename:""}]),Z(""));break;case"duplicate-resolved":typeof b.promptId=="string"&&b.promptId!==""&&(C(b.promptId),Z(""));break;case"done":Re(b,d);break;default:break}}catch{}},te.onerror=()=>{var V;if(I!==d)return;B(),Q();const q=Ee((V=s())==null?void 0:V.status);if(!Ws(q))return;if(D>=$n){ae(),a(v=>({...v||{jobId:d},jobId:d,status:"error",message:"Progress stream disconnected.",error:"Connection lost. Progress updates stopped before completion."})),o(!1),E([]),Z("");return}D+=1;const b=vn[Math.min(D-1,vn.length-1)];a(v=>({...v||{jobId:d},jobId:d,status:"reconnecting",message:`Reconnecting... (${D}/${$n})`,error:""})),ue=setTimeout(()=>{ue=null,I===d&&P()},b)}};P()},it=async()=>{if(!l().trim())return;ae(),o(!0),a(null),p({}),h([]),E([]),Z("");const{validUrls:d,invalidUrls:P}=y(l());if(P.length>0){const b=P.slice(0,3).join(", "),V=P.length>3?", ...":"",v=P.length===1?"Invalid URL":`Invalid URLs (${P.length})`;a({status:"error",message:Ve("error"),error:`${v}: ${b}${V}`}),o(!1);return}if(d.length===0){a({status:"error",message:Ve("error"),error:"No valid URLs provided."}),o(!1);return}const x=ie(),q={urls:d,options:{output:x.output,audio:x.audioOnly,quality:x.quality,format:x.format,jobs:_n(x.jobs,1,Zn),timeout:_n(x.timeout,180,Qn),"on-duplicate":x.onDuplicate||"prompt"}};try{const b=await fetch("/api/download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)}),V=await b.json().catch(()=>({}));if(!b.ok||V.error||typeof V.jobId!="string"||V.jobId===""){a({status:"error",message:Ve("error"),error:V.error||"Failed to start download job."}),o(!1);return}a({status:"queued",jobId:V.jobId,message:Mt("queued",V.message,""),error:"",exitCode:null,stats:null}),rt(V.jobId)}catch(b){a({status:"error",message:Ve("error"),error:b.message||"Failed to start download job."}),o(!1)}};return(()=>{var d=Us(),P=d.firstChild,x=P.nextSibling,q=x.firstChild,b=q.nextSibling,V=b.firstChild,v=V.nextSibling,ee=x.nextSibling,H=ee.firstChild,ke=H.firstChild,Se=H.nextSibling,O=Se.firstChild,Ce=O.nextSibling,Ke=Se.nextSibling,et=Ke.firstChild;return q.$$input=oe=>r(oe.target.value),V.$$click=()=>r(""),c(V,u(X,{name:"trash-2",class:"w-6 h-6"})),v.$$click=it,c(v,u(X,{name:"download-cloud",class:"w-6 h-6"}),null),c(v,()=>i()?"Processing...":"Start Extraction",null),H.$$click=()=>se({...ie(),audioOnly:!ie().audioOnly}),c(ke,u(X,{name:"music",class:"w-5 h-5"})),c(Ce,u(X,{name:"shield-check",class:"w-5 h-5"})),c(et,u(X,{name:"database",class:"w-5 h-5"})),c(d,u(F,{get when(){return s()},get children(){var oe=qs(),Me=oe.firstChild,Ae=Me.firstChild,tt=Ae.nextSibling,Be=tt.firstChild,Te=Be.nextSibling;return c(Ae,u(X,{get name(){var A;return Ys(Ee((A=s())==null?void 0:A.status))},get class(){var A;return`w-5 h-5 ${Pt(Ee((A=s())==null?void 0:A.status))?"":"animate-spin"}`}})),c(Be,()=>{var A;return Gs(Ee((A=s())==null?void 0:A.status))}),c(tt,u(F,{get when(){var A;return(A=s())==null?void 0:A.message},get children(){var A=Is();return c(A,()=>s().message),A}}),Te),c(tt,u(F,{get when(){var A;return Ue(()=>{var W;return((W=s())==null?void 0:W.status)==="error"})()&&((A=s())==null?void 0:A.error)},get children(){var A=wn();return c(A,()=>s().error),z(()=>de(A,`text-xs break-words ${ne().accent}`)),A}}),Te),c(Te,u(F,{get when(){var A;return(A=s())==null?void 0:A.jobId},get children(){var A=Es(),W=A.firstChild,j=W.nextSibling;return c(j,()=>s().jobId),A}}),null),c(Te,u(F,{get when(){return w().total>0},get children(){var A=Os(),W=A.firstChild,j=W.nextSibling,ze=j.firstChild;return c(j,()=>w().done,ze),c(j,()=>w().total,null),A}}),null),c(Te,u(F,{get when(){var A;return Ue(()=>{var W;return!!Pt(Ee((W=s())==null?void 0:W.status))})()&&((A=s())==null?void 0:A.exitCode)!=null},get children(){var A=js(),W=A.firstChild,j=W.nextSibling;return c(j,()=>s().exitCode),A}}),null),c(oe,u(F,{get when(){return Ue(()=>!!Y())()&&typeof e.onOpenLibrary=="function"},get children(){var A=Ls(),W=A.firstChild,j=W.firstChild;return W.$$click=we,c(W,u(X,{name:"layers",class:"w-4 h-4"}),j),A}}),null),c(oe,u(F,{get when(){return T()},get children(){var A=Rs(),W=A.firstChild,j=W.firstChild,ze=j.nextSibling,Fe=W.nextSibling,De=Fe.firstChild,Ie=De.nextSibling,S=Fe.nextSibling,$=S.firstChild,fe=$.nextSibling;return c(ze,()=>T().total),c(Ie,()=>T().succeeded),c(fe,()=>T().failed),A}}),null),c(oe,u(F,{get when(){return N().length>0},get children(){var A=zs();return c(A,u(be,{get each(){return N()},children:([W,j])=>{const ze=ct(j==null?void 0:j.percent);return(()=>{var Fe=Ks(),De=Fe.firstChild,Ie=De.firstChild,S=Ie.nextSibling,$=De.nextSibling,fe=$.firstChild;return c(Ie,()=>(j==null?void 0:j.label)||W),c(S,()=>Xs(ze,!!(j!=null&&j.done)),null),c(S,(()=>{var ge=Ue(()=>(j==null?void 0:j.total)>0);return()=>ge()?`  ${kn(j.current)} / ${kn(j.total)}`:""})(),null),z(ge=>{var xe=`h-full rounded-full transition-all duration-300 ${j!=null&&j.done?"bg-green-500":"bg-blue-500"}`,qe=`${Math.min(100,ze)}%`;return xe!==ge.e&&de(fe,ge.e=xe),qe!==ge.t&&on(fe,"width",ge.t=qe),ge},{e:void 0,t:void 0}),Fe})()}})),A}}),null),c(oe,u(F,{get when(){return f().length>0},get children(){var A=Fs();return c(A,u(be,{get each(){return f()},children:W=>(()=>{var j=wn();return c(j,()=>W.message),z(()=>de(j,`text-[11px] font-mono px-2 py-0.5 rounded break-words ${W.level==="error"?"text-red-400":W.level==="warn"?"text-amber-400":"text-gray-500"}`)),j})()})),A}}),null),z(A=>{var W=`p-6 rounded-3xl border-2 space-y-4 animate-in fade-in duration-300 ${ne().card}`,j=`p-2 rounded-xl ${ne().icon}`;return W!==A.e&&de(oe,A.e=W),j!==A.t&&de(Ae,A.t=j),A},{e:void 0,t:void 0}),oe}}),null),c(d,(()=>{var oe=Ue(()=>!!re());return()=>oe()&&(()=>{var Me=Bs(),Ae=Me.firstChild,tt=Ae.firstChild,Be=Ae.nextSibling,Te=Be.firstChild,A=Te.firstChild,W=A.nextSibling,j=Te.nextSibling,ze=j.firstChild,Fe=ze.nextSibling,De=j.nextSibling,Ie=De.firstChild,S=Ie.nextSibling;return c(Ae,u(X,{name:"terminal",class:"w-4 h-4 text-blue-400"}),tt),W.$$input=$=>se({...ie(),output:$.target.value}),Fe.$$input=$=>se({...ie(),jobs:$.target.value}),S.addEventListener("change",$=>se({...ie(),onDuplicate:$.target.value})),z(()=>W.value=ie().output),z(()=>Fe.value=ie().jobs),z(()=>S.value=ie().onDuplicate||"prompt"),Me})()})(),null),c(d,u(F,{get when(){return m()},get children(){return u(As,{get prompt(){return m()},get error(){return J()},onSelect:ye})}}),null),z(oe=>{var Me=i(),Ae=`p-6 rounded-3xl border-2 transition-all flex flex-col gap-3 ${ie().audioOnly?"bg-blue-600/10 border-blue-500/50":"bg-white/5 border-transparent hover:border-white/10"}`;return Me!==oe.e&&(v.disabled=oe.e=Me),Ae!==oe.t&&de(H,oe.t=Ae),oe},{e:void 0,t:void 0}),z(()=>q.value=l()),d})()}He(["input","click"]);var Zs=_("<div>"),Qs=_('<div class="flex flex-wrap gap-2">'),eo=_('<div class="grid gap-3">'),to=_('<div class="space-y-6 animate-in fade-in slide-in-from-right-4 duration-500"><div class=space-y-4><div class="flex items-center justify-between gap-4"><div><h1 class="text-3xl font-black text-white">Your Library</h1><p class=text-gray-500>Access your downloaded media instantly.</p></div><div class="text-right text-xs text-gray-500 font-semibold tracking-wide uppercase">Showing <!> of <!> <!> items</div></div><div class="inline-flex items-center gap-2 p-1 bg-white/5 border border-white/5 rounded-2xl"></div><div class="p-4 bg-[#0a0c14] border border-white/5 rounded-2xl space-y-3"><div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"><div><div class="text-xs font-semibold tracking-wide text-gray-400 uppercase">Saved Playlists</div><div class="text-xs text-gray-500">Create custom collections and assign items instantly.</div></div><div class="text-xs text-gray-500"> saved </div></div><div class="flex flex-col gap-2 sm:flex-row"><input type=text placeholder="New saved playlist name"class="w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-sm text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500/40"><button type=button class="px-4 py-2 rounded-xl bg-blue-600 text-white text-sm font-semibold hover:bg-blue-500 transition-colors">Create</button></div></div><div class="grid gap-3 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 p-4 bg-[#0a0c14] border border-white/5 rounded-2xl"><label class="space-y-2 text-xs font-semibold tracking-wide text-gray-400 uppercase">Artist / Creator<select class="w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-sm text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500/40"><option value>All Artists/Creators</option></select></label><label class="space-y-2 text-xs font-semibold tracking-wide text-gray-400 uppercase">Album / Channel<select class="w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-sm text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500/40"><option value>All Albums/Channels</option></select></label><label class="space-y-2 text-xs font-semibold tracking-wide text-gray-400 uppercase">Source Playlist<select class="w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-sm text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500/40"><option value>All Source Playlists</option></select></label><label class="space-y-2 text-xs font-semibold tracking-wide text-gray-400 uppercase">Saved Playlist<select class="w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-sm text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500/40"><option value>All Saved Playlists</option></select></label><div class="space-y-2 text-xs font-semibold tracking-wide text-gray-400 uppercase">Sort<div class="flex gap-2"><select class="w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-sm text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500/40"></select><button type=button title="Clear filters">'),no=_("<button><span></span><span>"),lo=_('<div class="text-xs text-gray-500">No saved playlists yet.'),ro=_('<div><button type=button class="font-semibold hover:text-white transition-colors"></button><button type=button class="px-1 text-gray-400 hover:text-gray-200 transition-colors">Rename</button><button type=button class="px-1 text-red-400/80 hover:text-red-300 transition-colors">Delete'),at=_("<option>"),io=_('<div class="p-8 bg-[#0a0c14] border border-white/5 rounded-2xl text-center space-y-2"><div class="text-sm font-semibold text-white"></div><div class="text-xs text-gray-500">'),so=_('<div class="group flex items-center justify-between p-4 bg-[#0a0c14] border border-white/5 rounded-2xl hover:border-blue-500/30 transition-all cursor-default"><div class="flex items-center gap-5 min-w-0"><div class="w-16 h-16 bg-white/5 rounded-xl flex items-center justify-center relative overflow-hidden group-hover:bg-blue-600/20 transition-all shrink-0"></div><div class=min-w-0><div class="font-bold text-white group-hover:text-blue-400 transition-colors truncate"></div><div class="text-xs text-gray-500 font-medium truncate">  <!>  </div><div class="mt-2 flex flex-wrap gap-2 text-[10px] font-semibold uppercase tracking-wide"><span class="px-2 py-1 rounded-full bg-white/5 border border-white/10 text-gray-400"></span><span class="px-2 py-1 rounded-full bg-white/5 border border-white/10 text-gray-400"></span><span>Saved: </span></div><label class="mt-3 block text-[10px] font-semibold uppercase tracking-wide text-gray-400">Saved playlist<select class="mt-1 w-full max-w-xs bg-white/5 border border-white/10 rounded-lg px-2 py-1 text-xs text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500/40 normal-case tracking-normal"><option value>Unassigned</option></select></label></div></div><div class="flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-all shrink-0"><button class="p-3 bg-blue-600 rounded-xl text-white shadow-lg shadow-blue-600/20 hover:scale-105 active:scale-95 transition-all"></button><button class="p-3 bg-white/5 rounded-xl text-gray-400 hover:text-white transition-all">');const oo=[{value:"video",label:"Video"},{value:"audio",label:"Audio"}],nl=[{value:"newest",label:"Newest first"},{value:"oldest",label:"Oldest first"},{value:"creator_asc",label:"Artist/Creator (A-Z)"},{value:"creator_desc",label:"Artist/Creator (Z-A)"},{value:"collection_asc",label:"Album/Channel (A-Z)"},{value:"collection_desc",label:"Album/Channel (Z-A)"},{value:"playlist_asc",label:"Playlist (A-Z)"},{value:"playlist_desc",label:"Playlist (Z-A)"}],ao=80,An=new Set(nl.map(e=>e.value)),qt=(...e)=>{for(const t of e)if(typeof t=="string"){const n=t.trim();if(n!=="")return n}return""},pt=e=>String(e||"").toLowerCase()==="audio"?"audio":"video",ln=e=>String(e||"").trim().replace(/\s+/g," ").slice(0,ao),Pn=e=>qt(e==null?void 0:e.relative_path,e==null?void 0:e.filename,e==null?void 0:e.id),an=e=>e!=null&&e.metadata&&typeof e.metadata=="object"?e.metadata:{},Ze=e=>{const t=an(e);return qt(e==null?void 0:e.artist,t.artist,t.author,"Unknown Artist")},nt=e=>{const t=an(e);return qt(e==null?void 0:e.album,t.album,Ze(e),"Unknown Collection")},lt=e=>{var n,l;const t=an(e);return qt((n=e==null?void 0:e.playlist)==null?void 0:n.title,(l=t==null?void 0:t.playlist)==null?void 0:l.title,"Standalone")},me=(e,t)=>String(e||"").localeCompare(String(t||""),void 0,{sensitivity:"base",numeric:!0}),Tt=e=>{if(typeof(e==null?void 0:e.modified_at)=="string"){const t=Date.parse(e.modified_at);if(Number.isFinite(t))return t}if(typeof(e==null?void 0:e.date)=="string"){const t=Date.parse(e.date);if(Number.isFinite(t))return t}return 0},Ht=e=>Array.from(new Set(e.filter(t=>typeof t=="string"&&t.trim()!=="").map(t=>t.trim()))).sort(me),co=e=>{if(!Array.isArray(e))return[];const t=new Set,n=[];for(const l of e){const r=l&&typeof l=="object"?l:{},i=String(r.id||"").trim(),o=ln(r.name);i===""||o===""||t.has(i)||(t.add(i),n.push({id:i,name:o}))}return n},uo=e=>{const t=e&&typeof e=="object"?e:{},n={};for(const[l,r]of Object.entries(t)){const i=String(l||"").trim(),o=String(r||"").trim();i===""||o===""||(n[i]=o)}return n},fo=(e,t)=>{const n=[...e];return n.sort((l,r)=>{switch(t){case"oldest":return Tt(l)-Tt(r)||me(l.filename,r.filename);case"creator_asc":return me(Ze(l),Ze(r))||me(l.title,r.title);case"creator_desc":return me(Ze(r),Ze(l))||me(l.title,r.title);case"collection_asc":return me(nt(l),nt(r))||me(l.title,r.title);case"collection_desc":return me(nt(r),nt(l))||me(l.title,r.title);case"playlist_asc":return me(lt(l),lt(r))||me(l.title,r.title);case"playlist_desc":return me(lt(r),lt(l))||me(l.title,r.title);case"newest":default:return Tt(r)-Tt(l)||me(l.filename,r.filename)}}),n};function go(e){const[t,n]=Ne(""),[l,r]=Ne(""),[i,o]=Ne("neutral"),s=L(()=>{const y=typeof e.downloads=="function"?e.downloads():e.downloads;return Array.isArray(y)?y:[]}),a=L(()=>{const y=typeof e.activeMediaType=="function"?e.activeMediaType():e.activeMediaType;return pt(y)}),g=L(()=>{const y=typeof e.filters=="function"?e.filters():e.filters,C=y&&typeof y=="object"?y:{};return{creator:typeof C.creator=="string"?C.creator:"",collection:typeof C.collection=="string"?C.collection:"",playlist:typeof C.playlist=="string"?C.playlist:"",savedPlaylistId:typeof C.savedPlaylistId=="string"?C.savedPlaylistId:""}}),p=L(()=>{const y=typeof e.sortKey=="function"?e.sortKey():e.sortKey;return An.has(y)?y:"newest"}),f=L(()=>{const y=typeof e.savedPlaylists=="function"?e.savedPlaylists():e.savedPlaylists;return co(y)}),h=L(()=>{const y=typeof e.playlistAssignments=="function"?e.playlistAssignments():e.playlistAssignments;return uo(y)}),M=L(()=>new Map(f().map(y=>[y.id,y]))),E=L(()=>f()),J=y=>{const C=Pn(y);if(C==="")return"";const G=h()[C]||"";return M().has(G)?G:""},Z=y=>{const C=M().get(J(y));return C?C.name:"Unassigned"},ie=L(()=>{const y={video:0,audio:0};for(const C of s())y[pt(C==null?void 0:C.type)]+=1;return y}),re=L(()=>s().filter(y=>pt(y==null?void 0:y.type)===a())),se=L(()=>Ht(re().map(y=>Ze(y)))),te=L(()=>Ht(re().map(y=>nt(y)))),ue=L(()=>Ht(re().map(y=>lt(y)))),D=L(()=>{const y=g();return re().filter(C=>(y.creator===""||Ze(C)===y.creator)&&(y.collection===""||nt(C)===y.collection)&&(y.playlist===""||lt(C)===y.playlist)&&(y.savedPlaylistId===""||J(C)===y.savedPlaylistId))}),I=L(()=>fo(D(),p())),K=L(()=>{const y=g();return y.creator!==""||y.collection!==""||y.playlist!==""||y.savedPlaylistId!==""}),m=y=>{typeof e.onMediaTypeChange=="function"&&e.onMediaTypeChange(pt(y))},N=(y,C)=>{typeof e.onFilterChange=="function"&&e.onFilterChange(y,C)},w=()=>{if(typeof e.onClearFilters=="function"){e.onClearFilters();return}typeof e.onFilterChange=="function"&&(e.onFilterChange("creator",""),e.onFilterChange("collection",""),e.onFilterChange("playlist",""),e.onFilterChange("savedPlaylistId",""))},T=y=>{typeof e.onSortKeyChange=="function"&&e.onSortKeyChange(An.has(y)?y:"newest")},k=(y,C)=>{o(y),r(C)},ne=()=>{const y=ln(t());if(y===""){k("error","Enter a playlist name.");return}if(typeof e.onCreateSavedPlaylist!="function")return;const C=e.onCreateSavedPlaylist(y);if(!C||C.ok===!1){k("error",(C==null?void 0:C.error)||"Unable to create saved playlist.");return}n(""),k("success",`Saved playlist "${y}" created.`)},Y=y=>{if(typeof window>"u"||typeof e.onRenameSavedPlaylist!="function")return;const C=window.prompt("Rename saved playlist",y.name);if(C===null)return;const G=e.onRenameSavedPlaylist(y.id,C);if(!G||G.ok===!1){k("error",(G==null?void 0:G.error)||"Unable to rename saved playlist.");return}const ve=ln(C);k("success",`Saved playlist renamed to "${ve||y.name}".`)},we=y=>{if(typeof window>"u"||typeof e.onDeleteSavedPlaylist!="function"||!window.confirm(`Delete "${y.name}" and remove its assignments?`))return;const G=e.onDeleteSavedPlaylist(y.id);if(!G||G.ok===!1){k("error",(G==null?void 0:G.error)||"Unable to delete saved playlist.");return}k("success",`Saved playlist "${y.name}" deleted.`)},B=(y,C)=>{if(typeof e.onAssignSavedPlaylist!="function")return;const G=Pn(y);G!==""&&e.onAssignSavedPlaylist(G,C)},Q=L(()=>a()==="audio"?"audio":"video"),ae=L(()=>re().length>0);return mt(()=>{const y=g(),C=new Set(se()),G=new Set(te()),ve=new Set(ue()),$e=new Set(E().map(Re=>Re.id));y.creator!==""&&!C.has(y.creator)&&N("creator",""),y.collection!==""&&!G.has(y.collection)&&N("collection",""),y.playlist!==""&&!ve.has(y.playlist)&&N("playlist",""),y.savedPlaylistId!==""&&!$e.has(y.savedPlaylistId)&&N("savedPlaylistId","")}),(()=>{var y=to(),C=y.firstChild,G=C.firstChild,ve=G.firstChild,$e=ve.nextSibling,Re=$e.firstChild,ye=Re.nextSibling,Xe=ye.nextSibling,rt=Xe.nextSibling,it=rt.nextSibling,d=it.nextSibling;d.nextSibling;var P=G.nextSibling,x=P.nextSibling,q=x.firstChild,b=q.firstChild,V=b.nextSibling,v=V.firstChild,ee=q.nextSibling,H=ee.firstChild,ke=H.nextSibling,Se=x.nextSibling,O=Se.firstChild,Ce=O.firstChild,Ke=Ce.nextSibling;Ke.firstChild;var et=O.nextSibling,oe=et.firstChild,Me=oe.nextSibling;Me.firstChild;var Ae=et.nextSibling,tt=Ae.firstChild,Be=tt.nextSibling;Be.firstChild;var Te=Ae.nextSibling,A=Te.firstChild,W=A.nextSibling;W.firstChild;var j=Te.nextSibling,ze=j.firstChild,Fe=ze.nextSibling,De=Fe.firstChild,Ie=De.nextSibling;return c($e,()=>I().length,ye),c($e,()=>re().length,rt),c($e,Q,d),c(P,u(be,{each:oo,children:S=>(()=>{var $=no(),fe=$.firstChild,ge=fe.nextSibling;return $.$$click=()=>m(S.value),c(fe,()=>S.label),c(ge,()=>ie()[S.value]),z(xe=>{var qe=`px-4 py-2 rounded-xl text-sm font-semibold transition-all ${a()===S.value?"bg-blue-600/20 text-blue-300 border border-blue-500/40":"text-gray-400 hover:text-gray-200 hover:bg-white/5 border border-transparent"}`,Pe=`ml-2 text-xs ${a()===S.value?"text-blue-200":"text-gray-500"}`;return qe!==xe.e&&de($,xe.e=qe),Pe!==xe.t&&de(ge,xe.t=Pe),xe},{e:void 0,t:void 0}),$})()})),c(V,()=>E().length,v),c(V,()=>E().length===1?"playlist":"playlists",null),H.$$keydown=S=>{S.key==="Enter"&&(S.preventDefault(),ne())},H.$$input=S=>n(S.currentTarget.value),ke.$$click=ne,c(x,u(F,{get when(){return l()!==""},get children(){var S=Zs();return c(S,l),z(()=>de(S,`text-xs ${i()==="error"?"text-red-400":i()==="success"?"text-green-400":"text-gray-400"}`)),S}}),null),c(x,u(F,{get when(){return E().length>0},get fallback(){return lo()},get children(){var S=Qs();return c(S,u(be,{get each(){return E()},children:$=>(()=>{var fe=ro(),ge=fe.firstChild,xe=ge.nextSibling,qe=xe.nextSibling;return ge.$$click=()=>N("savedPlaylistId",g().savedPlaylistId===$.id?"":$.id),c(ge,()=>$.name),xe.$$click=()=>Y($),qe.$$click=()=>we($),z(Pe=>{var Je=`inline-flex items-center gap-1 rounded-full border px-3 py-1 text-xs transition-colors ${g().savedPlaylistId===$.id?"border-blue-500/40 bg-blue-600/10 text-blue-200":"border-white/10 bg-white/5 text-gray-300"}`,gt=`Rename ${$.name}`,yt=`Delete ${$.name}`;return Je!==Pe.e&&de(fe,Pe.e=Je),gt!==Pe.t&&Ye(xe,"title",Pe.t=gt),yt!==Pe.a&&Ye(qe,"title",Pe.a=yt),Pe},{e:void 0,t:void 0,a:void 0}),fe})()})),S}}),null),Ke.addEventListener("change",S=>N("creator",S.currentTarget.value)),c(Ke,u(be,{get each(){return se()},children:S=>(()=>{var $=at();return $.value=S,c($,S),$})()}),null),Me.addEventListener("change",S=>N("collection",S.currentTarget.value)),c(Me,u(be,{get each(){return te()},children:S=>(()=>{var $=at();return $.value=S,c($,S),$})()}),null),Be.addEventListener("change",S=>N("playlist",S.currentTarget.value)),c(Be,u(be,{get each(){return ue()},children:S=>(()=>{var $=at();return $.value=S,c($,S),$})()}),null),W.addEventListener("change",S=>N("savedPlaylistId",S.currentTarget.value)),c(W,u(be,{get each(){return E()},children:S=>(()=>{var $=at();return c($,()=>S.name),z(()=>$.value=S.id),$})()}),null),De.addEventListener("change",S=>T(S.currentTarget.value)),c(De,u(be,{each:nl,children:S=>(()=>{var $=at();return c($,()=>S.label),z(()=>$.value=S.value),$})()})),Ie.$$click=w,c(Ie,u(X,{name:"x",class:"w-4 h-4"})),c(y,u(F,{get when(){return I().length>0},get fallback(){return(()=>{var S=io(),$=S.firstChild,fe=$.nextSibling;return c($,(()=>{var ge=Ue(()=>!!ae());return()=>ge()?"No items match the current filters.":`No ${Q()} downloads yet.`})()),c(fe,()=>ae()?"Adjust filters or clear them to show more media.":"Download new media to populate this section."),S})()},get children(){var S=eo();return c(S,u(be,{get each(){return I()},children:$=>(()=>{var fe=so(),ge=fe.firstChild,xe=ge.firstChild,qe=xe.nextSibling,Pe=qe.firstChild,Je=Pe.nextSibling,gt=Je.firstChild,yt=gt.nextSibling;yt.nextSibling;var cn=Je.nextSibling,dn=cn.firstChild,un=dn.nextSibling,Ut=un.nextSibling;Ut.firstChild;var ll=cn.nextSibling,rl=ll.firstChild,kt=rl.nextSibling;kt.firstChild;var il=ge.nextSibling,Kt=il.firstChild,sl=Kt.nextSibling;return c(xe,u(X,{get name(){return pt($==null?void 0:$.type)==="video"?"film":"music"},class:"w-6 h-6 text-gray-600 group-hover:text-blue-400"})),c(Pe,()=>$.title),c(Je,()=>Ze($),gt),c(Je,()=>$.size,yt),c(Je,()=>$.date,null),c(dn,()=>nt($)),c(un,()=>lt($)),c(Ut,()=>Z($),null),kt.addEventListener("change",Ct=>B($,Ct.currentTarget.value)),c(kt,u(be,{get each(){return E()},children:Ct=>(()=>{var Bt=at();return c(Bt,()=>Ct.name),z(()=>Bt.value=Ct.id),Bt})()}),null),Kt.$$click=()=>{typeof e.openPlayer=="function"&&e.openPlayer($)},c(Kt,u(X,{name:"play",class:"w-5 h-5 fill-white"})),c(sl,u(X,{name:"external-link",class:"w-5 h-5"})),z(()=>de(Ut,`px-2 py-1 rounded-full border ${J($)===""?"bg-white/5 border-white/10 text-gray-500":"bg-blue-600/10 border-blue-500/30 text-blue-200"}`)),z(()=>kt.value=J($)),fe})()})),S}}),null),z(S=>{var $=!K(),fe=`px-3 py-2 rounded-xl border transition-all ${K()?"bg-white/5 border-white/10 text-gray-200 hover:text-white hover:border-white/20":"bg-white/5 border-white/5 text-gray-500 cursor-not-allowed"}`;return $!==S.e&&(Ie.disabled=S.e=$),fe!==S.t&&de(Ie,S.t=fe),S},{e:void 0,t:void 0}),z(()=>H.value=t()),z(()=>Ke.value=g().creator),z(()=>Me.value=g().collection),z(()=>Be.value=g().playlist),z(()=>W.value=g().savedPlaylistId),z(()=>De.value=p()),y})()}He(["input","keydown","click"]);var yo=_('<div class=space-y-6><h1 class="text-3xl font-black text-white">System Settings</h1><div class="p-8 bg-[#0a0c14] border border-white/5 rounded-[2rem] space-y-6"><div class="flex items-center justify-between"><div><div class="font-bold text-white">YouTube Auth Cookies</div><div class="text-xs text-gray-500">Currently synced from local browser</div></div><button class="px-4 py-2 bg-white/5 rounded-xl text-xs font-bold hover:bg-white/10 transition-all">Re-sync</button></div><div class="h-[1px] bg-white/5"></div><div class="flex items-center justify-between"><div><div class="font-bold text-white">PO Token Extension</div><div class="text-xs text-gray-500">Enable third-party providers for token generation</div></div><div class="w-12 h-6 bg-blue-600 rounded-full flex items-center px-1"><div class="w-4 h-4 bg-white rounded-full ml-auto">');function ho(){return yo()}var bo=_('<video controls autoplay class="w-full h-full object-contain">'),po=_('<div class="w-full h-full flex flex-col items-center justify-center bg-gradient-to-br from-blue-600/20 to-green-600/20"><audio controls autoplay class=w-[88%]>'),xo=_('<div class=text-center><p class="text-xs text-gray-500">Unsupported media type'),mo=_('<div class="fixed bottom-10 right-10 w-[28rem] glass rounded-[2.5rem] border border-white/10 shadow-2xl p-8 space-y-5 z-50 animate-in slide-in-from-bottom-10 duration-500"><div class="flex items-center justify-between"><span class="text-[10px] font-black text-blue-500 uppercase tracking-widest">Now Playing</span><button class="text-gray-500 hover:text-white"></button></div><div class="w-full aspect-video bg-black rounded-3xl border border-white/5 overflow-hidden flex items-center justify-center"></div><div class=space-y-1><div class="font-bold text-white truncate"></div><div class="text-xs text-gray-500 font-medium">');function wo(e){const t=()=>typeof e.media=="function"?e.media():e.media,n=()=>{var r,i;return!!((i=(r=t())==null?void 0:r.filename)!=null&&i.match(/\.(mp4|webm|mov|avi|mkv)$/i))},l=()=>{var r,i;return!!((i=(r=t())==null?void 0:r.filename)!=null&&i.match(/\.(mp3|wav|ogg|flac|m4a)$/i))};return(()=>{var r=mo(),i=r.firstChild,o=i.firstChild,s=o.nextSibling,a=i.nextSibling,g=a.nextSibling,p=g.firstChild,f=p.nextSibling;return Un(s,"click",e.onClose,!0),c(s,u(X,{name:"x",class:"w-4 h-4"})),c(a,u(F,{get when(){return n()},get children(){var h=bo();return z(()=>{var M;return Ye(h,"src",(M=t())==null?void 0:M.url)}),h}}),null),c(a,u(F,{get when(){return l()},get children(){var h=po(),M=h.firstChild;return c(h,u(X,{name:"music",class:"w-12 h-12 text-blue-400/70 mb-3"}),M),z(()=>{var E;return Ye(M,"src",(E=t())==null?void 0:E.url)}),h}}),null),c(a,u(F,{get when(){return Ue(()=>!n())()&&!l()},get children(){var h=xo(),M=h.firstChild;return c(h,u(X,{name:"play-circle",class:"w-12 h-12 text-blue-600/50 mx-auto mb-2"}),M),h}}),null),c(p,()=>{var h;return((h=t())==null?void 0:h.title)||"Unknown title"}),c(f,()=>{var h;return((h=t())==null?void 0:h.artist)||"Unknown artist"}),r})()}He(["click"]);var Nn=_('<div class="max-w-4xl mx-auto">'),vo=_('<div class="flex h-screen bg-[#05070a] text-gray-200 overflow-hidden font-sans select-none"><aside class="w-72 bg-[#0a0c14] border-r border-white/5 flex flex-col p-6"><div class="flex items-center gap-3 mb-10 px-2"><div class="w-10 h-10 bg-blue-600 rounded-2xl flex items-center justify-center shadow-lg shadow-blue-600/20"></div><span class="text-xl font-bold tracking-tight text-white">ytdl-go</span></div><nav class="flex-1 space-y-1"><button><span class="font-semibold text-sm">Dashboard</span></button><button><span class="font-semibold text-sm">New Download</span></button><button><span class="font-semibold text-sm">Library</span></button><button><span class="font-semibold text-sm">Configurations</span></button></nav><div class="mt-auto p-4 bg-white/5 rounded-2xl border border-white/5"><div class="flex items-center gap-2 mb-2 text-xs font-bold text-gray-500 uppercase tracking-widest">Extensions</div><div class="flex items-center justify-between text-xs"><span class=text-gray-400>PO Token Provider</span><span class="px-2 py-0.5 bg-green-500/10 text-green-500 rounded-full font-bold">Active</span></div></div></aside><main class="flex-1 flex flex-col bg-[#05070a] relative"><header class="h-20 border-b border-white/5 flex items-center justify-between px-10 glass sticky top-0 z-20"><h2 class="text-lg font-bold text-white capitalize"></h2><div class="flex items-center gap-6"><div class="flex items-center gap-3 px-4 py-2 bg-white/5 rounded-full border border-white/5 has-tooltip cursor-pointer"><span class="tooltip bg-gray-800 text-[10px] px-2 py-1 rounded shadow-xl mb-4 border border-white/10 w-48 text-center leading-relaxed">Logged in. Cookies synced for age-restricted content.</span><div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div><span class="text-xs font-bold text-gray-300 italic">YT_AUTH_OK</span></div><button>Advanced Mode</button></div></header><div class="flex-1 overflow-y-auto p-10 custom-scrollbar"><div>');const $o=e=>{if(!e||typeof e!="object")return 0;const t=Number(e.succeeded);return Number.isFinite(t)?Math.max(0,Math.trunc(t)):0},So=(e,t)=>{const n=tl(e);return n==="complete"?!0:n!=="error"?!1:$o(t)>0},_o=e=>String(e||"").split("/").map(t=>encodeURIComponent(t)).join("/"),ko=80,Mn=e=>String(e||"").trim().replace(/\s+/g," ").slice(0,ko),Xt=e=>String(e||"").trim(),Co=e=>String(e||"").trim(),Tn=(e,t,n="")=>e.some(l=>l.id!==n&&l.name.localeCompare(t,void 0,{sensitivity:"base"})===0),Ao=()=>typeof globalThis<"u"&&globalThis.crypto&&typeof globalThis.crypto.randomUUID=="function"?globalThis.crypto.randomUUID():`saved-${Date.now()}-${Math.random().toString(36).slice(2,10)}`;function Po(){const{state:e,setState:t}=ft();let n=null,l=0,r="",i="",o=null,s=!1;const a=()=>e.ui.activeTab,g=()=>e.ui.isAdvanced,p=()=>e.download.jobStatus,f=D=>{t("ui","activeTab",D)},h=()=>{t("ui","isAdvanced",D=>!D)},M=()=>{f("library")},E=()=>{o&&(clearTimeout(o),o=null)},J=async()=>{if(s)return!1;n&&n.abort(),n=new AbortController;const D=++l;try{const I=await fetch("/api/media/",{signal:n.signal});if(I.ok){const K=await I.json();if(s||D!==l)return!1;const m=Array.isArray(K)?K:K.items||[];return t("library","downloads",m),!0}return!1}catch(I){return I&&typeof I=="object"&&I.name==="AbortError"||console.error("Failed to fetch media files:",I),!1}finally{D===l&&(n=null)}},Z=async(D,I=1)=>{if(!D||s)return;i=D;const K=await J();if(!(s||i!==D)){if(K){r=D,i="",E();return}if(I>=3){i="";return}E(),o=setTimeout(()=>{o=null,Z(D,I+1)},I*1e3)}};On(()=>{J()}),mt(()=>{a()==="library"&&J()}),mt(()=>{const D=p(),I=D==null?void 0:D.jobId;typeof I!="string"||I===""||I===r||I===i||So(D==null?void 0:D.status,D==null?void 0:D.stats)&&Z(I,1)}),rn(()=>{s=!0,E(),n&&(n.abort(),n=null)});const ie=D=>{const I={...D,url:`/api/media/${_o(D.filename)}`};t("player","selectedMedia",I),t("player","active",!0)},re=D=>{const I=Mn(D);if(I==="")return{ok:!1,error:"Playlist name is required."};const K=new Date().toISOString();let m=null;return t("library","savedPlaylists",N=>{const w=Array.isArray(N)?N:[];return Tn(w,I)?w:(m={id:Ao(),name:I,createdAt:K,updatedAt:K},[...w,m])}),m?{ok:!0,playlist:m}:{ok:!1,error:"A playlist with that name already exists."}},se=(D,I)=>{const K=Xt(D),m=Mn(I);if(K==="")return{ok:!1,error:"Playlist not found."};if(m==="")return{ok:!1,error:"Playlist name is required."};let N="missing";const w=new Date().toISOString();return t("library","savedPlaylists",T=>{const k=Array.isArray(T)?T:[];return k.some(Y=>Y.id===K)?Tn(k,m,K)?(N="duplicate",k):(N="ok",k.map(Y=>Y.id===K?{...Y,name:m,updatedAt:w}:Y)):(N="missing",k)}),N==="ok"?{ok:!0}:N==="duplicate"?{ok:!1,error:"A playlist with that name already exists."}:{ok:!1,error:"Playlist not found."}},te=D=>{const I=Xt(D);if(I==="")return{ok:!1,error:"Playlist not found."};let K=!1;return t("library","savedPlaylists",m=>{const N=Array.isArray(m)?m:[],w=N.filter(T=>T.id!==I);return K=w.length!==N.length,w}),K?(t("library","playlistAssignments",m=>{const N=m&&typeof m=="object"?m:{};let w=!1;const T={};for(const[k,ne]of Object.entries(N)){if(ne===I){w=!0;continue}T[k]=ne}return w?T:N}),t("library","filters","savedPlaylistId",m=>m===I?"":m),{ok:!0}):{ok:!1,error:"Playlist not found."}},ue=(D,I)=>{const K=Co(D),m=Xt(I);K===""||!(m===""||e.library.savedPlaylists.some(w=>w.id===m))||t("library","playlistAssignments",w=>{const T=w&&typeof w=="object"?w:{};if(m===""){if(!(K in T))return T;const k={...T};return delete k[K],k}return T[K]===m?T:{...T,[K]:m}})};return(()=>{var D=vo(),I=D.firstChild,K=I.firstChild,m=K.firstChild,N=K.nextSibling,w=N.firstChild,T=w.firstChild,k=w.nextSibling,ne=k.firstChild,Y=k.nextSibling,we=Y.firstChild,B=Y.nextSibling,Q=B.firstChild,ae=N.nextSibling,y=ae.firstChild,C=y.firstChild,G=I.nextSibling,ve=G.firstChild,$e=ve.firstChild,Re=$e.nextSibling,ye=Re.firstChild,Xe=ye.firstChild,rt=Xe.nextSibling;rt.nextSibling;var it=ye.nextSibling,d=ve.nextSibling,P=d.firstChild;return c(m,u(X,{name:"zap",class:"w-6 h-6 text-white fill-white"})),w.$$click=()=>f("dashboard"),c(w,u(X,{name:"layout-dashboard",class:"w-5 h-5"}),T),k.$$click=()=>f("download"),c(k,u(X,{name:"plus-circle",class:"w-5 h-5"}),ne),Y.$$click=()=>f("library"),c(Y,u(X,{name:"layers",class:"w-5 h-5"}),we),B.$$click=()=>f("settings"),c(B,u(X,{name:"sliders",class:"w-5 h-5"}),Q),c(y,u(X,{name:"puzzle",class:"w-3 h-3"}),C),c($e,a),c(ye,u(X,{name:"chevron-down",class:"w-3 h-3 text-gray-500"}),null),it.$$click=h,c(P,u(Js,{onOpenLibrary:M})),c(d,u(F,{get when(){return a()==="dashboard"},get children(){return u(vs,{})}}),null),c(d,u(F,{get when(){return a()==="library"},get children(){var x=Nn();return c(x,u(go,{downloads:()=>e.library.downloads,activeMediaType:()=>e.library.activeMediaType,filters:()=>e.library.filters,sortKey:()=>e.library.sortKey,savedPlaylists:()=>e.library.savedPlaylists,playlistAssignments:()=>e.library.playlistAssignments,onMediaTypeChange:q=>t("library","activeMediaType",q),onFilterChange:(q,b)=>t("library","filters",q,b),onClearFilters:()=>t("library","filters",{creator:"",collection:"",playlist:"",savedPlaylistId:""}),onSortKeyChange:q=>t("library","sortKey",q),onCreateSavedPlaylist:re,onRenameSavedPlaylist:se,onDeleteSavedPlaylist:te,onAssignSavedPlaylist:ue,openPlayer:ie})),x}}),null),c(d,u(F,{get when(){return a()==="settings"},get children(){var x=Nn();return c(x,u(ho,{})),x}}),null),c(G,(()=>{var x=Ue(()=>!!e.player.active);return()=>x()&&u(wo,{get media(){return e.player.selectedMedia},onClose:()=>t("player","active",!1)})})(),null),z(x=>{var q=`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${a()==="dashboard"?"bg-blue-600/10 text-blue-400":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,b=`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${a()==="download"?"bg-blue-600/10 text-blue-400":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,V=`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${a()==="library"?"bg-blue-600/10 text-blue-400":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,v=`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${a()==="settings"?"bg-blue-600/10 text-blue-400":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,ee=`px-4 py-2 rounded-full text-xs font-bold transition-all ${g()?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"bg-white/5 text-gray-500 hover:text-gray-300"}`,H=`max-w-4xl mx-auto ${a()==="download"?"":"hidden"}`;return q!==x.e&&de(w,x.e=q),b!==x.t&&de(k,x.t=b),V!==x.a&&de(Y,x.a=V),v!==x.o&&de(B,x.o=v),ee!==x.i&&de(it,x.i=ee),H!==x.n&&de(P,x.n=H),x},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),D})()}He(["click"]);const No=document.getElementById("root");Il(()=>u(Ri,{get children(){return u(Po,{})}}),No);
